"use strict";(self.webpackChunkIceCreamShop=self.webpackChunkIceCreamShop||[]).push([[179],{2011:(dt,Ae,k)=>{k.d(Ae,{Dh:()=>he,GT:()=>de,cc:()=>xe,hO:()=>Le,on:()=>B,pX:()=>re,xv:()=>fe});var d=k(4650),ee=k(127),R=k(5813);dt=k.hmd(dt);const se=["ngOnDestroy"],re=(pe,Xe,ot,Me={})=>new Proxy(pe,{get:(we,De)=>ot.runOutsideAngular(()=>{var Be;if(pe[De])return!(null===(Be=Me?.spy)||void 0===Be)&&Be.get&&Me.spy.get(De,pe[De]),pe[De];if(se.indexOf(De)>-1)return()=>{};const je=Xe.toPromise().then(U=>{const ge=U&&U[De];return"function"==typeof ge?ge.bind(U):ge&&ge.then?ge.then(z=>ot.run(()=>z)):ot.run(()=>ge)});return new Proxy(()=>{},{get:(U,ge)=>je[ge],apply:(U,ge,z)=>je.then(J=>{var ne;const te=J&&J(...z);return!(null===(ne=Me?.spy)||void 0===ne)&&ne.apply&&Me.spy.apply(De,z,te),te})})})}),de=(pe,Xe)=>{Xe.forEach(ot=>{Object.getOwnPropertyNames(ot.prototype||ot).forEach(Me=>{Object.defineProperty(pe.prototype,Me,Object.getOwnPropertyDescriptor(ot.prototype||ot,Me))})})};class ae{constructor(Xe){return Xe}}const he=new d.OlP("angularfire2.app.options"),fe=new d.OlP("angularfire2.app.name");function B(pe,Xe,ot){const we="object"==typeof ot&&ot||{};we.name=we.name||"string"==typeof ot&&ot||"[DEFAULT]";const Be=ee.Z.apps.filter(je=>je&&je.name===we.name)[0]||Xe.runOutsideAngular(()=>ee.Z.initializeApp(pe,we));try{JSON.stringify(pe)!==JSON.stringify(Be.options)&&j("error",`${Be.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae(Be)}const j=(pe,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[pe](...Xe)},K={provide:ae,useFactory:B,deps:[he,d.R0b,[new d.FiY,fe]]};let Le=(()=>{class pe{constructor(ot){ee.Z.registerVersion("angularfire",R.q4.full,"core"),ee.Z.registerVersion("angularfire",R.q4.full,"app-compat"),ee.Z.registerVersion("angular",d.q4F.full,ot.toString())}static initializeApp(ot,Me){return{ngModule:pe,providers:[{provide:he,useValue:ot},{provide:fe,useValue:Me}]}}}return pe.\u0275fac=function(ot){return new(ot||pe)(d.LFG(d.Lbi))},pe.\u0275mod=d.oAB({type:pe}),pe.\u0275inj=d.cJS({providers:[K]}),pe})();function xe(pe,Xe,ot,Me,we){const[,De,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===pe)||[];if(De)return function be(pe,Xe){try{return pe.toString()===Xe.toString()}catch{return pe===Xe}}(we,Be)||(me("error",`${Xe} was already initialized on the ${ot} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:we,was:Be})),De;{const je=Me();return globalThis.\u0275AngularfireInstanceCache.push([pe,je,we]),je}}const nt=!!dt.hot,me=(pe,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[pe](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(dt,Ae,k)=>{k.d(Ae,{q4:()=>pr,iC:()=>Vi,HU:()=>qu,vb:()=>Bo,JM:()=>is});var d=k(4650),ee=k(5867),R=k(5861),se=k(9681),re=k(2090),de=k(4859),ae=k(1877),he=k(8766);const fe="@firebase/installations",B="0.5.15",K=`w:${B}`,Le="FIS_v2",Xe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ot(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Me({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function we(D){return{token:D.token,requestStatus:2,expiresIn:J(D.expiresIn),creationTime:Date.now()}}function De(D,C){return Be.apply(this,arguments)}function Be(){return(Be=(0,R.Z)(function*(D,C){const F=(yield C.json()).error;return Xe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function U(D,{refreshToken:C}){const x=je(D);return x.append("Authorization",function ne(D){return`${Le} ${D}`}(C)),x}function ge(D){return z.apply(this,arguments)}function z(){return(z=(0,R.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function J(D){return Number(D.replace("s","000"))}function te(D,C){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const F=Me(D),Y=je(D),oe=C.getImmediate({optional:!0});if(oe){const ft=yield oe.getHeartbeatsHeader();ft&&Y.append("x-firebase-client",ft)}const Ue={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:Le,appId:D.appId,sdkVersion:K})},Qe=yield ge(()=>fetch(F,Ue));if(Qe.ok){const ft=yield Qe.json();return{fid:ft.fid||x,registrationStatus:2,refreshToken:ft.refreshToken,authToken:we(ft.authToken)}}throw yield De("Create Installation",Qe)})).apply(this,arguments)}function Re(D){return new Promise(C=>{setTimeout(C,D)})}const Xt=/^[cdef][\w-]{21}$/;function Ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function cn(D){return function mt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Xt.test(x)?x:""}catch{return""}}function wn(D){return`${D.appName}!${D.appId}`}const Qt=new Map;function en(D,C){const x=wn(D);fn(x,C),function zi(D,C){const x=function Lr(){return!bi&&"BroadcastChannel"in self&&(bi=new BroadcastChannel("[Firebase] FID Change"),bi.onmessage=D=>{fn(D.data.key,D.data.fid)}),bi}();x&&x.postMessage({key:D,fid:C}),function Zr(){0===Qt.size&&bi&&(bi.close(),bi=null)}()}(x,C)}function fn(D,C){const x=Qt.get(D);if(x)for(const F of x)F(C)}let bi=null;const ii="firebase-installations-store";let si=null;function fa(){return si||(si=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(ii)}})),si}function Ke(D,C){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,R.Z)(function*(D,C){const x=wn(D),Y=(yield fa()).transaction(ii,"readwrite"),oe=Y.objectStore(ii),Ie=yield oe.get(x);return yield oe.put(C,x),yield Y.done,(!Ie||Ie.fid!==C.fid)&&en(D,C.fid),C})).apply(this,arguments)}function vs(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,R.Z)(function*(D){const C=wn(D),F=(yield fa()).transaction(ii,"readwrite");yield F.objectStore(ii).delete(C),yield F.done})).apply(this,arguments)}function oi(D,C){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,R.Z)(function*(D,C){const x=wn(D),Y=(yield fa()).transaction(ii,"readwrite"),oe=Y.objectStore(ii),Ie=yield oe.get(x),Ue=C(Ie);return void 0===Ue?yield oe.delete(x):yield oe.put(Ue,x),yield Y.done,Ue&&(!Ie||Ie.fid!==Ue.fid)&&en(D,Ue.fid),Ue})).apply(this,arguments)}function Fn(D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,R.Z)(function*(D){let C;const x=yield oi(D.appConfig,F=>{const Y=_n(F),oe=yt(D,Y);return C=oe.registrationPromise,oe.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function _n(D){return xt(D||{fid:Ze(),registrationStatus:0})}function yt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Xe.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function ut(D,C){return an.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:wr(D)}:{installationEntry:C}}function an(){return(an=(0,R.Z)(function*(D,C){try{const x=yield te(D,C);return Ke(D.appConfig,x)}catch(x){throw ot(x)&&409===x.customData.serverCode?yield vs(D.appConfig):yield Ke(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function wr(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,R.Z)(function*(D){let C=yield Kr(D.appConfig);for(;1===C.registrationStatus;)yield Re(100),C=yield Kr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Fn(D);return F||x}return C})).apply(this,arguments)}function Kr(D){return oi(D,C=>{if(!C)throw Xe.create("installation-not-found");return xt(C)})}function xt(D){return function ws(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function tn(D,C){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const F=nn(D,x),Y=U(D,x),oe=C.getImmediate({optional:!0});if(oe){const ft=yield oe.getHeartbeatsHeader();ft&&Y.append("x-firebase-client",ft)}const Ue={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:D.appId}})},Qe=yield ge(()=>fetch(F,Ue));if(Qe.ok)return we(yield Qe.json());throw yield De("Generate Auth Token",Qe)})).apply(this,arguments)}function nn(D,{fid:C}){return`${Me(D)}/${C}/authTokens:generate`}function nr(D){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,R.Z)(function*(D,C=!1){let x;const F=yield oi(D.appConfig,oe=>{if(!Ut(oe))throw Xe.create("not-registered");const Ie=oe.authToken;if(!C&&$(Ie))return oe;if(1===Ie.requestStatus)return x=tt(D,C),oe;{if(!navigator.onLine)throw Xe.create("app-offline");const Ue=W(oe);return x=Ct(D,Ue),Ue}});return x?yield x:F.authToken})).apply(this,arguments)}function tt(D,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,R.Z)(function*(D,C){let x=yield et(D.appConfig);for(;1===x.authToken.requestStatus;)yield Re(100),x=yield et(D.appConfig);const F=x.authToken;return 0===F.requestStatus?nr(D,C):F})).apply(this,arguments)}function et(D){return oi(D,C=>{if(!Ut(C))throw Xe.create("not-registered");return function Ee(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ct(D,C){return It.apply(this,arguments)}function It(){return(It=(0,R.Z)(function*(D,C){try{const x=yield tn(D,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Ke(D.appConfig,F),x}catch(x){if(!ot(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ke(D.appConfig,F)}else yield vs(D.appConfig);throw x}})).apply(this,arguments)}function Ut(D){return void 0!==D&&2===D.registrationStatus}function $(D){return 2===D.requestStatus&&!function V(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function W(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function He(){return(He=(0,R.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:F}=yield Fn(C);return F?F.catch(console.error):nr(C).catch(console.error),x.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,R.Z)(function*(D,C=!1){const x=D;return yield yn(x),(yield nr(x,C)).token})).apply(this,arguments)}function yn(D){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,R.Z)(function*(D){const{registrationPromise:C}=yield Fn(D);C&&(yield C)})).apply(this,arguments)}function Es(D){return Xe.create("missing-app-config-values",{valueName:D})}const Do="installations",Cn=D=>{const C=D.getProvider("app").getImmediate(),x=function En(D){if(!D||!D.options)throw Es("App Configuration");if(!D.name)throw Es("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw Es(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},qs=D=>{const C=D.getProvider("app").getImmediate(),x=(0,se._getProvider)(C,Do).getImmediate();return{getId:()=>function Q(D){return He.apply(this,arguments)}(x),getToken:Y=>function ht(D){return Jt.apply(this,arguments)}(x,Y)}};(function su(){(0,se._registerComponent)(new de.wA(Do,Cn,"PUBLIC")),(0,se._registerComponent)(new de.wA("installations-internal",qs,"PRIVATE"))})(),(0,se.registerVersion)(fe,B),(0,se.registerVersion)(fe,B,"esm2017");const Oi="@firebase/remote-config",Wn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zh{constructor(C,x,F,Y){this.client=C,this.storage=x,this.storageCache=F,this.logger=Y}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Y=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Y}.`),Y}fetch(C){var x=this;return(0,R.Z)(function*(){const[F,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Y;C.eTag=Y&&Y.eTag;const oe=yield x.client.fetch(C),Ie=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Ie.push(x.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Ie),oe})()}}function Nl(D=navigator){return D.languages&&D.languages[0]||D.language}class Pl{constructor(C,x,F,Y,oe,Ie){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=Y,this.apiKey=oe,this.appId=Ie}fetch(C){var x=this;return(0,R.Z)(function*(){var F,Y,oe;const[Ie,Ue]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Lt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},lt={sdk_version:x.sdkVersion,app_instance_id:Ie,app_instance_id_token:Ue,app_id:x.appId,language_code:Nl()},In={method:"POST",headers:Lt,body:JSON.stringify(lt)},gr=fetch(ft,In),jo=new Promise((Ai,lo)=>{C.signal.addEventListener(()=>{const yd=new Error("The operation was aborted.");yd.name="AbortError",lo(yd)})});let $o;try{yield Promise.race([gr,jo]),$o=yield gr}catch(Ai){let lo="fetch-client-network";throw"AbortError"===(null===(F=Ai)||void 0===F?void 0:F.name)&&(lo="fetch-timeout"),Wn.create(lo,{originalErrorMessage:null===(Y=Ai)||void 0===Y?void 0:Y.message})}let ss=$o.status;const Rt=$o.headers.get("ETag")||void 0;let ci,uo;if(200===$o.status){let Ai;try{Ai=yield $o.json()}catch(lo){throw Wn.create("fetch-client-parse",{originalErrorMessage:null===(oe=lo)||void 0===oe?void 0:oe.message})}ci=Ai.entries,uo=Ai.state}if("INSTANCE_STATE_UNSPECIFIED"===uo?ss=500:"NO_CHANGE"===uo?ss=304:("NO_TEMPLATE"===uo||"EMPTY_CONFIG"===uo)&&(ci={}),304!==ss&&200!==ss)throw Wn.create("fetch-status",{httpStatus:ss});return{status:ss,eTag:Rt,config:ci}})()}}class Jp{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,R.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var Y=this;return(0,R.Z)(function*(){yield function ir(D,C){return new Promise((x,F)=>{const Y=Math.max(C-Date.now(),0),oe=setTimeout(x,Y);D.addEventListener(()=>{clearTimeout(oe),F(Wn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const oe=yield Y.client.fetch(C);return yield Y.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function Kc(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(oe))throw oe;const Ie={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(Ie),Y.attemptFetch(C,Ie)}})()}}class Yc{constructor(C,x,F,Y,oe){this.app=C,this._client=x,this._storageCache=F,this._storage=Y,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Rl(D,C){var x;const F=D.target.error||void 0;return Wn.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Cs="app_namespace_store";class ng{constructor(C,x,F,Y=function tg(){return new Promise((D,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Y=>{C(Rl(Y,"storage-open"))},F.onsuccess=Y=>{D(Y.target.result)},F.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(Cs,{keyPath:"compositeKey"})}}catch(F){C(Wn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,R.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,oe)=>{var Ie;const Qe=F.transaction([Cs],"readonly").objectStore(Cs),ft=x.createCompositeKey(C);try{const Lt=Qe.get(ft);Lt.onerror=lt=>{oe(Rl(lt,"storage-get"))},Lt.onsuccess=lt=>{const In=lt.target.result;Y(In?In.value:void 0)}}catch(Lt){oe(Wn.create("storage-get",{originalErrorMessage:null===(Ie=Lt)||void 0===Ie?void 0:Ie.message}))}})})()}set(C,x){var F=this;return(0,R.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((oe,Ie)=>{var Ue;const ft=Y.transaction([Cs],"readwrite").objectStore(Cs),Lt=F.createCompositeKey(C);try{const lt=ft.put({compositeKey:Lt,value:x});lt.onerror=In=>{Ie(Rl(In,"storage-set"))},lt.onsuccess=()=>{oe()}}catch(lt){Ie(Wn.create("storage-set",{originalErrorMessage:null===(Ue=lt)||void 0===Ue?void 0:Ue.message}))}})})()}delete(C){var x=this;return(0,R.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,oe)=>{var Ie;const Qe=F.transaction([Cs],"readwrite").objectStore(Cs),ft=x.createCompositeKey(C);try{const Lt=Qe.delete(ft);Lt.onerror=lt=>{oe(Rl(lt,"storage-delete"))},Lt.onsuccess=()=>{Y()}}catch(Lt){oe(Wn.create("storage-delete",{originalErrorMessage:null===(Ie=Lt)||void 0===Ie?void 0:Ie.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Jc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,R.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Y=C.storage.getActiveConfig(),oe=yield x;oe&&(C.lastFetchStatus=oe);const Ie=yield F;Ie&&(C.lastSuccessfulFetchTimestampMillis=Ie);const Ue=yield Y;Ue&&(C.activeConfig=Ue)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function uu(){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,R.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function Ts(){(0,se._registerComponent)(new de.wA("remote-config",function D(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),Y=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Wn.create("registration-window");if(!(0,re.hl)())throw Wn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Ie,appId:Ue}=F.options;if(!oe)throw Wn.create("registration-project-id");if(!Ie)throw Wn.create("registration-api-key");if(!Ue)throw Wn.create("registration-app-id");const Qe=new ng(Ue,F.name,x=x||"firebase"),ft=new Jc(Qe),Lt=new ae.Yd(Oi);Lt.logLevel=ae.in.ERROR;const lt=new Pl(Y,se.SDK_VERSION,x,oe,Ie,Ue),In=new Jp(lt,Qe),gr=new zh(In,Qe,ft,Lt),jo=new Yc(F,gr,ft,Qe,Lt);return function Ln(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(jo),jo},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Oi,"0.3.14"),(0,se.registerVersion)(Oi,"0.3.14","esm2017")}();const ki="/firebase-messaging-sw.js",Ki="/firebase-cloud-messaging-push-scope",Yi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ma="google.c.a.c_id",lu="google.c.a.c_l",Ol="google.c.a.ts",Zh="google.c.a.e";var Qi=(()=>{return(D=Qi||(Qi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Qi;var D})();function ai(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Y=new Uint8Array(F.length);for(let oe=0;oe<F.length;++oe)Y[oe]=F.charCodeAt(oe);return Y}const To="fcm_token_details_db",br="fcm_token_object_Store";function Kh(D){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,R.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(To))return null;let C=null;return(yield(0,he.X3)(To,5,{upgrade:(F=(0,R.Z)(function*(Y,oe,Ie,Ue){var Qe;if(oe<2||!Y.objectStoreNames.contains(br))return;const ft=Ue.objectStore(br),Lt=yield ft.index("fcmSenderId").get(D);if(yield ft.clear(),Lt)if(2===oe){const lt=Lt;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;C={token:lt.fcmToken,createTime:null!==(Qe=lt.createTime)&&void 0!==Qe?Qe:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:ai(lt.vapidKey)}}}else if(3===oe){const lt=Lt;C={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:ai(lt.auth),p256dh:ai(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:ai(lt.vapidKey)}}}else if(4===oe){const lt=Lt;C={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:ai(lt.auth),p256dh:ai(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:ai(lt.vapidKey)}}}}),function(oe,Ie,Ue,Qe){return F.apply(this,arguments)})})).close(),yield(0,he.Lj)(To),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),xn(C)?C:null;var F}),Yh.apply(this,arguments)}function xn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ui="firebase-messaging-store";let Br=null;function du(){return Br||(Br=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(ui)}})),Br}function So(D){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,R.Z)(function*(D){const C=Ci(D),F=yield(yield du()).transaction(ui).objectStore(ui).get(C);if(F)return F;{const Y=yield Kh(D.appConfig.senderId);if(Y)return yield Kt(D,Y),Y}})).apply(this,arguments)}function Kt(D,C){return hu.apply(this,arguments)}function hu(){return(hu=(0,R.Z)(function*(D,C){const x=Ci(D),Y=(yield du()).transaction(ui,"readwrite");return yield Y.objectStore(ui).put(C,x),yield Y.done,C})).apply(this,arguments)}function Ws(D){return fu.apply(this,arguments)}function fu(){return(fu=(0,R.Z)(function*(D){const C=Ci(D),F=(yield du()).transaction(ui,"readwrite");yield F.objectStore(ui).delete(C),yield F.done})).apply(this,arguments)}function Ci({appConfig:D}){return D.appId}const Sn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Mt(D,C){return gu.apply(this,arguments)}function gu(){return(gu=(0,R.Z)(function*(D,C){var x;const F=yield Fl(D),Y=Te(C),oe={method:"POST",headers:F,body:JSON.stringify(Y)};let Ie;try{Ie=yield(yield fetch(Xi(D.appConfig),oe)).json()}catch(Ue){throw Sn.create("token-subscribe-failed",{errorInfo:null===(x=Ue)||void 0===x?void 0:x.toString()})}if(Ie.error)throw Sn.create("token-subscribe-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw Sn.create("token-subscribe-no-token");return Ie.token})).apply(this,arguments)}function Jh(D,C){return mu.apply(this,arguments)}function mu(){return(mu=(0,R.Z)(function*(D,C){var x;const F=yield Fl(D),Y=Te(C.subscriptionOptions),oe={method:"PATCH",headers:F,body:JSON.stringify(Y)};let Ie;try{Ie=yield(yield fetch(`${Xi(D.appConfig)}/${C.token}`,oe)).json()}catch(Ue){throw Sn.create("token-update-failed",{errorInfo:null===(x=Ue)||void 0===x?void 0:x.toString()})}if(Ie.error)throw Sn.create("token-update-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw Sn.create("token-update-no-token");return Ie.token})).apply(this,arguments)}function yu(D,C){return kl.apply(this,arguments)}function kl(){return(kl=(0,R.Z)(function*(D,C){var x;const Y={method:"DELETE",headers:yield Fl(D)};try{const Ie=yield(yield fetch(`${Xi(D.appConfig)}/${C}`,Y)).json();if(Ie.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:Ie.error.message})}catch(oe){throw Sn.create("token-unsubscribe-failed",{errorInfo:null===(x=oe)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Xi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Fl(D){return ya.apply(this,arguments)}function ya(){return(ya=(0,R.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Te({p256dh:D,auth:C,endpoint:x,vapidKey:F}){const Y={web:{endpoint:x,auth:C,p256dh:D}};return F!==Yi&&(Y.web.applicationPubKey=F),Y}const zt=6048e5;function _u(D){return vu.apply(this,arguments)}function vu(){return(vu=(0,R.Z)(function*(D){const C=yield Ll(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ai(C.getKey("auth")),p256dh:ai(C.getKey("p256dh"))},F=yield So(D.firebaseDependencies);if(F){if(nd(F.subscriptionOptions,x))return Date.now()>=F.createTime+zt?Ao(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield yu(D.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return _a(D.firebaseDependencies,x)}return _a(D.firebaseDependencies,x)})).apply(this,arguments)}function Nn(D){return wu.apply(this,arguments)}function wu(){return(wu=(0,R.Z)(function*(D){const C=yield So(D.firebaseDependencies);C&&(yield yu(D.firebaseDependencies,C.token),yield Ws(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ao(D,C){return li.apply(this,arguments)}function li(){return(li=(0,R.Z)(function*(D,C){try{const x=yield Jh(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Kt(D.firebaseDependencies,F),x}catch(x){throw yield Nn(D),x}})).apply(this,arguments)}function _a(D,C){return va.apply(this,arguments)}function va(){return(va=(0,R.Z)(function*(D,C){const F={token:yield Mt(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Kt(D,F),F.token})).apply(this,arguments)}function Ll(D,C){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,R.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qr(C)})})).apply(this,arguments)}function nd(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function wa(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Pn(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const F=C.notification.body;F&&(D.notification.body=F);const Y=C.notification.image;Y&&(D.notification.image=Y)}(C,D),function Fi(D,C){!C.data||(D.data=C.data)}(C,D),function Ul(D,C){var x,F,Y,oe,Ie;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Ue=null!==(Y=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Y?Y:null===(oe=C.notification)||void 0===oe?void 0:oe.click_action;Ue&&(D.fcmOptions.link=Ue);const Qe=null===(Ie=C.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;Qe&&(D.fcmOptions.analyticsLabel=Qe)}(C,D),C}function Zs(D){return"object"==typeof D&&!!D&&ma in D}function es(D,C){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function Ea(D){return Sn.create("missing-app-config-values",{valueName:D})}es("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),es("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ig{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function rg(D){if(!D||!D.options)throw Ea("App Configuration Object");if(!D.name)throw Ea("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of C)if(!x[F])throw Ea(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Y,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Bl(D){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,R.Z)(function*(D){var C;try{D.swRegistration=yield navigator.serviceWorker.register(ki,{scope:Ki}),D.swRegistration.update().catch(()=>{})}catch(x){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function ba(D,C){return jl.apply(this,arguments)}function jl(){return(jl=(0,R.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Bl(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Ia(D,C){return $l.apply(this,arguments)}function $l(){return($l=(0,R.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Yi)})).apply(this,arguments)}function Iu(){return(Iu=(0,R.Z)(function*(D,C){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield Ia(D,C?.vapidKey),yield ba(D,C?.serviceWorkerRegistration),_u(D)})).apply(this,arguments)}function Hl(D,C,x){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,R.Z)(function*(D,C,x){const F=ql(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ma],message_name:x[lu],message_time:x[Ol],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ql(D){switch(D){case Qi.NOTIFICATION_CLICKED:return"notification_open";case Qi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ks(){return(Ks=(0,R.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Qi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(wa(x)):D.onMessageHandler.next(wa(x)));const F=x.data;Zs(F)&&"1"===F[Zh]&&(yield Hl(D,x.messageType,F))})).apply(this,arguments)}const Ys="@firebase/messaging",sr=D=>{const C=new ig(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function rd(D,C){return Ks.apply(this,arguments)}(C,x)),C},Jr=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function bu(D,C){return Iu.apply(this,arguments)}(C,F)}};function id(){return zl.apply(this,arguments)}function zl(){return(zl=(0,R.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function bn(){(0,se._registerComponent)(new de.wA("messaging",sr,"PUBLIC")),(0,se._registerComponent)(new de.wA("messaging-internal",Jr,"PRIVATE")),(0,se.registerVersion)(Ys,"0.9.19"),(0,se.registerVersion)(Ys,"0.9.19","esm2017")}();const xo="analytics",ad="firebase_id",Js="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Su="https://www.googletagmanager.com/gtag/js",Rn=new ae.Yd("@firebase/analytics");function Au(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function Mu(D,C){const x=document.createElement("script");x.src=`${Su}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function ef(D,C,x,F,Y,oe){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,R.Z)(function*(D,C,x,F,Y,oe){const Ie=F[Y];try{if(Ie)yield C[Ie];else{const Qe=(yield Au(x)).find(ft=>ft.measurementId===Y);Qe&&(yield C[Qe.appId])}}catch(Ue){Rn.error(Ue)}D("config",Y,oe)})).apply(this,arguments)}function No(D,C,x,F,Y){return eo.apply(this,arguments)}function eo(){return(eo=(0,R.Z)(function*(D,C,x,F,Y){try{let oe=[];if(Y&&Y.send_to){let Ie=Y.send_to;Array.isArray(Ie)||(Ie=[Ie]);const Ue=yield Au(x);for(const Qe of Ie){const ft=Ue.find(lt=>lt.measurementId===Qe),Lt=ft&&C[ft.appId];if(!Lt){oe=[];break}oe.push(Lt)}}0===oe.length&&(oe=Object.values(C)),yield Promise.all(oe),D("event",F,Y||{})}catch(oe){Rn.error(oe)}})).apply(this,arguments)}function ld(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Su)&&x.src.includes(D))return x;return null}const hr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sa=new class Li{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function dd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Aa(D){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,R.Z)(function*(D){var C;const{appId:x,apiKey:F}=D,Y={method:"GET",headers:dd(F)},oe=Js.replace("{app-id}",x),Ie=yield fetch(oe,Y);if(200!==Ie.status&&304!==Ie.status){let Ue="";try{const Qe=yield Ie.json();null!==(C=Qe.error)&&void 0!==C&&C.message&&(Ue=Qe.error.message)}catch{}throw hr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:Ue})}return Ie.json()})).apply(this,arguments)}function Vn(D){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,R.Z)(function*(D,C=Sa,x){const{appId:F,apiKey:Y,measurementId:oe}=D.options;if(!F)throw hr.create("no-app-id");if(!Y){if(oe)return{measurementId:oe,appId:F};throw hr.create("no-api-key")}const Ie=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new Ru;return setTimeout((0,R.Z)(function*(){Ue.abort()}),void 0!==x?x:6e4),Nu({appId:F,apiKey:Y,measurementId:oe},Ie,Ue,C)})).apply(this,arguments)}function Nu(D,C,x){return to.apply(this,arguments)}function to(){return(to=(0,R.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},F,Y=Sa){var oe,Ie;const{appId:Ue,measurementId:Qe}=D;try{yield Ma(F,C)}catch(ft){if(Qe)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${null===(oe=ft)||void 0===oe?void 0:oe.message}]`),{appId:Ue,measurementId:Qe};throw ft}try{const ft=yield Aa(D);return Y.deleteThrottleMetadata(Ue),ft}catch(ft){const Lt=ft;if(!Pu(Lt)){if(Y.deleteThrottleMetadata(Ue),Qe)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${Lt?.message}]`),{appId:Ue,measurementId:Qe};throw ft}const lt=503===Number(null===(Ie=Lt?.customData)||void 0===Ie?void 0:Ie.httpStatus)?(0,re.$s)(x,Y.intervalMillis,30):(0,re.$s)(x,Y.intervalMillis),In={throttleEndTimeMillis:Date.now()+lt,backoffCount:x+1};return Y.setThrottleMetadata(Ue,In),Rn.debug(`Calling attemptFetch again in ${lt} millis`),Nu(D,In,F,Y)}})).apply(this,arguments)}function Ma(D,C){return new Promise((x,F)=>{const Y=Math.max(C-Date.now(),0),oe=setTimeout(x,Y);D.addEventListener(()=>{clearTimeout(oe),F(hr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Pu(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Ru{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let xs,Na;function Ns(){return(Ns=(0,R.Z)(function*(D,C,x,F,Y){if(Y&&Y.global)D("event",x,F);else{const oe=yield C;D("event",x,Object.assign(Object.assign({},F),{send_to:oe}))}})).apply(this,arguments)}function ro(D){Na=D}function Yl(D){xs=D}function ns(){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,R.Z)(function*(){var D;if(!(0,re.hl)())return Rn.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(C){return Rn.warn(hr.create("indexeddb-unavailable",{errorInfo:null===(D=C)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Oo(){return(Oo=(0,R.Z)(function*(D,C,x,F,Y,oe,Ie){var Ue;const Qe=Vn(D);Qe.then(gr=>{x[gr.measurementId]=gr.appId,D.options.measurementId&&gr.measurementId!==D.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${gr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gr=>Rn.error(gr)),C.push(Qe);const ft=ns().then(gr=>{if(gr)return F.getId()}),[Lt,lt]=yield Promise.all([Qe,ft]);ld(oe)||Mu(oe,Lt.measurementId),Na&&(Y("consent","default",Na),ro(void 0)),Y("js",new Date);const In=null!==(Ue=Ie?.config)&&void 0!==Ue?Ue:{};return In.origin="firebase",In.update=!0,null!=lt&&(In[ad]=lt),Y("config",Lt.measurementId,In),xs&&(Y("set",xs),Yl(void 0)),Lt.measurementId})).apply(this,arguments)}class Lu{constructor(C){this.app=C}_delete(){return delete Xr[this.app.options.appId],Promise.resolve()}}let Xr={},Ps=[];const ko={};let Lo,io,Fo="dataLayer",Pa=!1;function By(D,C,x){!function sg(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),x=hr.create("invalid-analytics-context",{errorInfo:C});Rn.warn(x.message)}}();const F=D.options.appId;if(!F)throw hr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw hr.create("no-api-key");Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xr[F])throw hr.create("already-exists",{id:F});if(!Pa){!function ud(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Fo);const{wrappedGtag:oe,gtagCore:Ie}=function Da(D,C,x,F,Y){let oe=function(...Ie){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(oe=window[Y]),window[Y]=function xu(D,C,x,F){function oe(){return(oe=(0,R.Z)(function*(Ie,Ue,Qe){try{"event"===Ie?yield No(D,C,x,Ue,Qe):"config"===Ie?yield ef(D,C,x,F,Ue,Qe):"consent"===Ie?D("consent","update",Qe):D("set",Ue)}catch(ft){Rn.error(ft)}})).apply(this,arguments)}return function Y(Ie,Ue,Qe){return oe.apply(this,arguments)}}(oe,D,C,x),{gtagCore:oe,wrappedGtag:window[Y]}}(Xr,Ps,ko,Fo,"gtag");io=oe,Lo=Ie,Pa=!0}return Xr[F]=function Ro(D,C,x,F,Y,oe,Ie){return Oo.apply(this,arguments)}(D,Ps,ko,C,Lo,Fo,x),new Lu(D)}function $y(){return tf.apply(this,arguments)}function tf(){return(tf=(0,R.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Vo="@firebase/analytics";!function dn(){(0,se._registerComponent)(new de.wA(xo,(C,{options:x})=>By(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new de.wA("analytics-internal",function D(C){try{const x=C.getProvider(xo).getImmediate();return{logEvent:(F,Y,oe)=>function ei(D,C,x,F){D=(0,re.m9)(D),function hd(D,C,x,F,Y){return Ns.apply(this,arguments)}(io,Xr[D.app.options.appId],C,x,F).catch(Y=>Rn.error(Y))}(x,F,Y,oe)}}catch(x){throw hr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(Vo,"0.8.3"),(0,se.registerVersion)(Vo,"0.8.3","esm2017")}();var On=k(4408),rs=k(7565);const Uu=new class Ir extends rs.v{}(class pd extends On.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):(C.flush(this),0)}});var Ql=k(4986),Bu=k(8505),so=k(9468),ju=k(5363);const pr=new d.GfV("7.4.1"),bt="__angularfire_symbol__analyticsIsSupportedValue",Rs="__angularfire_symbol__analyticsIsSupported",$u="__angularfire_symbol__remoteConfigIsSupportedValue",Uo="__angularfire_symbol__remoteConfigIsSupported",Hu="__angularfire_symbol__messagingIsSupportedValue",or="__angularfire_symbol__messagingIsSupported";function is(D,C,x){if(C){if(1===C.length)return C[0];const oe=C.filter(Ie=>Ie.app===x);if(1===oe.length)return oe[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Rs]||(globalThis[Rs]=$y().then(D=>globalThis[bt]=D).catch(()=>globalThis[bt]=!1)),globalThis[or]||(globalThis[or]=id().then(D=>globalThis[Hu]=D).catch(()=>globalThis[Hu]=!1)),globalThis[Uo]||(globalThis[Uo]=uu().then(D=>globalThis[$u]=D).catch(()=>globalThis[$u]=!1));const Bo=(D,C)=>{const x=C?[C]:(0,ee.C6)(),F=[];return x.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Ie=>{F.includes(Ie)||F.push(Ie)})}),F};function oo(){}class ti{constructor(C,x=Uu){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const Y=this.zone;return this.delegate.schedule(function(Ie){Y.runGuarded(()=>{C.apply(this,[Ie])})},x,F)}}class Gu{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oo,{},oo,oo)),x.pipe((0,Bu.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let qu=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ti(Zone.current)),this.insideAngular=x.run(()=>new ti(Zone.current,Ql.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Si(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Vi(D){return Si(),function Jl(D){return function(x){return(x=x.lift(new Gu(D.ngZone))).pipe((0,so.R)(D.outsideAngular),(0,ju.Q)(D.insideAngular))}}(Si())(D)}},2090:(dt,Ae,k)=>{k.d(Ae,{$s:()=>et,BH:()=>Gt,G6:()=>De,L:()=>he,LL:()=>Qt,Pz:()=>Xt,Sg:()=>Ze,UG:()=>be,US:()=>de,ZB:()=>j,ZR:()=>wn,aH:()=>mt,b$:()=>pe,eu:()=>je,hl:()=>Be,jU:()=>nt,m9:()=>Ut,ne:()=>Gn,pd:()=>Pi,r3:()=>Ii,ru:()=>me,tV:()=>fe,uI:()=>xe,vZ:()=>Ke,w1:()=>ot,xO:()=>tr,xb:()=>si,z$:()=>Le,zI:()=>U,zd:()=>oi});const se=function($){const V=[];let W=0;for(let Ee=0;Ee<$.length;Ee++){let Q=$.charCodeAt(Ee);Q<128?V[W++]=Q:Q<2048?(V[W++]=Q>>6|192,V[W++]=63&Q|128):55296==(64512&Q)&&Ee+1<$.length&&56320==(64512&$.charCodeAt(Ee+1))?(Q=65536+((1023&Q)<<10)+(1023&$.charCodeAt(++Ee)),V[W++]=Q>>18|240,V[W++]=Q>>12&63|128,V[W++]=Q>>6&63|128,V[W++]=63&Q|128):(V[W++]=Q>>12|224,V[W++]=Q>>6&63|128,V[W++]=63&Q|128)}return V},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,V){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let Q=0;Q<$.length;Q+=3){const He=$[Q],ht=Q+1<$.length,Jt=ht?$[Q+1]:0,yn=Q+2<$.length,Zt=yn?$[Q+2]:0;let Ht=(15&Jt)<<2|Zt>>6,cr=63&Zt;yn||(cr=64,ht||(Ht=64)),Ee.push(W[He>>2],W[(3&He)<<4|Jt>>4],W[Ht],W[cr])}return Ee.join("")},encodeString($,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa($):this.encodeByteArray(se($),V)},decodeString($,V){return this.HAS_NATIVE_SUPPORT&&!V?atob($):function($){const V=[];let W=0,Ee=0;for(;W<$.length;){const Q=$[W++];if(Q<128)V[Ee++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const He=$[W++];V[Ee++]=String.fromCharCode((31&Q)<<6|63&He)}else if(Q>239&&Q<365){const yn=((7&Q)<<18|(63&$[W++])<<12|(63&$[W++])<<6|63&$[W++])-65536;V[Ee++]=String.fromCharCode(55296+(yn>>10)),V[Ee++]=String.fromCharCode(56320+(1023&yn))}else{const He=$[W++],ht=$[W++];V[Ee++]=String.fromCharCode((15&Q)<<12|(63&He)<<6|63&ht)}}return V.join("")}(this.decodeStringToByteArray($,V))},decodeStringToByteArray($,V){this.init_();const W=V?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let Q=0;Q<$.length;){const He=W[$.charAt(Q++)],Jt=Q<$.length?W[$.charAt(Q)]:0;++Q;const Zt=Q<$.length?W[$.charAt(Q)]:64;++Q;const $e=Q<$.length?W[$.charAt(Q)]:64;if(++Q,null==He||null==Jt||null==Zt||null==$e)throw Error();Ee.push(He<<2|Jt>>4),64!==Zt&&(Ee.push(Jt<<4&240|Zt>>2),64!==$e&&Ee.push(Zt<<6&192|$e))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},he=function($){return function($){const V=se($);return de.encodeByteArray(V,!0)}($).replace(/\./g,"")},fe=function($){try{return de.decodeString($,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function j($,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return V}for(const W in V)!V.hasOwnProperty(W)||!K(W)||($[W]=j($[W],V[W]));return $}function K($){return"__proto__"!==$}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function nt(){return"object"==typeof self&&self.self===self}function me(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ot(){const $=Le();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function De(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function je(){return new Promise(($,V)=>{try{let W=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(Ee);Q.onsuccess=()=>{Q.result.close(),W||self.indexedDB.deleteDatabase(Ee),$(!0)},Q.onupgradeneeded=()=>{W=!1},Q.onerror=()=>{var He;V((null===(He=Q.error)||void 0===He?void 0:He.message)||"")}}catch(W){V(W)}})}function U(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function ge(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=$&&fe($[1]);return V&&JSON.parse(V)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},mt=()=>{var $;return null===($=te())||void 0===$?void 0:$.config},Xt=$=>{var V;return null===(V=te())||void 0===V?void 0:V[`_${$}`]};class Gt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,W)=>{this.resolve=V,this.reject=W})}wrapCallback(V){return(W,Ee)=>{W?this.reject(W):this.resolve(Ee),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(W):V(W,Ee))}}}function Ze($,V){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=V||"demo-project",Q=$.iat||0,He=$.sub||$.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:Q,exp:Q+3600,auth_time:Q,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},$);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(ht)),""].join(".")}class wn extends Error{constructor(V,W,Ee){super(W),this.code=V,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}}class Qt{constructor(V,W,Ee){this.service=V,this.serviceName=W,this.errors=Ee}create(V,...W){const Ee=W[0]||{},Q=`${this.service}/${V}`,He=this.errors[V],ht=He?function en($,V){return $.replace(Fr,(W,Ee)=>{const Q=V[Ee];return null!=Q?String(Q):`<${Ee}?>`})}(He,Ee):"Error";return new wn(Q,`${this.serviceName}: ${ht} (${Q}).`,Ee)}}const Fr=/\{\$([^}]+)}/g;function Ii($,V){return Object.prototype.hasOwnProperty.call($,V)}function si($){for(const V in $)if(Object.prototype.hasOwnProperty.call($,V))return!1;return!0}function Ke($,V){if($===V)return!0;const W=Object.keys($),Ee=Object.keys(V);for(const Q of W){if(!Ee.includes(Q))return!1;const He=$[Q],ht=V[Q];if(Mr(He)&&Mr(ht)){if(!Ke(He,ht))return!1}else if(He!==ht)return!1}for(const Q of Ee)if(!W.includes(Q))return!1;return!0}function Mr($){return null!==$&&"object"==typeof $}function tr($){const V=[];for(const[W,Ee]of Object.entries($))Array.isArray(Ee)?Ee.forEach(Q=>{V.push(encodeURIComponent(W)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(W)+"="+encodeURIComponent(Ee));return V.length?"&"+V.join("&"):""}function oi($){const V={};return $.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[Q,He]=Ee.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(He)}}),V}function Pi($){const V=$.indexOf("?");if(!V)return"";const W=$.indexOf("#",V);return $.substring(V,W>0?W:void 0)}function Gn($,V){const W=new _n($,V);return W.subscribe.bind(W)}class _n{constructor(V,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{V(this)}).catch(Ee=>{this.error(Ee)})}next(V){this.forEachObserver(W=>{W.next(V)})}error(V){this.forEachObserver(W=>{W.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,W,Ee){let Q;if(void 0===V&&void 0===W&&void 0===Ee)throw new Error("Missing Observer.");Q=function ut($,V){if("object"!=typeof $||null===$)return!1;for(const W of V)if(W in $&&"function"==typeof $[W])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:W,complete:Ee},void 0===Q.next&&(Q.next=an),void 0===Q.error&&(Q.error=an),void 0===Q.complete&&(Q.complete=an);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),He}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,V)}sendOne(V,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{W(this.observers[V])}catch(Ee){typeof console<"u"&&console.error&&console.error(Ee)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function an(){}function et($,V=1e3,W=2){const Ee=V*Math.pow(W,$),Q=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+Q)}function Ut($){return $&&$._delegate?$._delegate:$}},2049:(dt,Ae,k)=>{var d=k(4650);let ee=null;function R(){return ee}const ae=new d.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function fe(){return(0,d.LFG)(j)}()},providedIn:"platform"}),n})();const B=new d.OlP("Location Initialized");let j=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){K()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){K()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Le(){return new j((0,d.LFG)(ae))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Xe)},providedIn:"root"}),n})();const pe=new d.OlP("appBaseHref");let Xe=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+nt(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+nt(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(pe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ot=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+nt(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+nt(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(pe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(Be(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=nt,n.joinWithSlash=xe,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(d.LFG(me))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return new Me((0,d.LFG)(me))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}const je={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var U=(()=>((U=U||{})[U.Decimal=0]="Decimal",U[U.Percent=1]="Percent",U[U.Currency=2]="Currency",U[U.Scientific=3]="Scientific",U))(),te=(()=>((te=te||{})[te.Decimal=0]="Decimal",te[te.Group=1]="Group",te[te.List=2]="List",te[te.PercentSign=3]="PercentSign",te[te.PlusSign=4]="PlusSign",te[te.MinusSign=5]="MinusSign",te[te.Exponential=6]="Exponential",te[te.SuperscriptingExponent=7]="SuperscriptingExponent",te[te.PerMille=8]="PerMille",te[te.Infinity=9]="Infinity",te[te.NaN=10]="NaN",te[te.TimeSeparator=11]="TimeSeparator",te[te.CurrencyDecimal=12]="CurrencyDecimal",te[te.CurrencyGroup=13]="CurrencyGroup",te))();function Ft(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===te.CurrencyDecimal)return t[d.wAp.NumberSymbols][te.Decimal];if(e===te.CurrencyGroup)return t[d.wAp.NumberSymbols][te.Group]}return r}const yn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Es(n,e,t,r,i){const c=function Cn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],u=r[1],c=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],p=c[0],_=c[1]||"";t.posPre=p.substring(0,p.indexOf("#"));for(let T=0;T<_.length;T++){const M=_.charAt(T);"0"===M?t.minFrac=t.maxFrac=T+1:"#"===M?t.maxFrac=T+1:t.posSuf+=M}const b=p.split(",");if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,u){const T=i.length-t.posPre.length-t.posSuf.length,M=u.indexOf("#");t.negPre=u.substring(0,M).replace(/'/g,""),t.negSuf=u.slice(M+T).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function fn(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,U.Currency),Ft(e,te.MinusSign));return c.minFrac=function oi(n){let e;const t=je[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),c.maxFrac=c.minFrac,function En(n,e,t,r,i,u,c=!1){let p="",_=!1;if(isFinite(n)){let b=function su(n){let r,i,u,c,p,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(i<0&&(i=u),i+=+e.slice(u+1),e=e.substring(0,u)):i<0&&(i=e.length),u=0;"0"===e.charAt(u);u++);if(u===(p=e.length))r=[0],i=1;else{for(p--;"0"===e.charAt(p);)p--;for(i-=u,r=[],c=0;u<=p;u++,c++)r[c]=Number(e.charAt(u))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);c&&(b=function qs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let T=e.minInt,M=e.minFrac,L=e.maxFrac;if(u){const at=u.match(yn);if(null===at)throw new Error(`${u} is not a valid digit info`);const gt=at[1],ct=at[3],St=at[5];null!=gt&&(T=zn(gt)),null!=ct&&(M=zn(ct)),null!=St?L=zn(St):null!=ct&&M>L&&(L=M)}!function Oi(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const u=Math.min(Math.max(e,i),t);let c=u+n.integerLen,p=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let M=c;M<r.length;M++)r[M]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,c=u+1),r[0]=0;for(let M=1;M<c;M++)r[M]=0}if(p>=5)if(c-1<0){for(let M=0;M>c;M--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;i<Math.max(0,u);i++)r.push(0);let _=0!==u;const b=e+n.integerLen,T=r.reduceRight(function(M,L,G,Z){return Z[G]=(L+=M)<10?L:L-10,_&&(0===Z[G]&&G>=b?Z.pop():_=!1),L>=10?1:0},0);T&&(r.unshift(T),n.integerLen++)}(b,M,L);let G=b.digits,Z=b.integerLen;const ue=b.exponent;let _e=[];for(_=G.every(at=>!at);Z<T;Z++)G.unshift(0);for(;Z<0;Z++)G.unshift(0);Z>0?_e=G.splice(Z,G.length):(_e=G,G=[0]);const Ye=[];for(G.length>=e.lgSize&&Ye.unshift(G.splice(-e.lgSize,G.length).join(""));G.length>e.gSize;)Ye.unshift(G.splice(-e.gSize,G.length).join(""));G.length&&Ye.unshift(G.join("")),p=Ye.join(Ft(t,r)),_e.length&&(p+=Ft(t,i)+_e.join("")),ue&&(p+=Ft(t,te.Exponential)+"+"+ue)}else p=Ft(t,te.Infinity);return p=n<0&&!_?e.negPre+p+e.negSuf:e.posPre+p+e.posSuf,p}(n,c,e,te.CurrencyGroup,te.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}function zn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class pa{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new pa(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),Ds(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ds(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ds(n,e){n.context.$implicit=e.item}let Ln=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ml,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){dr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){dr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ml{constructor(){this.$implicit=null,this.ngIf=null}}function dr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Ss=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",u,c){if(!function ma(n){return!(null==n||""===n||n!=n)}(t))return null;c=c||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let p=r||this._defaultCurrencyCode;"code"!==i&&(p="symbol"===i||"symbol-narrow"===i?function vs(n,e,t="en"){const r=function Zr(n){return(0,d.cg1)(n)[d.wAp.Currencies]}(t)[n]||je[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(p,"symbol"===i?"wide":"narrow",c):i);try{return Es(function lu(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),c,p,r,u)}catch(_){throw function ir(n,e){return new d.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(d.EJc,16))},n.\u0275pipe=d.Yjl({name:"currency",type:n,pure:!0,standalone:!0}),n})();let Co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function br(n){return"server"===n}let cu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Qh((0,d.LFG)(ae),window)}),n})();class Qh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Br(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ui(this.window.history)||ui(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ui(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ks extends class rd extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new Ks)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Du(){return Ys=Ys||document.querySelector("base"),Ys?Ys.getAttribute("href"):null}();return null==t?null:function Jr(n){sr=sr||document.createElement("a"),sr.setAttribute("href",n);const e=sr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ou(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let sr,Ys=null;const bn=new d.OlP("TRANSITION_ID"),zl=[{provide:d.ip1,useFactory:function id(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=R(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[bn,ae,d.zs3],multi:!0}];let Wl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Cu=new d.OlP("EventManagerPlugins");let sd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cu),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Tu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=R().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Qs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Mo=(()=>{class n extends Qs{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(od),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(od))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function od(n){R().remove(n)}const xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ad=/%COMP%/g;function Mu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Mu(n,i,t):(i=i.replace(ad,n),t.push(i))}return t}function ud(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Xs=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new No(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ld(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new cd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Mu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sd),d.LFG(Mo),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class No{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(xo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Da(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Da(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=xo[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=xo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ud(r)):this.eventManager.addEventListener(e,t,ud(r))}}function Da(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ld extends No{constructor(e,t,r,i){super(e),this.component=r;const u=Mu(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Rn(n){return"_ngcontent-%COMP%".replace(ad,n)}(i+"-"+r.id),this.hostAttr=function Au(n){return"_nghost-%COMP%".replace(ad,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class cd extends No{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Mu(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let hr=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ca=["alt","control","meta","shift"],Ta={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Li={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sa=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),c="code."),Ca.forEach(b=>{const T=r.indexOf(b);T>-1&&(r.splice(T,1),c+=b+".")}),c+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=Ta[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ca.forEach(c=>{c!==i&&(0,Li[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ru=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Nu(){Ks.makeCurrent()},multi:!0},{provide:ae,useFactory:function Ma(){return(0,d.RDi)(document),document},deps:[]}]),xs=new d.OlP(""),hd=[{provide:d.rWj,useClass:class Xh{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Ns=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function to(){return new d.qLn},deps:[]},{provide:Cu,useClass:hr,multi:!0,deps:[ae,d.R0b,d.Lbi]},{provide:Cu,useClass:Sa,multi:!0,deps:[ae]},{provide:Xs,useClass:Xs,deps:[sd,Mo,d.AFp]},{provide:d.FYo,useExisting:Xs},{provide:Qs,useExisting:Mo},{provide:Mo,useClass:Mo,deps:[ae]},{provide:sd,useClass:sd,deps:[Cu,d.R0b]},{provide:class So{},useClass:Wl,deps:[]},[]];let Ou=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:bn,useExisting:d.AFp},zl]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xs,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Ns,...hd],imports:[Co,d.hGG]}),n})(),ts=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Po(){return new ts((0,d.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Ra=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(ug),r},providedIn:"root"}),n})(),ug=(()=>{class n extends Ra{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ag(n){return new ug(n.get(ae))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var ei=k(2011),rn=k(8996),Vo=k(7669);function rt(...n){const e=(0,Vo.yG)(n);return(0,rn.D)(n,e)}var dn=k(7579);class On extends dn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const rs=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ir=k(9751);const{isArray:Uu}=Array,{getPrototypeOf:lg,prototype:Ql,keys:Bu}=Object;function so(n){if(1===n.length){const e=n[0];if(Uu(e))return{args:e,keys:null};if(function ju(n){return n&&"object"==typeof n&&lg(n)===Ql}(e)){const t=Bu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var pr=k(4671),bt=k(4004);const{isArray:Rs}=Array;function Uo(n){return(0,bt.U)(e=>function $u(n,e){return Rs(e)?n(...e):n(e)}(n,e))}function Hu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var or=k(5403),Oa=k(9672);function nf(...n){const e=(0,Vo.yG)(n),t=(0,Vo.jO)(n),{args:r,keys:i}=so(n);if(0===r.length)return(0,rn.D)([],e);const u=new Ir.y(function gd(n,e,t=pr.y){return r=>{rf(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)rf(e,()=>{const b=(0,rn.D)(n[_],e);let T=!1;b.subscribe((0,or.x)(r,M=>{u[_]=M,T||(T=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Hu(i,c):pr.y));return t?u.pipe(Uo(t)):u}function rf(n,e,t){n?(0,Oa.f)(t,n,e):e()}var is=k(8189);function oo(...n){return function Bo(){return(0,is.J)(1)}()((0,rn.D)(n,(0,Vo.yG)(n)))}var ti=k(8421);function Gu(n){return new Ir.y(e=>{(0,ti.Xf)(n()).subscribe(e)})}var qu=k(9635),Si=k(576);function ao(n,e){const t=(0,Si.m)(n)?n:()=>n,r=i=>i.error(t());return new Ir.y(e?i=>e.schedule(r,0,i):r)}var Nr=k(515),md=k(727),Un=k(4482);function Vi(){return(0,Un.e)((n,e)=>{let t=null;n._refCount++;const r=(0,or.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Jl extends Ir.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Un.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new md.w0;const t=this.getSubject();e.add(this.source.subscribe((0,or.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=md.w0.EMPTY)}return e}refCount(){return Vi()(this)}}function qt(n,e){return(0,Un.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,or.x)(r,_=>{i?.unsubscribe();let b=0;const T=u++;(0,ti.Xf)(n(_,T)).subscribe(i=(0,or.x)(r,M=>r.next(e?e(_,M,T,b++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}function ka(n){return n<=0?()=>Nr.E:(0,Un.e)((e,t)=>{let r=0;e.subscribe((0,or.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function D(...n){const e=(0,Vo.yG)(n);return(0,Un.e)((t,r)=>{(e?oo(n,t,e):oo(n,t)).subscribe(r)})}function C(n,e){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,or.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var x=k(5577);function F(n){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Y(n=oe){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function oe(){return new rs}function Ie(n,e){const t=arguments.length>=2;return r=>r.pipe(n?C((i,u)=>n(i,u,r)):pr.y,ka(1),t?F(e):Y(()=>new rs))}function Ue(n,e){return(0,Si.m)(e)?(0,x.z)(n,e,1):(0,x.z)(n,1)}var Qe=k(8505);function ft(n){return(0,Un.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,or.x)(t,void 0,void 0,c=>{u=(0,ti.Xf)(n(c,ft(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Lt(n,e,t,r,i){return(u,c)=>{let p=t,_=e,b=0;u.subscribe((0,or.x)(c,T=>{const M=b++;_=p?n(_,T,M):(p=!0,T),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function lt(n,e){return(0,Un.e)(Lt(n,e,arguments.length>=2,!0))}function In(n){return n<=0?()=>Nr.E:(0,Un.e)((e,t)=>{let r=[];e.subscribe((0,or.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?C((i,u)=>n(i,u,r)):pr.y,In(1),t?F(e):Y(()=>new rs))}function ss(n){return(0,Un.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Rt="primary",ci=Symbol("RouteTitle");class uo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ai(n){return new uo(n)}function lo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function os(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!cg(n[i],e[i]))return!1;return!0}function cg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function dg(n){return Array.prototype.concat.apply([],n)}function sf(n){return n.length>0?n[n.length-1]:null}function Zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ho(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,rn.D)(Promise.resolve(n)):rt(n)}const hg={exact:function uf(n,e,t){if(!Go(n.segments,e.segments)||!Ed(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!uf(n.children[r],e.children[r],t))return!1;return!0},subset:wd},Hy={exact:function Gy(n,e){return os(n,e)},subset:function zu(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cg(n[t],e[t]))},ignored:()=>!0};function vd(n,e,t){return hg[t.paths](n.root,e.root,t.matrixParams)&&Hy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function wd(n,e,t){return Fa(n,e,e.segments,t)}function Fa(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Go(i,t)||e.hasChildren()||!Ed(i,t,r))}if(n.segments.length===t.length){if(!Go(n.segments,t)||!Ed(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!wd(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Go(n.segments,i)&&Ed(n.segments,i,r)&&n.children[Rt])&&Fa(n.children[Rt],e,u,r)}}function Ed(n,e,t){return e.every((r,i)=>Hy[t](n[i].parameters,r.parameters))}class La{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ai(this.queryParams)),this._queryParamMap}toString(){return qy.serialize(this)}}class Wt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Zn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wu(this)}}class co{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ai(this.parameters)),this._parameterMap}toString(){return pg(this)}}function Go(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let cf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new as},providedIn:"root"}),n})();class as{parse(e){const t=new Id(e);return new La(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Xl(e.root,!0)}`,r=function Wy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${bd(t)}=${bd(i)}`).join("&"):`${bd(t)}=${bd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function us(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qy=new as;function Wu(n){return n.segments.map(e=>pg(e)).join("/")}function Xl(n,e){if(!n.hasChildren())return Wu(n);if(e){const t=n.children[Rt]?Xl(n.children[Rt],!1):"",r=[];return Zn(n.children,(i,u)=>{u!==Rt&&r.push(`${u}:${Xl(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function fg(n,e){let t=[];return Zn(n.children,(r,i)=>{i===Rt&&(t=t.concat(e(r,i)))}),Zn(n.children,(r,i)=>{i!==Rt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Rt?[Xl(n.children[Rt],!1)]:[`${i}:${Xl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${Wu(n)}/${t[0]}`:`${Wu(n)}/(${t.join("//")})`}}function df(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bd(n){return df(n).replace(/%3B/gi,";")}function qo(n){return df(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ec(n){return decodeURIComponent(n)}function hf(n){return ec(n.replace(/\+/g,"%20"))}function pg(n){return`${qo(n.path)}${function zy(n){return Object.keys(n).map(e=>`;${qo(e)}=${qo(n[e])}`).join("")}(n.parameters)}`}const Zy=/^[^\/()?;=#]+/;function tc(n){const e=n.match(Zy);return e?e[0]:""}const gg=/^[^=?&#]+/,pw=/^[^&#]+/;class Id{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new Wt(e,t)),r}parseSegment(){const e=tc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new co(ec(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=tc(this.remaining);i&&(r=i,this.capture(r))}e[ec(t)]=ec(r)}parseQueryParam(e){const t=function Ky(n){const e=n.match(gg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Va(n){const e=n.match(pw);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=hf(t),u=hf(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Rt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Rt]:new Wt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function ls(n){return n.segments.length>0?new Wt([],{[Rt]:n}):n}function Os(n){const e={};for(const r of Object.keys(n.children)){const u=Os(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function mg(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Wt(n.segments.concat(e.segments),e.children)}return n}(new Wt(n.segments,e))}function ks(n){return n instanceof La}function ff(n,e,t,r,i){if(0===t.length)return nc(e.root,e.root,e.root,r,i);const u=function vg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _g(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Zn(u.outlets,(_,b)=>{p[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new _g(t,e,r)}(t);return u.toRoot()?nc(e.root,e.root,new Wt([],{}),r,i):function c(_){const b=function wg(n,e,t,r){if(n.isAbsolute)return new Ua(e.root,!0,0);if(-1===r)return new Ua(t,t===e.root,0);return function rc(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Ua(r,!1,i-u)}(t,r+(ho(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),T=b.processChildren?ic(b.segmentGroup,b.index,u.commands):Ba(b.segmentGroup,b.index,u.commands);return nc(e.root,b.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function ho(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Cd(n){return"object"==typeof n&&null!=n&&n.outlets}function nc(n,e,t,r,i){let c,u={};r&&Zn(r,(_,b)=>{u[b]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),c=n===e?t:pf(n,e,t);const p=ls(Os(c));return new La(p,u,i)}function pf(n,e,t){const r={};return Zn(n.children,(i,u)=>{r[u]=i===e?t:pf(i,e,t)}),new Wt(n.segments,r)}class _g{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ho(r[0]))throw new d.vHH(4003,!1);const i=r.find(Cd);if(i&&i!==sf(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ua{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ba(n,e,t){if(n||(n=new Wt([],{})),0===n.segments.length&&n.hasChildren())return ic(n,e,t);const r=function Kn(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Cd(p))break;const _=`${p}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!mf(_,b,c))return u;r+=2}else{if(!mf(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Wt(n.segments.slice(0,r.pathIndex),{});return u.children[Rt]=new Wt(n.segments.slice(r.pathIndex),n.children),ic(u,0,i)}return r.match&&0===i.length?new Wt(n.segments,{}):r.match&&!n.hasChildren()?ja(n,e,t):r.match?ic(n,0,i):ja(n,e,t)}function ic(n,e,t){if(0===t.length)return new Wt(n.segments,{});{const r=function Td(n){return Cd(n[0])?n[0].outlets:{[Rt]:n}}(t),i={};return Zn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Ba(n.children[c],e,u))}),Zn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Wt(n.segments,i)}}function ja(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Cd(u)){const _=Yy(u.outlets);return new Wt(r,_)}if(0===i&&ho(t[0])){r.push(new co(n.segments[e].path,Sd(t[0]))),i++;continue}const c=Cd(u)?u.outlets[Rt]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&ho(p)?(r.push(new co(c,Sd(p))),i+=2):(r.push(new co(c,{})),i++)}return new Wt(r,{})}function Yy(n){const e={};return Zn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ja(new Wt([],{}),0,t))}),e}function Sd(n){const e={};return Zn(n,(t,r)=>e[r]=`${t}`),e}function mf(n,e,t){return n==t.path&&os(e,t.parameters)}class Fs{constructor(e,t){this.id=e,this.url=t}}class yf extends Fs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $a extends Fs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ad extends Fs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Eg extends Fs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Md extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mw extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zu extends Fs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _f extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bg extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ig{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dg{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xd{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pd{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qy{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Rd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jr(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jr(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=zo(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zo(e,this._root).map(t=>t.value)}}function jr(n,e){if(n===e.value)return e;for(const t of e.children){const r=jr(n,t);if(r)return r}return null}function zo(n,e){if(n===e.value)return[e];for(const t of e.children){const r=zo(n,t);if(r.length)return r.unshift(e),r}return[]}class $r{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ku(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Yu extends Rd{constructor(e,t){super(e),this.snapshot=t,wf(this,e)}toString(){return this.snapshot.toString()}}function Ha(n,e){const t=function Jy(n,e){const c=new Qu([],{},{},"",{},Rt,e,null,n.root,-1,{});return new Od("",new $r(c,[]))}(n,e),r=new On([new co("",{})]),i=new On({}),u=new On({}),c=new On({}),p=new On(""),_=new Ui(r,i,c,p,u,Rt,e,t.root);return _.snapshot=t.root,new Yu(new $r(_,[]),t)}class Ui{constructor(e,t,r,i,u,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.pipe((0,bt.U)(b=>b[ci]))??rt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,bt.U)(e=>Ai(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,bt.U)(e=>Ai(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function di(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Qu{constructor(e,t,r,i,u,c,p,_,b,T,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.[ci],this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=T,this._correctedLastPathIndex=L??T,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ai(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ai(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Od extends Rd{constructor(e,t){super(t),this.url=e,wf(this,t)}toString(){return Tg(this._root)}}function wf(n,e){e.value._routerState=n,e.children.forEach(t=>wf(n,t))}function Tg(n){const e=n.children.length>0?` { ${n.children.map(Tg).join(", ")} } `:"";return`${n.value}${e}`}function oc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,os(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),os(e.params,t.params)||n.params.next(t.params),function yd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!os(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),os(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yn(n,e){const t=os(n.params,e.params)&&function lf(n,e){return Go(n,e)&&n.every((t,r)=>os(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Yn(n.parent,e.parent))}function Ga(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Xy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ga(n,r,i);return Ga(n,r)})}(n,e,t);return new $r(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Ga(n,p)),c}}const r=function fo(n){return new Ui(new On(n.url),new On(n.params),new On(n.queryParams),new On(n.fragment),new On(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ga(n,u));return new $r(r,i)}}const po="ngNavigationCancelingError";function bf(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ks(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kd(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function kd(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[po]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Sg(n){return ac(n)&&ks(n.url)}function ac(n){return n&&n[po]}class yw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new uc,this.attachRef=null}}let uc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new yw,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wo=!1;let If=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Wo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Wo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Wo);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Wo);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new y(t,p,i.injector);if(r&&function f(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(c);this.activated=i.createComponent(b,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uc),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class y{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ui?this.route:e===uc?this.childContexts:this.parent.get(e,t)}}let m=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[If],encapsulation:2}),n})();function w(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qn(n){const e=n.children&&n.children.map(Qn),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=m),t}function An(n){return n.outlet||Rt}function Fd(n,e){const t=n.filter(r=>An(r)===e);return t.push(...n.filter(r=>An(r)!==e)),t}function lc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class e_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),oc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ku(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Zn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ku(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ku(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ku(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Pd(u.value.snapshot))}),e.children.length&&this.forwardEvent(new xd(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(oc(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),oc(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=lc(i.snapshot),_=p?.get(d._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=p,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ag{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dc{constructor(e,t){this.component=e,this.route=t}}function t_(n,e,t){const r=n._root;return qa(r,e?e._root:null,t,[r.value])}function Zo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function qa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ku(e);return n.children.forEach(c=>{(function Df(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function Ld(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Go(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Go(n.url,e.url)||!os(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yn(n,e)||!os(n.queryParams,e.queryParams);default:return!Yn(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Ag(r)):(u.data=c.data,u._resolvedData=c._resolvedData),qa(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new dc(p.outlet.component,c))}else c&&Ju(e,p,i),i.canActivateChecks.push(new Ag(r)),qa(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Zn(u,(c,p)=>Ju(c,t.getContext(p),i)),i}function Ju(n,e,t){const r=Ku(n),i=n.value;Zn(r,(u,c)=>{Ju(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new dc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Vd(n){return"function"==typeof n}function s_(n){return n instanceof rs||"EmptyError"===n?.name}const Mg=Symbol("INITIAL_VALUE");function Ud(){return qt(n=>nf(n.map(e=>e.pipe(ka(1),D(Mg)))).pipe((0,bt.U)(e=>{for(const t of e)if(!0!==t){if(t===Mg)return Mg;if(!1===t||t instanceof La)return t}return!0}),C(e=>e!==Mg),ka(1)))}function xg(n){return(0,qu.z)((0,Qe.b)(e=>{if(ks(e))throw bf(0,e)}),(0,bt.U)(e=>!0===e))}const Tf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ni(n,e,t,r,i){const u=hc(n,e,t);return u.matched?function ww(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?rt(i.map(c=>{const p=Zo(c,n);return Ho(function ZD(n){return n&&Vd(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(Ud(),xg()):rt(!0)}(r=w(e,r),e,t).pipe((0,bt.U)(c=>!0===c?u:{...Tf})):rt(u)}function hc(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Tf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||lo)(t,n,e);if(!i)return{...Tf};const u={};Zn(i.posParams,(p,_)=>{u[_]=p.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Sf(n,e,t,r,i="corrected"){if(t.length>0&&function Ew(n,e,t){return t.some(r=>Af(n,e,r)&&An(r)!==Rt)}(n,t,r)){const c=new Wt(e,function nC(n,e,t,r){const i={};i[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&An(u)!==Rt){const c=new Wt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[An(u)]=c}return i}(n,e,r,new Wt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function rC(n,e,t){return t.some(r=>Af(n,e,r))}(n,t,r)){const c=new Wt(n.segments,function tC(n,e,t,r,i,u){const c={};for(const p of r)if(Af(n,t,p)&&!i[An(p)]){const _=new Wt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[An(p)]=_}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Wt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Af(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function bw(n,e,t,r){return!!(An(n)===r||r!==Rt&&Af(e,t,n))&&("**"===n.path||hc(e,n,t).matched)}function a_(n,e,t){return 0===e.length&&!n.children[t]}const Ng=!1;class Pg{constructor(e){this.segmentGroup=e||null}}class Iw{constructor(e){this.urlTree=e}}function Mf(n){return ao(new Pg(n))}function Dw(n){return ao(new Iw(n))}class sC{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Sf(this.urlTree.root,[],[],this.config).segmentGroup,t=new Wt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Rt).pipe((0,bt.U)(u=>this.createUrlTree(Os(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ft(u=>{if(u instanceof Iw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Pg?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Rt).pipe((0,bt.U)(i=>this.createUrlTree(Os(i),e.queryParams,e.fragment))).pipe(ft(i=>{throw i instanceof Pg?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Ng)}createUrlTree(e,t,r){const i=ls(e);return new La(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,bt.U)(u=>new Wt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,rn.D)(i).pipe(Ue(u=>{const c=r.children[u],p=Fd(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,bt.U)(_=>({segment:_,outlet:u})))}),lt((u,c)=>(u[c.outlet]=c.segment,u),{}),gr())}expandSegment(e,t,r,i,u,c){return(0,rn.D)(r).pipe(Ue(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(ft(b=>{if(b instanceof Pg)return rt(null);throw b}))),Ie(p=>!!p),ft((p,_)=>{if(s_(p))return a_(t,i,u)?rt(new Wt([],{})):Mf(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return bw(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Mf(t):Mf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Dw(u):this.lineralizeSegments(r,u).pipe((0,x.z)(c=>{const p=new Wt(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:_,remainingSegments:b,positionalParamSegments:T}=hc(t,i,u);if(!p)return Mf(t);const M=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?Dw(M):this.lineralizeSegments(i,M).pipe((0,x.z)(L=>this.expandSegment(e,t,r,L.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=w(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,bt.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Wt(i,{})))):rt(new Wt(i,{}))):ni(t,r,i,e).pipe(qt(({matched:c,consumedSegments:p,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,x.z)(T=>{const M=T.injector??e,L=T.routes,{segmentGroup:G,slicedSegments:Z}=Sf(t,p,_,L),ue=new Wt(G.segments,G.children);if(0===Z.length&&ue.hasChildren())return this.expandChildren(M,L,ue).pipe((0,bt.U)(gt=>new Wt(p,gt)));if(0===L.length&&0===Z.length)return rt(new Wt(p,{}));const _e=An(r)===u;return this.expandSegment(M,ue,L,Z,_e?Rt:u,!0).pipe((0,bt.U)(at=>new Wt(p.concat(at.segments),at.children)))})):Mf(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Mi(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?rt(!0):rt(i.map(c=>{const p=Zo(c,n);return Ho(function zD(n){return n&&Vd(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(Ud(),xg())}(e,t,r).pipe((0,x.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Qe.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function za(n){return ao(kd(Ng,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[Rt])return ao(new d.vHH(4e3,Ng));i=i.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new La(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Zn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Zn(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new Wt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Ng);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Cw{}class l_{constructor(e,t,r,i,u,c,p,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=p,this.urlSerializer=_}recognize(){const e=Sf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Rt).pipe((0,bt.U)(t=>{if(null===t)return null;const r=new Qu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new $r(r,t),u=new Od(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=sc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(Ue(i=>{const u=r.children[i],c=Fd(t,i);return this.processSegmentGroup(e,c,u,i)}),lt((i,u)=>i&&u?(i.push(...u),i):null),function jo(n,e=!1){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,or.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),F(null),gr(),(0,bt.U)(i=>{if(null===i)return null;const u=Sw(i);return function c_(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,rn.D)(t).pipe(Ue(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),Ie(c=>!!c),ft(c=>{if(s_(c))return a_(r,i,u)?rt([]):rt(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!bw(t,r,i,u))return rt(null);let c;if("**"===t.path){const p=i.length>0?sf(i).parameters:{},_=Mw(r)+i.length;c=rt({snapshot:new Qu(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Og(t),An(t),t.component??t._loadedComponent??null,t,Aw(r),_,d_(t),_),consumedSegments:[],remainingSegments:[]})}else c=ni(r,t,i,e).pipe((0,bt.U)(({matched:p,consumedSegments:_,remainingSegments:b,parameters:T})=>{if(!p)return null;const M=Mw(r)+_.length;return{snapshot:new Qu(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Og(t),An(t),t.component??t._loadedComponent??null,t,Aw(r),M,d_(t),M),consumedSegments:_,remainingSegments:b}}));return c.pipe(qt(p=>{if(null===p)return rt(null);const{snapshot:_,consumedSegments:b,remainingSegments:T}=p;e=t._injector??e;const M=t._loadedInjector??e,L=function oC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:G,slicedSegments:Z}=Sf(r,b,T,L.filter(_e=>void 0===_e.redirectTo),this.relativeLinkResolution);if(0===Z.length&&G.hasChildren())return this.processChildren(M,L,G).pipe((0,bt.U)(_e=>null===_e?null:[new $r(_,_e)]));if(0===L.length&&0===Z.length)return rt([new $r(_,[])]);const ue=An(t)===u;return this.processSegment(M,L,G,Z,ue?Rt:u).pipe((0,bt.U)(_e=>null===_e?null:[new $r(_,_e)]))}))}}function Tw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Sw(n){const e=[],t=new Set;for(const r of n){if(!Tw(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Sw(r.children);e.push(new $r(r.value,i))}return e.filter(r=>!t.has(r))}function Aw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Mw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Og(n){return n.data||{}}function d_(n){return n.resolve||{}}function Nw(n){return"string"==typeof n.title||null===n.title}function p_(n){return qt(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,bt.U)(()=>e)):rt(e)})}let Pw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===Rt);return r}getResolvedTitleForRoute(t){return t.data[ci]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Rw)},providedIn:"root"}),n})(),Rw=(()=>{class n extends Pw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ts))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uC{}class g_ extends class Ow{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const $d=new d.OlP("",{providedIn:"root",factory:()=>({})}),m_=new d.OlP("ROUTES");let kg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ho(t.loadComponent()).pipe((0,Qe.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),ss(()=>{this.componentLoaders.delete(t)})),i=new Jl(r,()=>new dn.x).pipe(Vi());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,bt.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b,T=!1;Array.isArray(p)?b=p:(_=p.create(t).injector,b=dg(_.get(m_,[],d.XFs.Self|d.XFs.Optional)));return{routes:b.map(Qn),injector:_}}),ss(()=>{this.childrenLoaders.delete(r)})),c=new Jl(u,()=>new dn.x).pipe(Vi());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Ho(t()).pipe((0,x.z)(r=>r instanceof d.YKP||Array.isArray(r)?rt(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Lw{}class fc{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Vw(n){throw n}function lC(n,e,t){return e.parse("/")}const RM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function y_(){const n=(0,d.f3M)(cf),e=(0,d.f3M)(uc),t=(0,d.f3M)(Me),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),u=(0,d.f3M)(m_,{optional:!0})??[],c=(0,d.f3M)($d,{optional:!0})??{},p=(0,d.f3M)(Rw),_=(0,d.f3M)(Pw,{optional:!0}),b=(0,d.f3M)(Lw,{optional:!0}),T=(0,d.f3M)(uC,{optional:!0}),M=new Dr(null,n,e,t,r,i,dg(u));return b&&(M.urlHandlingStrategy=b),T&&(M.routeReuseStrategy=T),M.titleStrategy=_??p,function cC(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let Dr=(()=>{class n{constructor(t,r,i,u,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dn.x,this.errorHandler=Vw,this.malformedUriErrorHandler=lC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>rt(void 0),this.urlHandlingStrategy=new fc,this.routeReuseStrategy=new g_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(kg),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new Dg(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new Ig(L)),this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const M=c.get(d.R0b);this.isNgZoneEnabled=M instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function fw(){return new La(new Wt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ha(this.currentUrlTree,this.rootComponentType),this.transitions=new On({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(C(i=>0!==i.id),(0,bt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),qt(i=>{let u=!1,c=!1;return rt(i).pipe((0,Qe.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),qt(p=>{const _=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Lg(p.source)&&(this.browserUrlTree=p.extractedUrl),rt(p).pipe(qt(M=>{const L=this.transitions.getValue();return r.next(new yf(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?Nr.E:Promise.resolve(M)}),function MM(n,e,t,r){return qt(i=>function iC(n,e,t,r,i){return new sC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,bt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qe.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},i.urlAfterRedirects=M.urlAfterRedirects}),function NM(n,e,t,r,i,u){return(0,x.z)(c=>function Ko(n,e,t,r,i,u,c="emptyOnly",p="legacy"){return new l_(n,e,t,r,i,c,p,u).recognize().pipe(qt(_=>null===_?function xM(n){return new Ir.y(e=>e.error(n))}(new Cw):rt(_)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,bt.U)(p=>({...c,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qe.b)(M=>{if(i.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(G,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new Md(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:Z,restoredState:ue,extras:_e}=p,Ye=new yf(L,this.serializeUrl(G),Z,ue);r.next(Ye);const at=Ha(G,this.rootComponentType).snapshot;return rt(i={...p,targetSnapshot:at,urlAfterRedirects:G,extras:{..._e,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),Nr.E}),(0,Qe.b)(p=>{const _=new mw(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,bt.U)(p=>i={...p,guards:t_(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function KD(n,e){return(0,x.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?rt({...t,guardsResult:!0}):function o_(n,e,t,r){return(0,rn.D)(n).pipe((0,x.z)(i=>function eC(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?rt(u.map(p=>{const _=lc(e)??i,b=Zo(p,_);return Ho(function WD(n){return n&&Vd(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):_.runInContext(()=>b(n,e,t,r))).pipe(Ie())})).pipe(Ud()):rt(!0)}(i.component,i.route,t,e,r)),Ie(i=>!0!==i,!0))}(c,r,i,n).pipe((0,x.z)(p=>p&&function r_(n){return"boolean"==typeof n}(p)?function YD(n,e,t,r){return(0,rn.D)(e).pipe(Ue(i=>oo(function JD(n,e){return null!==n&&e&&e(new Cg(n)),rt(!0)}(i.route.parent,r),function QD(n,e){return null!==n&&e&&e(new Nd(n)),rt(!0)}(i.route,r),function XD(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function n_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Gu(()=>rt(c.guards.map(_=>{const b=lc(c.node)??t,T=Zo(_,b);return Ho(function Cf(n){return n&&Vd(n.canActivateChild)}(T)?T.canActivateChild(r,n):b.runInContext(()=>T(r,n))).pipe(Ie())})).pipe(Ud())));return rt(u).pipe(Ud())}(n,i.path,t),function vw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(u=>Gu(()=>{const c=lc(e)??t,p=Zo(u,c);return Ho(function i_(n){return n&&Vd(n.canActivate)}(p)?p.canActivate(e,n):c.runInContext(()=>p(e,n))).pipe(Ie())}));return rt(i).pipe(Ud())}(n,i.route,t))),Ie(i=>!0!==i,!0))}(r,u,n,e):rt(p)),(0,bt.U)(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Qe.b)(p=>{if(i.guardsResult=p.guardsResult,ks(p.guardsResult))throw bf(0,p.guardsResult);const _=new Zu(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),C(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),p_(p=>{if(p.guards.canActivateChecks.length)return rt(p).pipe((0,Qe.b)(_=>{const b=new _f(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),qt(_=>{let b=!1;return rt(_).pipe(function jd(n,e){return(0,x.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);let u=0;return(0,rn.D)(i).pipe(Ue(c=>function h_(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!Nw(i)&&(u[ci]=i.title),function xw(n,e,t,r){const i=function aC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return rt({});const u={};return(0,rn.D)(i).pipe((0,x.z)(c=>function f_(n,e,t,r){const i=lc(e)??r,u=Zo(n,i);return Ho(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(Ie(),(0,Qe.b)(p=>{u[c]=p}))),In(1),function $o(n){return(0,bt.U)(()=>n)}(u),ft(c=>s_(c)?Nr.E:ao(c)))}(u,n,e,r).pipe((0,bt.U)(c=>(n._resolvedData=c,n.data=sc(n,t).resolve,i&&Nw(i)&&(n.data[ci]=i.title),null)))}(c.route,r,n,e)),(0,Qe.b)(()=>u++),In(1),(0,x.z)(c=>u===i.length?rt(t):Nr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qe.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Qe.b)(_=>{const b=new bg(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),p_(p=>{const _=b=>{const T=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Qe.b)(M=>{b.component=M}),(0,bt.U)(()=>{})));for(const M of b.children)T.push(..._(M));return T};return nf(_(p.targetSnapshot.root)).pipe(F(),ka(1))}),p_(()=>this.afterPreactivation()),(0,bt.U)(p=>{const _=function Ef(n,e,t){const r=Ga(n,e._root,t?t._root:void 0);return new Yu(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return i={...p,targetRouterState:_}}),(0,Qe.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,bt.U)(r=>(new e_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Qe.b)({next(){u=!0},complete(){u=!0}}),ss(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ft(p=>{if(c=!0,ac(p)){Sg(p)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Ad(i.id,this.serializeUrl(i.extractedUrl),p.message,p.cancellationCode);if(r.next(_),Sg(p)){const b=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Lg(i.source)};this.scheduleNavigation(b,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Eg(i.id,this.serializeUrl(i.extractedUrl),p,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(p))}catch(b){i.reject(b)}}return Nr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const p={...u};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Qn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,b=i||this.routerState.root,T=_?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),ff(b,this.currentUrlTree,t,M,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ks(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Uw(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...RM}:!1===r?{...Fg}:r,ks(t))return vd(this.currentUrlTree,t,i);const u=this.parseUrl(t);return vd(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $a(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let p,_,b;c?(p=c.resolve,_=c.reject,b=c.promise):b=new Promise((L,G)=>{p=L,_=G});const T=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),M=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:T,targetPageId:M,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:p,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new Ad(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return y_()},providedIn:"root"}),n})();function Lg(n){return"imperative"!==n}let Xu=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new dn.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Dr),d.Y36(Ui),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),pc=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new dn.x,this.subscription=t.events.subscribe(u=>{u instanceof $a&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){return!!(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Dr),d.Y36(Ui),d.Y36(me))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class Ug{}let Pf=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(C(t=>t instanceof $a),Ue(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,p=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,rn.D)(i).pipe((0,is.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const u=i.pipe((0,x.z)(c=>null===c?rt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,rn.D)([u,c]).pipe((0,is.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Dr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Ug),d.LFG(kg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const __=new d.OlP("");let v_=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $a&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Qy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function el(n,e){return{\u0275kind:n,\u0275providers:e}}function jg(n){return[{provide:m_,multi:!0,useValue:n}]}function E_(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Dr),i=n.get($w);1===n.get($g)&&r.initialNavigation(),n.get(Hw,null,d.XFs.Optional)?.setUpPreloading(),n.get(__,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const $w=new d.OlP("",{factory:()=>new dn.x}),$g=new d.OlP("",{providedIn:"root",factory:()=>1});const Hw=new d.OlP("");function Gw(n){return el(0,[{provide:Hw,useExisting:Pf},{provide:Ug,useExisting:n}])}const qw=new d.OlP("ROUTER_FORROOT_GUARD"),zw=[Me,{provide:cf,useClass:as},{provide:Dr,useFactory:y_},uc,{provide:Ui,useFactory:function w_(n){return n.routerState.root},deps:[Dr]},kg];function pC(){return new d.PXZ("Router",Dr)}let Ww=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[zw,[],jg(t),{provide:qw,useFactory:Kw,deps:[[Dr,new d.FiY,new d.tp0]]},{provide:$d,useValue:r||{}},r?.useHash?{provide:me,useClass:ot}:{provide:me,useClass:Xe},{provide:__,useFactory:()=>{const n=(0,d.f3M)(Dr),e=(0,d.f3M)(cu),t=(0,d.f3M)($d);return t.scrollOffset&&e.setOffset(t.scrollOffset),new v_(n,e,t)}},r?.preloadingStrategy?Gw(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:pC},r?.initialNavigation?Yw(r):[],[{provide:Qw,useFactory:E_},{provide:d.tb,multi:!0,useExisting:Qw}]]}}static forChild(t){return{ngModule:n,providers:[jg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qw,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[m]}),n})();function Kw(n){return"guarded"}function Yw(n){return["disabled"===n.initialNavigation?el(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Dr);return()=>{e.setUpLocationChangeListener()}}},{provide:$g,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?el(2,[{provide:$g,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(Dr),p=e.get($w);(function i(u){e.get(Dr).events.pipe(C(p=>p instanceof $a||p instanceof Ad||p instanceof Eg),(0,bt.U)(p=>p instanceof $a||p instanceof Ad&&(0===p.code||1===p.code)&&null),C(p=>null!==p),ka(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||p.closed?rt(void 0):p),c.initialNavigation()}))}}]).\u0275providers:[]]}const Qw=new d.OlP("");let b_=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),gc=(()=>{class n extends b_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Yo=new d.OlP("NgValueAccessor"),Jw={provide:Yo,useExisting:(0,d.Gpc)(()=>yc),multi:!0},vC=new d.OlP("CompositionEventMode");let yc=(()=>{class n extends b_{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mc(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(vC,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([Jw]),d.qOj]}),n})();function tl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function wC(n){return null!=n&&"number"==typeof n.length}const xi=new d.OlP("NgValidators"),_c=new d.OlP("NgAsyncValidators"),EC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rf{static min(e){return function bC(n){return e=>{if(tl(e.value)||tl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Xw(n){return e=>{if(tl(e.value)||tl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function vc(n){return tl(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function eE(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function C_(n){return tl(n.value)||EC.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Of(n){return e=>tl(e.value)||!wC(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function tE(n){return e=>wC(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function T_(n){if(!n)return Gg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(tl(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return S_(e)}static composeAsync(e){return zg(e)}}function Gg(n){return null}function nE(n){return null!=n}function rE(n){return(0,d.QGY)(n)?(0,rn.D)(n):n}function iE(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function sE(n,e){return e.map(t=>t(n))}function aE(n){return n.map(e=>function oE(n){return!n.validate}(e)?e:t=>e.validate(t))}function S_(n){if(!n)return null;const e=n.filter(nE);return 0==e.length?null:function(t){return iE(sE(t,e))}}function qg(n){return null!=n?S_(aE(n)):null}function zg(n){if(!n)return null;const e=n.filter(nE);return 0==e.length?null:function(t){return function _C(...n){const e=(0,Vo.jO)(n),{args:t,keys:r}=so(n),i=new Ir.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let _=c,b=c;for(let T=0;T<c;T++){let M=!1;(0,ti.Xf)(t[T]).subscribe((0,or.x)(u,L=>{M||(M=!0,b--),p[T]=L},()=>_--,void 0,()=>{(!_||!M)&&(b||u.next(r?Hu(r,p):p),u.complete())}))}});return e?i.pipe(Uo(e)):i}(sE(t,e).map(rE)).pipe((0,bt.U)(iE))}}function uE(n){return null!=n?zg(aE(n)):null}function Wg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lE(n){return n._rawValidators}function IC(n){return n._rawAsyncValidators}function nl(n){return n?Array.isArray(n)?n:[n]:[]}function kf(n,e){return Array.isArray(n)?n.includes(e):n===e}function A_(n,e){const t=nl(e);return nl(n).forEach(i=>{kf(t,i)||t.push(i)}),t}function Ff(n,e){return nl(e).filter(t=>!kf(n,t))}class Ls{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class hi extends Ls{get formDirective(){return null}get path(){return null}}class rl extends Ls{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Zg{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kg=(()=>{class n extends Zg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rl,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Lf=(()=>{class n extends Zg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(hi,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const Gd="VALID",Jg="INVALID",sl="PENDING",Xg="DISABLED";function gE(n){return(x_(n)?n.validators:n)||null}function TC(n){return Array.isArray(n)?qg(n):n||null}function mE(n,e){return(x_(e)?e.asyncValidators:n)||null}function SC(n){return Array.isArray(n)?uE(n):n||null}function x_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function AC(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function MC(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class N_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=TC(this._rawValidators),this._composedAsyncValidatorFn=SC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gd}get invalid(){return this.status===Jg}get pending(){return this.status==sl}get disabled(){return this.status===Xg}get enabled(){return this.status!==Xg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=TC(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=SC(e)}addValidators(e){this.setValidators(A_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(A_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ff(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ff(e,this._rawAsyncValidators))}hasValidator(e){return kf(this._rawValidators,e)}hasAsyncValidator(e){return kf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gd||this.status===sl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xg:Gd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sl,this._hasOwnPendingAsyncValidator=!0;const t=rE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Xg:this.errors?Jg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sl)?sl:this._anyControlsHaveStatus(Jg)?Jg:Gd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){x_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class em extends N_{constructor(e,t,r){super(gE(t),mE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){MC(this,0,e),Object.keys(e).forEach(r=>{AC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class _E extends em{}function zd(n,e){nm(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function NC(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&wE(n,e)})}(n,e),function PC(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function vE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&wE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ol(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Wd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),rm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function tm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function nm(n,e){const t=lE(n);null!==e.validator?n.setValidators(Wg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=IC(n);null!==e.asyncValidator?n.setAsyncValidators(Wg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();tm(e._rawValidators,i),tm(e._rawAsyncValidators,i)}function rm(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=lE(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=IC(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return tm(e._rawValidators,r),tm(e._rawAsyncValidators,r),t}function wE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function O_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function CE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Yd=class extends N_{constructor(e=null,t,r){super(gE(t),mE(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),x_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=CE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){O_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){O_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){CE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let um=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),V_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const U_=new d.OlP("NgModelWithFormControlWarning"),xE={provide:hi,useExisting:(0,d.Gpc)(()=>jf)};let jf=(()=>{class n extends hi{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return zd(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Wd(t.control||null,t,!1),function IE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function om(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Wd(r||null,t),(n=>n instanceof Yd)(i)&&(zd(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Uf(n,e){nm(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Zd(n,e){return rm(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nm(this.form,this),this._oldForm&&rm(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xi,10),d.Y36(_c,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([xE]),d.qOj,d.TTD]}),n})();const cm={provide:rl,useExisting:(0,d.Gpc)(()=>Qd)};let Qd=(()=>{class n extends rl{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Bf(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===yc?t=u:function bE(n){return Object.getPrototypeOf(n.constructor)===gc}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function sm(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function qd(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(hi,13),d.Y36(xi,10),d.Y36(_c,10),d.Y36(Yo,10),d.Y36(U_,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([cm]),d.qOj,d.TTD]}),n})();const dm={provide:Yo,useExisting:(0,d.Gpc)(()=>G_),multi:!0};function HC(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let G_=(()=>{class n extends gc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=HC(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function H_(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([dm]),d.qOj]}),n})(),q_=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(HC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(G_,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const PE={provide:Yo,useExisting:(0,d.Gpc)(()=>mo),multi:!0};function z_(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let mo=(()=>{class n extends gc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let p=0;p<c.length;p++){const b=this._getOptionValue(c[p].value);i.push(b)}}else{const c=r.options;for(let p=0;p<c.length;p++){const _=c[p];if(_.selected){const b=this._getOptionValue(_.value);i.push(b)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function RE(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([PE]),d.qOj]}),n})(),$f=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(z_(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(z_(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(mo,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ZC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[V_]}),n})(),jE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:U_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ZC]}),n})();class qf extends N_{constructor(e,t,r){super(gE(t),mE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){MC(this,0,e),e.forEach((r,i)=>{AC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function eh(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let $E=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return eh(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new em(i,u)}record(t,r=null){const i=this._reduceControls(t);return new _E(i,r)}control(t,r,i){let u={};return this.useNonNullable?(eh(r)?u=r:(u.validators=r,u.asyncValidators=i),new Yd(t,{...u,nonNullable:!0})):new Yd(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new qf(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Yd||t instanceof N_?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:jE}),n})();var Jo=k(4986),Cr=k(5813);function Hr(){return(0,Un.e)((n,e)=>{let t,r=!1;n.subscribe((0,or.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function pm(n,e){return n===e}k(9545);var it,K_=k(3942),ye=k(5861),Vs=k(9681),Wa=k(4859),cs=k(1877),Yt=k(2090),th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ji={},al=al||{},kt=th||self;function zf(){}function Wf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function nh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gm="closure_uid_"+(1e9*Math.random()>>>0),qE=0;function zE(n,e,t){return n.call.apply(n.bind,arguments)}function WE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function fi(n,e,t){return(fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zE:WE).apply(null,arguments)}function mm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Gr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function ul(){this.s=this.s,this.o=this.o}var Y_={};ul.prototype.s=!1,ul.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function GE(n){return Object.prototype.hasOwnProperty.call(n,gm)&&n[gm]||(n[gm]=++qE)}(this);delete Y_[n]}},ul.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ym=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Q_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Zf(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Wf(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function Pr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Pr.prototype.h=function(){this.defaultPrevented=!0};var J_=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",zf,e),kt.removeEventListener("test",zf,e)}catch{}return n}();function _m(n){return/^[\s\xa0]*$/.test(n)}var Kf=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function rh(n,e){return n<e?-1:n>e?1:0}function Yf(){var n=kt.navigator;return n&&(n=n.userAgent)?n:""}function _o(n){return-1!=Yf().indexOf(n)}function Qf(n){return Qf[" "](n),n}Qf[" "]=zf;var Jf,n,KE=_o("Opera"),ll=_o("Trident")||_o("MSIE"),X_=_o("Edge"),ev=X_||ll,tv=_o("Gecko")&&!(-1!=Yf().toLowerCase().indexOf("webkit")&&!_o("Edge"))&&!(_o("Trident")||_o("MSIE"))&&!_o("Edge"),YE=-1!=Yf().toLowerCase().indexOf("webkit")&&!_o("Edge");function nv(){var n=kt.document;return n?n.documentMode:void 0}e:{var rv="",iv=(n=Yf(),tv?/rv:([^\);]+)(\)|;)/.exec(n):X_?/Edge\/([\d\.]+)/.exec(n):ll?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):YE?/WebKit\/(\S+)/.exec(n):KE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iv&&(rv=iv?iv[1]:""),ll){var sv=nv();if(null!=sv&&sv>parseFloat(rv)){Jf=String(sv);break e}}Jf=rv}var QE={};var JE=kt.document&&ll&&(nv()||parseInt(Jf,10))||void 0;function ih(n,e){if(Pr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(tv){e:{try{Qf(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:XE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ih.X.h.call(this)}}Gr(ih,Pr);var XE={2:"touch",3:"pen",4:"mouse"};ih.prototype.h=function(){ih.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sh="closure_listenable_"+(1e6*Math.random()|0),eb=0;function tb(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++eb,this.ba=this.ea=!1}function uv(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function lv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nb(n){const e={};for(const t in n)e[t]=n[t];return e}const cv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<cv.length;u++)t=cv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ar(n){this.src=n,this.g={},this.h=0}function wm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=ym(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(uv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function dv(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}ar.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=dv(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new tb(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var hv="closure_lm_"+(1e6*Math.random()|0),Em={};function ib(n,e,t,r,i){if(r&&r.once)return Ic(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ib(n,e[u],t,r,i);return null}return t=Xf(t),n&&n[sh]?n.N(e,t,nh(r)?!!r.capture:!!r,i):fv(n,e,t,!1,r,i)}function fv(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=nh(i)?!!i.capture:!!i,p=bm(n);if(p||(n[hv]=p=new ar(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function sb(){const e=YC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)J_||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(gv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ic(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ic(n,e[u],t,r,i);return null}return t=Xf(t),n&&n[sh]?n.O(e,t,nh(r)?!!r.capture:!!r,i):fv(n,e,t,!0,r,i)}function ob(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)ob(n,e[u],t,r,i);else r=nh(r)?!!r.capture:!!r,t=Xf(t),n&&n[sh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=dv(u=n.g[e],t,r,i))&&(uv(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=bm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=dv(e,t,r,i)),(t=-1<n?e[n]:null)&&pv(t))}function pv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[sh])wm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(gv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=bm(e))?(wm(t,n),0==t.h&&(t.src=null,e[hv]=null)):uv(n)}}}function gv(n){return n in Em?Em[n]:Em[n]="on"+n}function YC(n,e){if(n.ba)n=!0;else{e=new ih(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&pv(n),n=t.call(r,e)}return n}function bm(n){return(n=n[hv])instanceof ar?n:null}var ab="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xf(n){return"function"==typeof n?n:(n[ab]||(n[ab]=function(e){return n.handleEvent(e)}),n[ab])}function Tr(){ul.call(this),this.i=new ar(this),this.P=this,this.I=null}function Mn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Pr(e,n);else if(e instanceof Pr)e.target=e.target||n;else{var i=e;rb(e=new Pr(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Im(c,r,!0,e)&&i}if(i=Im(c=e.g=n,r,!0,e)&&i,i=Im(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Im(c=e.g=t[u],r,!1,e)&&i}function Im(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var p=c.listener,_=c.ha||c.src;c.ea&&wm(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}Gr(Tr,ul),Tr.prototype[sh]=!0,Tr.prototype.removeEventListener=function(n,e,t,r){ob(this,n,e,t,r)},Tr.prototype.M=function(){if(Tr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)uv(t[r]);delete n.g[e],n.h--}}this.I=null},Tr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Tr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Dm=kt.JSON.stringify;function Xo(){var n=Cm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var mv,Us=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ub,n=>n.reset());class ub{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lb(n){kt.setTimeout(()=>{throw n},0)}function cb(n,e){mv||function QC(){var n=kt.Promise.resolve(void 0);mv=function(){n.then(ep)}}(),yv||(mv(),yv=!0),Cm.add(n,e)}var yv=!1,Cm=new class vo{constructor(){this.h=this.g=null}add(e,t){const r=Us.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ep(){for(var n;n=Xo();){try{n.h.call(n.g)}catch(t){lb(t)}var e=Us;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yv=!1}function Tm(n,e){Tr.call(this),this.h=n||1,this.g=e||kt,this.j=fi(this.lb,this),this.l=Date.now()}function Sm(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function _v(n,e,t){if("function"==typeof n)t&&(n=fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function vv(n){n.g=_v(()=>{n.g=null,n.i&&(n.i=!1,vv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Gr(Tm,Tr),(it=Tm.prototype).ca=!1,it.R=null,it.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Mn(this,"tick"),this.ca&&(Sm(this),this.start()))}},it.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){Tm.X.M.call(this),Sm(this),delete this.g};class db extends ul{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vv(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cl(n){ul.call(this),this.h=n,this.g={}}Gr(cl,ul);var hb=[];function wv(n,e,t,r){Array.isArray(t)||(t&&(hb[0]=t.toString()),t=hb);for(var i=0;i<t.length;i++){var u=ib(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ev(n){lv(n.g,function(e,t){this.g.hasOwnProperty(t)&&pv(e)},n),n.g={}}function oh(){this.g=!0}function Dc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function gb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Dm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}cl.prototype.M=function(){cl.X.M.call(this),Ev(this)},cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},oh.prototype.Aa=function(){this.g=!1},oh.prototype.info=function(){};var dl={},bv=null;function tp(){return bv=bv||new Tr}function Iv(n){Pr.call(this,dl.Pa,n)}function np(n){const e=tp();Mn(e,new Iv(e,n))}function mb(n,e){Pr.call(this,dl.STAT_EVENT,n),this.stat=e}function Ni(n){const e=tp();Mn(e,new mb(e,n))}function yb(n,e){Pr.call(this,dl.Qa,n),this.size=e}function rp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}dl.Pa="serverreachability",Gr(Iv,Pr),dl.STAT_EVENT="statevent",Gr(mb,Pr),dl.Qa="timingevent",Gr(yb,Pr);var Mm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_b={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Dv(){}function wb(){}Dv.prototype.h=null;var Sv,ip={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Cv(){Pr.call(this,"d")}function Tv(){Pr.call(this,"c")}function xm(){}function sp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new cl(this),this.O=JC,this.T=new Tm(n=ev?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Eb}function Eb(){this.i=null,this.g="",this.h=!1}Gr(Cv,Pr),Gr(Tv,Pr),Gr(xm,Dv),xm.prototype.g=function(){return new XMLHttpRequest},xm.prototype.i=function(){return{}},Sv=new xm;var JC=45e3,Nm={},op={};function Pm(n,e,t){n.K=1,n.v=Om(ea(e)),n.s=t,n.P=!0,Av(n,null)}function Av(n,e){n.F=Date.now(),ah(n),n.A=ea(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Fv(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Eb,n.g=qm(n.l,t?e:null,!n.s),0<n.N&&(n.L=new db(fi(n.La,n,n.g),n.N)),wv(n.S,n.g,"readystatechange",n.ib),e=n.H?nb(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),np(1),function Am(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),_=0;_<p.length;_++){var b=p[_].split("=");if(1<b.length){var T=b[0];b=b[1];var M=T.split("_");c=2<=M.length&&"type"==M[1]?c+(T+"=")+b+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Mv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function xv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bb(n,t),i==op){4==e&&(n.o=4,Ni(14),r=!1),Dc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Nm){n.o=4,Ni(15),Dc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dc(n.j,n.m,i,null),Pv(n,i)}Mv(n)&&i!=op&&i!=Nm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ni(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),zv(e),e.K=!0,Ni(11))):(Dc(n.j,n.m,t,"[Invalid Chunked Response]"),ds(n),Cc(n))}function bb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?op:(t=Number(e.substring(t,r)),isNaN(t)?Nm:(r+=1)+t>e.length?op:(e=e.substr(r,t),n.C=r+t,e))}function ah(n){n.V=Date.now()+n.O,Nv(n,n.O)}function Nv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=rp(fi(n.gb,n),e)}function ap(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function Cc(n){0==n.l.G||n.I||Wv(n.l,n)}function ds(n){ap(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Sm(n.T),Ev(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Pv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||dh(t.h,n)))if(!n.J&&dh(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Gm(t),jm(t)}$m(t),Ni(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=rp(fi(t.cb,t),6e3));if(1>=Sb(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Tc(t,11)}else if((n.J||t.g==n)&&Gm(t),!_m(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const T=b[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const M=b[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const Z=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.h;u.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Fm(u,u.h),u.h=null))}if(r.D){const ue=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.za=ue,Bn(r.F,r.D,ue))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=kb(r,r.H?r.ka:null,r.V),c.J){Lv(r.h,c);var p=c,_=r.J;_&&p.setTimeout(_),p.B&&(ap(p),ah(p)),r.g=c}else Rb(r);0<t.i.length&&fl(t)}else"stop"!=b[0]&&"close"!=b[0]||Tc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Tc(t,7):Bm(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}np(4)}catch{}}function eT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Wf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function uh(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Wf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function XC(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Wf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(it=sp.prototype).setTimeout=function(n){this.O=n},it.ib=function(n){n=n.target;const e=this.L;e&&3==hs(n)?e.l():this.La(n)},it.La=function(n){try{if(n==this.g)e:{const T=hs(this.g);var e=this.g.Ea();const M=this.g.aa();if(!(3>T)&&(3!=T||ev||this.g&&(this.h.h||this.g.fa()||Mb(this.g)))){this.I||4!=T||7==e||np(8==e||0>=M?3:2),ap(this);var t=this.g.aa();this.Y=t;t:if(Mv(this)){var r=Mb(this.g);n="";var i=r.length,u=4==hs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ds(this),Cc(this);var c="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function fb(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_m(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ni(12),ds(this),Cc(this);break e}Dc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pv(this,t)}this.P?(xv(this,T,c),ev&&this.i&&3==T&&(wv(this.S,this.T,"tick",this.hb),this.T.start())):(Dc(this.j,this.m,c,null),Pv(this,c)),4==T&&ds(this),this.i&&!this.I&&(4==T?Wv(this.l,this):(this.i=!1,ah(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ni(12)):(this.o=0,Ni(13)),ds(this),Cc(this)}}}catch{}},it.hb=function(){if(this.g){var n=hs(this.g),e=this.g.fa();this.C<e.length&&(ap(this),xv(this,n,e),this.i&&4!=n&&ah(this))}},it.cancel=function(){this.I=!0,ds(this)},it.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function pb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(np(3),Ni(17)),ds(this),this.o=2,Cc(this)):Nv(this,this.V-n)};var Rm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof hl){this.h=void 0!==e?e:n.h,Rv(this,n.j),this.s=n.s,this.g=n.g,wt(this,n.m),this.l=n.l,e=n.i;var t=new cp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ib(this,t),this.o=n.o}else n&&(t=String(n).match(Rm))?(this.h=!!e,Rv(this,t[1]||"",!0),this.s=ta(t[2]||""),this.g=ta(t[3]||"",!0),wt(this,t[4]),this.l=ta(t[5]||"",!0),Ib(this,t[6]||"",!0),this.o=ta(t[7]||"")):(this.h=!!e,this.i=new cp(null,this.h))}function ea(n){return new hl(n)}function Rv(n,e,t){n.j=t?ta(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function wt(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ib(n,e,t){e instanceof cp?(n.i=e,function tT(n,e){e&&!n.j&&(Za(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Ov(this,r),Fv(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=up(e,Db)),n.i=new cp(e,n.h))}function Bn(n,e,t){n.i.set(e,t)}function Om(n){return Bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ta(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function up(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,km),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function km(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}hl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(up(e,lp,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(up(e,lp,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(up(t,"/"==t.charAt(0)?tx:ur,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",up(t,Cb)),n.join("")};var lp=/[#\/\?@]/g,ur=/[#\?:]/g,tx=/[#\?]/g,Db=/[#\?@]/g,Cb=/#/g;function cp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Za(n){n.g||(n.g=new Map,n.h=0,n.i&&function ex(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ov(n,e){Za(n),e=lh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function kv(n,e){return Za(n),e=lh(n,e),n.g.has(e)}function Fv(n,e,t){Ov(n,e),0<t.length&&(n.i=null,n.g.set(lh(n,e),Q_(t)),n.h+=t.length)}function lh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ch(n){this.l=n||rT,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ga&&kt.g.Ga()&&kt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=cp.prototype).add=function(n,e){Za(this),this.i=null,n=lh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){Za(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},it.oa=function(){Za(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},it.W=function(n){Za(this);let e=[];if("string"==typeof n)kv(this,n)&&(e=e.concat(this.g.get(lh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return Za(this),this.i=null,kv(this,n=lh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var rT=10;function Tb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Sb(n){return n.h?1:n.g?n.g.size:0}function dh(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Fm(n,e){n.g?n.g.add(e):n.h=e}function Lv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Vv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Q_(n.i)}function Uv(){}function dp(){this.g=new Uv}function hp(n,e,t){const r=t||"";try{eT(n,function(i,u){let c=i;nh(i)&&(c=Dm(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Lm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function fp(n){this.l=n.ac||null,this.j=n.jb||!1}function pp(n,e){Tr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Vm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ch.prototype.cancel=function(){if(this.i=Vv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Uv.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},Uv.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},Gr(fp,Dv),fp.prototype.g=function(){return new pp(this.l,this.j)},fp.prototype.i=function(n){return function(){return n}}({}),Gr(pp,Tr);var Vm=0;function Bv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function gp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hh(n)}function hh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=pp.prototype).open=function(n,e){if(this.readyState!=Vm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hh(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gp(this)),this.readyState=Vm},it.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hh(this)),this.g&&(this.readyState=3,hh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},it.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?gp(this):hh(this),3==this.readyState&&Bv(this)}},it.Va=function(n){this.g&&(this.response=this.responseText=n,gp(this))},it.Ua=function(n){this.g&&(this.response=n,gp(this))},it.ga=function(){this.g&&gp(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(pp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sT=kt.JSON.parse;function lr(n){Tr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oT,this.K=this.L=!1}Gr(lr,Tr);var oT="",nx=/^https?$/i,rx=["POST","PUT"];function jv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,mp(n),Um(n)}function mp(n){n.D||(n.D=!0,Mn(n,"complete"),Mn(n,"error"))}function Ab(n){if(n.h&&typeof al<"u"&&(!n.C[1]||4!=hs(n)||2!=n.aa()))if(n.v&&4==hs(n))_v(n.Ha,0,n);else if(Mn(n,"readystatechange"),4==hs(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(Rm)[1]||null;if(!i&&kt.self&&kt.self.location){var u=kt.self.location.protocol;i=u.substr(0,u.length-1)}r=!nx.test(i?i.toLowerCase():"")}t=r}if(t)Mn(n,"complete"),Mn(n,"success");else{n.m=6;try{var c=2<hs(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",mp(n)}}finally{Um(n)}}}function Um(n,e){if(n.g){$v(n);const t=n.g,r=n.C[0]?zf:null;n.g=null,n.C=null,e||Mn(n,"ready");try{t.onreadystatechange=r}catch{}}}function $v(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function hs(n){return n.g?n.g.readyState:0}function Mb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case oT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xb(n){let e="";return lv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Hv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=xb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Bn(n,e,t))}function yp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Nb(n){this.Ca=0,this.i=[],this.j=new oh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=yp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=yp("baseRetryDelayMs",5e3,n),this.bb=yp("retryDelaySeedMs",1e4,n),this.$a=yp("forwardChannelMaxRetries",2,n),this.ta=yp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ch(n&&n.concurrentRequestLimit),this.Fa=new dp,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Bm(n){if(Pb(n),3==n.G){var e=n.U++,t=ea(n.F);Bn(t,"SID",n.I),Bn(t,"RID",e),Bn(t,"TYPE","terminate"),_p(n,t),(e=new sp(n,n.j,e,void 0)).K=2,e.v=Om(ea(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=qm(e.l,null),e.g.da(e.v)),e.F=Date.now(),ah(e)}Ob(n)}function jm(n){n.g&&(zv(n),n.g.cancel(),n.g=null)}function Pb(n){jm(n),n.u&&(kt.clearTimeout(n.u),n.u=null),Gm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function fl(n){Tb(n.h)||n.m||(n.m=!0,cb(n.Ja,n),n.C=0)}function Gv(n,e){var t;t=e?e.m:n.U++;const r=ea(n.F);Bn(r,"SID",n.I),Bn(r,"RID",t),Bn(r,"AID",n.T),_p(n,r),n.o&&n.s&&Hv(r,n.o,n.s),t=new sp(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=qv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Fm(n.h,t),Pm(t,r,e)}function _p(n,e){n.ia&&lv(n.ia,function(t,r){Bn(e,r,t)}),n.l&&eT({},function(t,r){Bn(e,r,t)})}function qv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?fi(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let b=i[_].h;const T=i[_].g;if(b-=u,0>b)u=Math.max(0,i[_].h-100),p=!1;else try{hp(T,c,"req"+b+"_")}catch{r&&r(T)}}if(p){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Rb(n){n.g||n.u||(n.Z=1,cb(n.Ia,n),n.A=0)}function $m(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=rp(fi(n.Ia,n),Zv(n,n.A)),n.A++,0))}function zv(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function Hm(n){n.g=new sp(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ea(n.sa);Bn(e,"RID","rpc"),Bn(e,"SID",n.I),Bn(e,"CI",n.L?"0":"1"),Bn(e,"AID",n.T),Bn(e,"TYPE","xmlhttp"),_p(n,e),n.o&&n.s&&Hv(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Om(ea(e)),t.s=null,t.P=!0,Av(t,n)}function Gm(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function Wv(n,e){var t=null;if(n.g==e){Gm(n),zv(n),n.g=null;var r=2}else{if(!dh(n.h,e))return;t=e.D,Lv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Mn(r=tp(),new yb(r,t,e,i)),fl(n)}else Rb(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function aT(n,e){return!(Sb(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=rp(fi(n.Ja,n,e),Zv(n,n.C)),n.C++,0)))}(n,e)||2==r&&$m(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Tc(n,5);break;case 4:Tc(n,10);break;case 3:Tc(n,6);break;default:Tc(n,2)}}function Zv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Tc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=fi(n.kb,n);t||(t=new hl("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||Rv(t,"https"),Om(t)),function iT(n,e){const t=new oh;if(kt.Image){const r=new Image;r.onload=mm(Lm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=mm(Lm,t,r,"TestLoadImage: error",!1,e),r.onabort=mm(Lm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=mm(Lm,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ni(2);n.G=0,n.l&&n.l.va(e),Ob(n),Pb(n)}function Ob(n){if(n.G=0,n.la=[],n.l){const e=Vv(n.h);(0!=e.length||0!=n.i.length)&&(Zf(n.la,e),Zf(n.la,n.i),n.h.i.length=0,Q_(n.i),n.i.length=0),n.l.ua()}}function kb(n,e,t){var r=t instanceof hl?ea(t):new hl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),wt(r,r.m);else{var i=kt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new hl(null,void 0);r&&Rv(u,r),e&&(u.g=e),i&&wt(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Bn(r,t,e),Bn(r,"VER",n.ma),_p(n,r),r}function qm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t&&n.Da&&!n.ra?new fp({jb:!0}):n.ra)).Ka(n.H),e}function Fb(){}function vp(){if(ll&&!(10<=Number(JE)))throw Error("Environmental error: no available transport.")}function fs(n,e){Tr.call(this),this.g=new Nb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!_m(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_m(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new fh(this)}function Lb(n){Cv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Vb(){Tv.call(this),this.status=1}function fh(n){this.g=n}(it=lr.prototype).Ka=function(n){this.L=n},it.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Sv.g(),this.C=function vb(n){return n.h||(n.h=n.i())}(this.u?this.u:Sv),this.g.onreadystatechange=fi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void jv(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=kt.FormData&&n instanceof kt.FormData,!(0<=ym(rx,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$v(this),0<this.B&&((this.K=function ix(n){return ll&&function ov(){return function ZE(n){var e=QE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Kf(String(Jf)).split("."),t=Kf("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=rh(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||rh(0==i[2].length,0==u[2].length)||rh(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fi(this.qa,this)):this.A=_v(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){jv(this,u)}},it.qa=function(){typeof al<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mn(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Mn(this,"complete"),Mn(this,"abort"),Um(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Um(this,!0)),lr.X.M.call(this)},it.Ha=function(){this.s||(this.F||this.v||this.l?Ab(this):this.fb())},it.fb=function(){Ab(this)},it.aa=function(){try{return 2<hs(this)?this.g.status:-1}catch{return-1}},it.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},it.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sT(e)}},it.Ea=function(){return this.m},it.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=Nb.prototype).ma=8,it.G=1,it.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new sp(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=nb(u),rb(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=qv(this,i,e),Bn(t=ea(this.F),"RID",n),Bn(t,"CVER",22),this.D&&Bn(t,"X-HTTP-Session-Id",this.D),_p(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(xb(u)))+"&"+e:this.o&&Hv(t,this.o,u)),Fm(this.h,i),this.Ya&&Bn(t,"TYPE","init"),this.O?(Bn(t,"$req",e),Bn(t,"SID","null"),i.Z=!0,Pm(i,t,null)):Pm(i,t,e),this.G=2}}else 3==this.G&&(n?Gv(this,n):0==this.i.length||Tb(this.h)||Gv(this))},it.Ia=function(){if(this.u=null,Hm(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=rp(fi(this.eb,this),n)}},it.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ni(10),jm(this),Hm(this))},it.cb=function(){null!=this.v&&(this.v=null,jm(this),$m(this),Ni(19))},it.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ni(2)):(this.j.info("Failed to ping google.com"),Ni(1))},(it=Fb.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Ra=function(){},vp.prototype.g=function(n,e){return new fs(n,e)},Gr(fs,Tr),fs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ni(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=kb(n,null,n.V),fl(n)},fs.prototype.close=function(){Bm(this.g)},fs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Dm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&fl(e)},fs.prototype.M=function(){this.g.l=null,delete this.j,Bm(this.g),delete this.g,fs.X.M.call(this)},Gr(Lb,Cv),Gr(Vb,Tv),Gr(fh,Fb),fh.prototype.xa=function(){Mn(this.g,"a")},fh.prototype.wa=function(n){Mn(this.g,new Lb(n))},fh.prototype.va=function(n){Mn(this.g,new Vb(n))},fh.prototype.ua=function(){Mn(this.g,"b")},vp.prototype.createWebChannel=vp.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,Mm.NO_ERROR=0,Mm.TIMEOUT=8,Mm.HTTP_ERROR=6,_b.COMPLETE="complete",wb.EventType=ip,ip.OPEN="a",ip.CLOSE="b",ip.ERROR="c",ip.MESSAGE="d",Tr.prototype.listen=Tr.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.Oa,lr.prototype.getLastErrorCode=lr.prototype.Ea,lr.prototype.getStatus=lr.prototype.aa,lr.prototype.getResponseJson=lr.prototype.Sa,lr.prototype.getResponseText=lr.prototype.fa,lr.prototype.send=lr.prototype.da,lr.prototype.setWithCredentials=lr.prototype.Ka;var uT=ji.createWebChannelTransport=function(){return new vp},lT=ji.getStatEventTarget=function(){return tp()},Kv=ji.ErrorCode=Mm,cT=ji.EventType=_b,Ub=ji.Event=dl,Yv=ji.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},dT=ji.FetchXmlHttpFactory=fp,zm=ji.WebChannel=wb,Bb=ji.XhrIo=lr;const jb="@firebase/firestore";class qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");let ph="9.12.1";const na=new cs.Yd("@firebase/firestore");function wp(){return na.logLevel}function Pe(n,...e){if(na.logLevel<=cs.in.DEBUG){const t=e.map(Ep);na.debug(`Firestore (${ph}): ${n}`,...t)}}function mr(n,...e){if(na.logLevel<=cs.in.ERROR){const t=e.map(Ep);na.error(`Firestore (${ph}): ${n}`,...t)}}function Sc(n,...e){if(na.logLevel<=cs.in.WARN){const t=e.map(Ep);na.warn(`Firestore (${ph}): ${n}`,...t)}}function Ep(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${ph}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function Tt(n,e){n||st()}function qe(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Yt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qr.UNAUTHENTICATED))}shutdown(){}}class Qv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fT{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Sr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Sr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new Wm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new qr(e)}}class Hb{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Tt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Jv{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Hb(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gb{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.A=t.token,new Xv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class zb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=qb(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function mh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Wb(n){return n+"\0"}class kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new kn(0,0))}static max(){return new Nt(new kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yh{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===yh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends yh{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const gT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends yh{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return gT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(sn.fromString(e))}static fromName(e){return new ze(sn.fromString(e).popFirst(5))}static empty(){return new ze(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new sn(e.slice()))}}class Zm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function e0(n){return n.fields.find(e=>2===e.kind)}function pl(n){return n.fields.filter(e=>2!==e.kind)}Zm.UNKNOWN_ID=-1;class Km{constructor(e,t){this.fieldPath=e,this.kind=t}}class bp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bp(0,ps.min())}}function Kb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(1e9===r?new kn(t+1,0):new kn(t,r));return new ps(i,ze.empty(),e)}function Yb(n){return new ps(n.readTime,n.key,-1)}class ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ps(Nt.min(),ze.empty(),-1)}static max(){return new ps(Nt.max(),ze.empty(),-1)}}function t0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const Qb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _h{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ka(n){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Qb)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Ym.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const u=e.length,c=new Array(u);let p=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(T=>{c[b]=T,++p,p===u&&r(c)},T=>i(T))}})}static doWhile(e,t){return new ie((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class Ip{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Sr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Dp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Qm(r.target.error);this.P.reject(new Dp(e,i))}}static open(e,t,r,i){try{return new Ip(t,e.transaction(i,r))}catch(u){throw new Dp(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yT(t)}}class Bs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Bs.D((0,Yt.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Mc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Yt.hl)())return!1;if(Bs.N())return!0;const e=(0,Yt.z$)(),t=Bs.D(e),r=0<t&&t<10,i=Bs.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Dp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Dp(e,p))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ye.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const _=Ip.open(u.db,e,c?"readonly":"readwrite",r),b=i(_).next(T=>(_.V(),T)).catch(T=>(_.abort(T),ie.reject(T))).toPromise();return b.catch(()=>{}),yield _.v,b}catch(_){const b=_,T="FirebaseError"!==b.name&&p<3;if(Pe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",T),u.close(),!T)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Jb{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Mc(this.U.delete())}}class Dp extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ac(n){return"IndexedDbTransactionError"===n.name}class yT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mc(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Mc(this.store.add(e))}get(e){return Mc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Mc(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Mc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ie((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ie((r,i)=>{t.onerror=u=>{const c=Qm(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}H(e,t){const r=[];return new ie((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new Jb(p),b=t(p.primaryKey,p.value,_);if(b instanceof ie){const T=b.catch(M=>(_.done(),ie.reject(M)));r.push(T)}_.isDone?i():null===_.G?p.continue():p.continue(_.G)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Mc(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Qm(r.target.error);t(i)}})}let Xb=!1;function Qm(n){const e=Bs.D((0,Yt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xb||(Xb=!0,setTimeout(()=>{throw r},0)),r}}return n}class _T{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ac(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ka(r)}yield t.nt(6e4)}))}}class Cp{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return ie.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Pe("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(p=>{i-=p,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(p=>(Pe("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=Yb(u);t0(c,r)>0&&(r=c)}),new ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class $i{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Jm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}$i.at=-1;class jn{constructor(e,t){this.comparator=e,this.root=t||ri.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gl(this.root,e,this.comparator,!0)}}class gl{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ri{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??ri.RED,this.left=i??ri.EMPTY,this.right=u??ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ri(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ri.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ri.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1,ri.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ri(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tI(this.data.getIterator())}getIteratorFrom(e){return new tI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dn(this.comparator);return t.data=e,t}}class tI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ya(n){return n.hasNext()?n.getNext():void 0}class gi{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new gi([])}unionWith(e){let t=new Dn(yr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new gi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Rr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const nI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qa(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=nI.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$n(n.seconds),nanos:$n(n.nanos)}}function $n(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ml(n){return"string"==typeof n?Rr.fromBase64String(n):Rr.fromUint8Array(n)}function n0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rI(n){const e=n.mapValue.fields.__previous_value__;return n0(e)?rI(e):e}function Xm(n){const e=Qa(n.mapValue.fields.__local_write_time__.timestampValue);return new kn(e.seconds,e.nanos)}class r0{constructor(e,t,r,i,u,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class ra{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ra("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ra&&e.projectId===this.projectId&&e.database===this.database}}function vh(n){return null==n}function xc(n){return 0===n&&1/n==-1/0}function ey(n){return"number"==typeof n&&Number.isInteger(n)&&!xc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ty={nullValue:"NULL_VALUE"};function Nc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?n0(n)?4:mi(n)?9007199254740991:10:st()}function ia(n,e){if(n===e)return!0;const t=Nc(n);if(t!==Nc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xm(n).isEqual(Xm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Qa(r.timestampValue),c=Qa(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ml(n.bytesValue).isEqual(ml(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return $n(r.geoPointValue.latitude)===$n(i.geoPointValue.latitude)&&$n(r.geoPointValue.longitude)===$n(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return $n(r.integerValue)===$n(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=$n(r.doubleValue),c=$n(i.doubleValue);return u===c?xc(u)===xc(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return mh(n.arrayValue.values||[],e.arrayValue.values||[],ia);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Jm(u)!==Jm(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!ia(u[p],c[p])))return!1;return!0}(n,e);default:return st()}var i}function wh(n,e){return void 0!==(n.values||[]).find(t=>ia(t,e))}function sa(n,e){if(n===e)return 0;const t=Nc(n),r=Nc(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=$n(i.integerValue||i.doubleValue),p=$n(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return s0(n.timestampValue,e.timestampValue);case 4:return s0(Xm(n),Xm(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=ml(i),p=ml(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let _=0;_<c.length&&_<p.length;_++){const b=Vt(c[_],p[_]);if(0!==b)return b}return Vt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Vt($n(i.latitude),$n(u.latitude));return 0!==c?c:Vt($n(i.longitude),$n(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let _=0;_<c.length&&_<p.length;++_){const b=sa(c[_],p[_]);if(b)return b}return Vt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===yl.mapValue&&u===yl.mapValue)return 0;if(i===yl.mapValue)return 1;if(u===yl.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),_=u.fields||{},b=Object.keys(_);p.sort(),b.sort();for(let T=0;T<p.length&&T<b.length;++T){const M=Vt(p[T],b[T]);if(0!==M)return M;const L=sa(c[p[T]],_[b[T]]);if(0!==L)return L}return Vt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function s0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=Qa(n),r=Qa(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function Eh(n){return ny(n)}function ny(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Qa(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ml(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=ny(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${ny(r.fields[p])}`;return u+"}"}(n.mapValue):st();var e}function _l(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function o0(n){return!!n&&"integerValue"in n}function bh(n){return!!n&&"arrayValue"in n}function a0(n){return!!n&&"nullValue"in n}function iI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tp(n){return!!n&&"mapValue"in n}function Sp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mi(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ih(n){return"nullValue"in n?ty:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_l(ra.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function wT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_l(ra.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yl:st()}function sI(n,e){const t=sa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ET(n,e){const t=sa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sp(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Sp(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Tp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ia(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Tp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pi(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new yi(Sp(this.value))}}function u0(n){const e=[];return pi(n.fields,(t,r)=>{const i=new yr([t]);if(Tp(r)){const u=u0(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new gi(e)}class Tn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Tn(e,0,Nt.min(),Nt.min(),yi.empty(),0)}static newFoundDocument(e,t,r){return new Tn(e,1,t,Nt.min(),r,0)}static newNoDocument(e,t){return new Tn(e,2,t,Nt.min(),yi.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Nt.min(),yi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ap{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.ht=null}}function oI(n,e=null,t=[],r=[],i=null,u=null,c=null){return new Ap(n,e,t,r,i,u,c)}function Ja(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Eh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),vh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Eh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Eh(r)).join(",")),e.ht=t}return e.ht}function Dh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!c0(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ia(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dI(n.startAt,e.startAt)&&dI(n.endAt,e.endAt)}function ry(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function iy(n,e){return n.filters.filter(t=>t instanceof zr&&t.field.isEqual(e))}function aI(n,e,t){let r=ty,i=!0;for(const u of iy(n,e)){let c=ty,p=!0;switch(u.op){case"<":case"<=":c=Ih(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=ty}sI({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];sI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function sy(n,e,t){let r=yl,i=!0;for(const u of iy(n,e)){let c=yl,p=!0;switch(u.op){case">=":case">":c=wT(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=yl}ET({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];ET({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class zr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new uI(e,t,r):"array-contains"===t?new lI(e,r):"in"===t?new DT(e,r):"not-in"===t?new cI(e,r):"array-contains-any"===t?new Ch(e,r):new zr(e,t,r)}static lt(e,t,r){return"in"===t?new oy(e,r):new l0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(sa(t,this.value)):null!==t&&Nc(this.value)===Nc(t)&&this.ft(sa(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class uI extends zr{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.ft(t)}}class oy extends zr{constructor(e,t){super(e,"in",t),this.keys=IT(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class l0 extends zr{constructor(e,t){super(e,"not-in",t),this.keys=IT(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IT(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class lI extends zr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bh(t)&&wh(t.arrayValue,this.value)}}class DT extends zr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wh(this.value.arrayValue,t)}}class cI extends zr{constructor(e,t){super(e,"not-in",t)}matches(e){if(wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wh(this.value.arrayValue,t)}}class Ch extends zr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wh(this.value.arrayValue,r))}}class vl{constructor(e,t){this.position=e,this.inclusive=t}}class Pc{constructor(e,t="asc"){this.field=e,this.dir=t}}function c0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function CT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(c.referenceValue),t.key):sa(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function dI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ia(n.position[t],e.position[t]))return!1;return!0}class wl{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=_,this._t=null,this.wt=null}}function hI(n,e,t,r,i,u,c,p){return new wl(n,e,t,r,i,u,c,p)}function Th(n){return new wl(n)}function fI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ay(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function uy(n){for(const e of n.filters)if(e.dt())return e.field;return null}function d0(n){return null!==n.collectionGroup}function Rc(n){const e=qe(n);if(null===e._t){e._t=[];const t=uy(e),r=ay(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Pc(t)),e._t.push(new Pc(yr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Pc(yr.keyField(),u))}}}return e._t}function _i(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=oI(e.path,e.collectionGroup,Rc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Rc(e))t.push(new Pc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new vl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new vl(e.startAt.position,e.startAt.inclusive):null;e.wt=oI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function ly(n,e,t){return new wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mp(n,e){return Dh(_i(n),_i(e))&&n.limitType===e.limitType}function h0(n){return`${Ja(_i(n))}|lt:${n.limitType}`}function f0(n){return`Query(target=${function bT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Eh(r.value)}`;var r}).join(", ")}]`),vh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Eh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Eh(t)).join(",")),`Target(${e})`}(_i(n))}; limitType=${n.limitType})`}function cy(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=CT(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,Rc(t),r)||t.endAt&&!function(i,u,c){const p=CT(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,Rc(t),r)));var t,r}function p0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function g0(n){return(e,t)=>{let r=!1;for(const i of Rc(n)){const u=pI(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function pI(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),_=c.data.field(i);return null!==p&&null!==_?sa(p,_):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function gI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xc(e)?"-0":e}}function mI(n){return{integerValue:""+n}}function TT(n,e){return ey(e)?mI(e):gI(n,e)}class xp{constructor(){this._=void 0}}function sx(n,e,t){return n instanceof Np?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Sh?AT(n,e):n instanceof Ah?MT(n,e):function(r,i){const u=ST(r,i),c=xT(u)+xT(r.yt);return o0(u)&&o0(r.yt)?mI(c):gI(r.It,c)}(n,e)}function ox(n,e,t){return n instanceof Sh?AT(n,e):n instanceof Ah?MT(n,e):t}function ST(n,e){return n instanceof Xa?o0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Np extends xp{}class Sh extends xp{constructor(e){super(),this.elements=e}}function AT(n,e){const t=m0(e);for(const r of n.elements)t.some(i=>ia(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ah extends xp{constructor(e){super(),this.elements=e}}function MT(n,e){let t=m0(e);for(const r of n.elements)t=t.filter(i=>!ia(i,r));return{arrayValue:{values:t}}}class Xa extends xp{constructor(e,t){super(),this.It=e,this.yt=t}}function xT(n){return $n(n.integerValue||n.doubleValue)}function m0(n){return bh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class El{constructor(e,t){this.field=e,this.transform=t}}class _I{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Pp{}function vI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Rp(n.key,Jn.none()):new xh(n.key,n.data,Jn.none());{const t=n.data,r=yi.empty();let i=new Dn(yr.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new js(n.key,r,new gi(i.toArray()),Jn.none())}}function wI(n,e,t){n instanceof xh?function(r,i,u){const c=r.value.clone(),p=PT(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof js?function(r,i,u){if(!Mh(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=PT(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(bI(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function dy(n,e,t,r){return n instanceof xh?function(i,u,c,p){if(!Mh(i.precondition,u))return c;const _=i.value.clone(),b=RT(i.fieldTransforms,p,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof js?function(i,u,c,p){if(!Mh(i.precondition,u))return c;const _=RT(i.fieldTransforms,p,u),b=u.data;return b.setAll(bI(i)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,Mh(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function NT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=ST(r.transform,i||null);null!=u&&(null===t&&(t=yi.empty()),t.set(r.field,u))}return t||null}function EI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mh(t,r,(i,u)=>function yI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sh&&r instanceof Sh||t instanceof Ah&&r instanceof Ah?mh(t.elements,r.elements,ia):t instanceof Xa&&r instanceof Xa?ia(t.yt,r.yt):t instanceof Np&&r instanceof Np);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class xh extends Pp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class js extends Pp{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function bI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PT(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,ox(c,p,t[i]))}return r}function RT(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,sx(u,c,e))}return r}class Rp extends Pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y0 extends Pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OT{constructor(e){this.count=e}}var Ar,un;function II(n){switch(n){default:return st();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function _0(n){if(void 0===n)return mr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Ar.OK:return ce.OK;case Ar.CANCELLED:return ce.CANCELLED;case Ar.UNKNOWN:return ce.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return ce.INTERNAL;case Ar.UNAVAILABLE:return ce.UNAVAILABLE;case Ar.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ar.NOT_FOUND:return ce.NOT_FOUND;case Ar.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ar.ABORTED:return ce.ABORTED;case Ar.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ar.DATA_LOSS:return ce.DATA_LOSS;default:return st()}}(un=Ar||(Ar={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return eI(this.inner)}size(){return this.innerSize}}const ax=new jn(ze.comparator);function Hn(){return ax}const DI=new jn(ze.comparator);function Oc(...n){let e=DI;for(const t of n)e=e.insert(t.key,t);return e}function CI(n){let e=DI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function _r(){return kc()}function TI(){return kc()}function kc(){return new eu(n=>n.toString(),(n,e)=>n.isEqual(e))}const kT=new jn(ze.comparator),FT=new Dn(ze.comparator);function $t(...n){let e=FT;for(const t of n)e=e.add(t);return e}const SI=new Dn(Vt);function Op(){return SI}class kp{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Nh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kp(Nt.min(),i,Op(),Hn(),$t())}}class Nh{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nh(r,t,$t(),$t(),$t())}}class Fp{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class AI{constructor(e,t){this.targetId=e,this.At=t}}class v0{constructor(e,t,r=Rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class MI{constructor(){this.Rt=0,this.bt=E0(),this.Pt=Rr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=$t(),t=$t(),r=$t();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new Nh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=E0()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class w0{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Hn(),this.qt=tu(),this.Kt=new Dn(Vt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(ry(u))if(0===r){const c=new ze(u.path);this.jt(t,c,Tn.newNoDocument(c,Nt.min()))}else Tt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const p=this.Xt(c);if(p){if(u.current&&ry(p.target)){const _=new ze(p.target.path);null!==this.Ut.get(_)||this.ee(c,_)||this.jt(c,_,Tn.newNoDocument(_,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=$t();this.qt.forEach((u,c)=>{let p=!0;c.forEachWhile(_=>{const b=this.Xt(_);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new kp(e,t,this.Kt,this.Ut,r);return this.Ut=Hn(),this.qt=tu(),this.Kt=new Dn(Vt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new MI,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Dn(Vt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new MI),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function tu(){return new jn(ze.comparator)}function E0(){return new jn(ze.comparator)}const b0={asc:"ASCENDING",desc:"DESCENDING"},nu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class LT{constructor(e,t){this.databaseId=e,this.gt=t}}function hy(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xI(n,e){return n.gt?e.toBase64():e.toUint8Array()}function VT(n,e){return hy(n,e.toTimestamp())}function Wr(n){return Tt(!!n),Nt.fromTimestamp(function(e){const t=Qa(e);return new kn(t.seconds,t.nanos)}(n))}function I0(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function D0(n){const e=sn.fromString(n);return Tt(HT(e)),e}function fy(n,e){return I0(n.databaseId,e.path)}function wo(n,e){const t=D0(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(gy(t))}function C0(n,e){return I0(n.databaseId,e)}function T0(n){const e=D0(n);return 4===e.length?sn.emptyPath():gy(e)}function py(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gy(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function S0(n,e,t){return{name:fy(n,e),fields:t.value.mapValue.fields}}function A0(n,e,t){const r=wo(n,e.name),i=Wr(e.updateTime),u=new yi({mapValue:{fields:e.fields}}),c=Tn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Ph(n,e){let t;if(e instanceof xh)t={update:S0(n,e.key,e.value)};else if(e instanceof Rp)t={delete:fy(n,e.key)};else if(e instanceof js)t={update:S0(n,e.key,e.data),updateMask:$T(e.fieldMask)};else{if(!(e instanceof y0))return st();t={verify:fy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Np)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Sh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ah)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xa)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:VT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function Rh(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Jn.updateTime(Wr(i.updateTime)):void 0!==i.exists?Jn.exists(i.exists):Jn.none():Jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),p=new Np):"appendMissingElements"in c?p=new Sh(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Ah(c.removeAllFromArray.values||[]):"increment"in c?p=new Xa(u,c.increment):st();const _=yr.fromServerFormat(c.fieldPath);return new El(_,p)}(n,i)):[];var i;if(e.update){const i=wo(n,e.update.name),u=new yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new gi((e.updateMask.fieldPaths||[]).map(b=>yr.fromServerFormat(b)));return new js(i,u,c,t,r)}return new xh(i,u,t,r)}if(e.delete){const i=wo(n,e.delete);return new Rp(i,t)}if(e.verify){const i=wo(n,e.verify);return new y0(i,t)}return st()}function M0(n,e){return{documents:[C0(n,e.path)]}}function x0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=C0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=C0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(T=>function(M){if("=="===M.op){if(iI(M.value))return{unaryFilter:{field:Lp(M.field),op:"IS_NAN"}};if(a0(M.value))return{unaryFilter:{field:Lp(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(iI(M.value))return{unaryFilter:{field:Lp(M.field),op:"IS_NOT_NAN"}};if(a0(M.value))return{unaryFilter:{field:Lp(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lp(M.field),op:ux(M.op),value:M.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:Lp((T=b).field),direction:UT(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.gt||vh(b)?b:{value:b});var b,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function N0(n){let e=T0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=OI(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new Pc(Fc((M=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(T){let M;return M="object"==typeof T?T.value:T,vh(M)?null:M}(t.limit));let _=null;var T;t.startAt&&(_=new vl((T=t.startAt).values||[],!!T.before));let b=null;return t.endAt&&(b=function(T){return new vl(T.values||[],!T.before)}(t.endAt)),hI(e,i,c,u,p,"F",_,b)}function OI(n){return n?void 0!==n.unaryFilter?[jT(n)]:void 0!==n.fieldFilter?[BT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>OI(e)).reduce((e,t)=>e.concat(t)):st():[]}function UT(n){return b0[n]}function ux(n){return nu[n]}function Lp(n){return{fieldPath:n.canonicalString()}}function Fc(n){return yr.fromServerFormat(n.fieldPath)}function BT(n){return zr.create(Fc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function jT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Fc(n.unaryFilter.field);return zr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Fc(n.unaryFilter.field);return zr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fc(n.unaryFilter.field);return zr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fc(n.unaryFilter.field);return zr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function $T(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function HT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=GT(e)),e=lx(n.get(t),e);return GT(e)}function lx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function GT(n){return n+"\x01\x01"}function ru(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&st(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:st()}u=c+2}return new sn(r)}const kI=["userId","batchId"];function Lc(n,e){return[n,Hi(e)]}function FI(n,e,t){return[n,Hi(e),t]}const qT={},LI=["prefixPath","collectionGroup","readTime","documentId"],Vc=["prefixPath","collectionGroup","documentId"],VI=["collectionGroup","readTime","prefixPath","documentId"],P0=["canonicalId","targetId"],R0=["targetId","path"],zT=["path","targetId"],O0=["collectionId","parent"],k0=["indexId","uid"],yy=["uid","sequenceNumber"],cx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dx=["indexId","uid","orderedDocumentKey"],hx=["userId","collectionPath","documentId"],fx=["userId","collectionPath","largestBatchId"],UI=["userId","collectionGroup","largestBatchId"],BI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WT=[...BI,"documentOverlays"],jI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$I=jI,HI=[...$I,"indexConfiguration","indexState","indexEntries"];class _y extends _h{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Or(n,e){const t=qe(n);return Bs.M(t.ie,e)}class F0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&wI(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=dy(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=dy(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=TI();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=t.has(i.key)?null:p;const _=vI(c,p);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&mh(this.mutations,e.mutations,(t,r)=>EI(t,r))&&mh(this.baseMutations,e.baseMutations,(t,r)=>EI(t,r))}}class L0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=kT;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new L0(e,t,r,i)}}class vy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oa{constructor(e,t,r,i,u=Nt.min(),c=Nt.min(),p=Rr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ZT{constructor(e){this.re=e}}function wy(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ey(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:fy(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:hy(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Uc(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Uc(e.version)}}var i,u;return r}function Ey(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Uc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oh(n){const e=new kn(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function kh(n,e){const t=(e.baseMutations||[]).map(u=>Rh(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Rh(n.re,u)),i=kn.fromMillis(e.localWriteTimeMs);return new F0(e.batchId,i,t,r)}function Vp(n){const e=Oh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Oh(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=_i(Th(T0(i.documents[0])))):r=_i(N0(n.query)),new oa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Rr.fromBase64String(n.resumeToken))}function qI(n,e){const t=Uc(e.snapshotVersion),r=Uc(e.lastLimboFreeSnapshotVersion);let i;i=ry(e.target)?M0(n.re,e.target):x0(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function V0(n){const e=N0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ly(e,e.limit,"L"):e}function zI(n,e){return new vy(e.largestBatchId,Rh(n.re,e.overlayMutation))}function KT(n,e){const t=e.path.lastSegment();return[n,Hi(e.path.popLast()),t]}function YT(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Uc(r.readTime),documentKey:Hi(r.documentKey.path),largestBatchId:r.largestBatchId}}class px{getBundleMetadata(e,t){return QT(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Oh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return QT(e).put({bundleId:(r=t).id,createTime:Uc(Wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return WI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:V0(i.bundledQuery),readTime:Oh(i.readTime)};var i})}saveNamedQuery(e,t){return WI(e).put({name:(r=t).name,readTime:Uc(Wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function QT(n){return Or(n,"bundles")}function WI(n){return Or(n,"namedQueries")}class U0{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new U0(e,t.uid||"")}getOverlay(e,t){return by(e).get(KT(this.userId,t)).next(r=>r?zI(this.It,r):null)}getOverlays(e,t){const r=_r();return ie.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new vy(t,c);i.push(this.ue(e,p))}),ie.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Hi(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(by(e).Y("collectionPathOverlayIndex",p))}),ie.waitFor(u)}getOverlaysForCollection(e,t,r){const i=_r(),u=Hi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return by(e).W("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const b=zI(this.It,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=_r();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return by(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,b,T)=>{const M=zI(this.It,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return by(e).put(function(r,i,u){const[c,p,_]=KT(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ph(r.re,u.mutation)}}(this.It,this.userId,t))}}function by(n){return Or(n,"documentOverlays")}class Fh{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe($n(e.integerValue));else if("doubleValue"in e){const r=$n(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),xc(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ml(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?mi(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):st()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function gx(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function JT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=gx(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Fh.Te=new Fh;class mx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=JT(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=JT(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class s{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class o{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class a{constructor(){this.Be=new mx,this.Le=new s(this.Be),this.Ue=new o(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class l{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new l(this.indexId,this.documentKey,this.arrayValue,r)}}function h(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=g(n.arrayValue,e.arrayValue),0!==t?t:(t=g(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function g(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class v{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=e0(e);if(void 0!==t&&!this.ze(t))return!1;const r=pl(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class E{constructor(){this.Ye=new I}addToCollectionParentIndex(e,t){return this.Ye.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ps.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class I{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dn(sn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dn(sn.comparator)).toArray()}}const S=new Uint8Array(0);class N{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new I,this.Ze=new eu(r=>Ja(r),(r,i)=>Dh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Hi(i)};return O(e).put(u)}return ie.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Wb(t),""],!1,!0);return O(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ru(c.parent))}return r})}addFieldIndex(e,t){const r=X(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=ve(e);return u.next(p=>{c.put(YT(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=X(e),i=ve(e),u=H(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=H(e);let i=!0;const u=new Map;return ie.forEach(this.tn(t),c=>this.en(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=$t();const p=[];return ie.forEach(u,(_,b)=>{var T;Pe("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${Ja(t)}`);const M=function(gt,ct){const St=e0(ct);if(void 0===St)return null;for(const Pt of iy(gt,St.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(b,_),L=function(gt,ct){const St=new Map;for(const Pt of pl(ct))for(const ln of iy(gt,Pt.fieldPath))switch(ln.op){case"==":case"in":St.set(Pt.fieldPath.canonicalString(),ln.value);break;case"not-in":case"!=":return St.set(Pt.fieldPath.canonicalString(),ln.value),Array.from(St.values())}return null}(b,_),G=function(gt,ct){const St=[];let Pt=!0;for(const ln of pl(ct)){const _s=0===ln.kind?aI(gt,ln.fieldPath,gt.startAt):sy(gt,ln.fieldPath,gt.startAt);St.push(_s.value),Pt&&(Pt=_s.inclusive)}return new vl(St,Pt)}(b,_),Z=function(gt,ct){const St=[];let Pt=!0;for(const ln of pl(ct)){const _s=0===ln.kind?sy(gt,ln.fieldPath,gt.endAt):aI(gt,ln.fieldPath,gt.endAt);St.push(_s.value),Pt&&(Pt=_s.inclusive)}return new vl(St,Pt)}(b,_),ue=this.nn(_,b,G),_e=this.nn(_,b,Z),Ye=this.sn(_,b,L),at=this.rn(_.indexId,M,ue,G.inclusive,_e,Z.inclusive,Ye);return ie.forEach(at,gt=>r.J(gt,t.limit).next(ct=>{ct.forEach(St=>{const Pt=ze.fromSegments(St.documentKey);c.has(Pt)||(c=c.add(Pt),p.push(Pt))})}))}).next(()=>p)}return ie.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),T=[];for(let M=0;M<_;++M){const L=t?this.on(t[M/b]):S,G=this.un(e,L,r[M%b],i),Z=this.cn(e,L,u[M%b],c),ue=p.map(_e=>this.un(e,L,_e,!0));T.push(...this.createRange(G,Z,ue))}return T}un(e,t,r,i){const u=new l(e,ze.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new l(e,ze.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new v(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.We(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return ie.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new Dn(yr.comparator),_=!1;for(const b of c.filters){const T=b;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:p=p.add(T.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new a;for(const i of pl(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);Fh.Te.ce(u,c)}return r.$e()}on(e){const t=new a;return Fh.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new a;return Fh.Te.ce(_l(this.databaseId,t),r.qe(function(i){const u=pl(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new a);let u=0;for(const c of pl(e)){const p=r[u++];for(const _ of i)if(this.ln(t,c.fieldPath)&&bh(p))i=this.fn(i,c,p);else{const b=_.qe(c.kind);Fh.Te.ce(p,b)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new a;_.seed(p.$e()),Fh.Te.ce(c,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof zr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=X(e),i=ve(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return ie.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(b,T){const M=T?new bp(T.sequenceNumber,new ps(Oh(T.readTime),new ze(ru(T.documentKey)),T.largestBatchId)):bp.empty(),L=b.fields.map(([G,Z])=>new Km(yr.fromServerFormat(G),Z));return new Zm(b.indexId,b.collectionGroup,L,M)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=X(e),u=ve(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ie.forEach(p,_=>u.put(YT(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ie.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ie.forEach(p,_=>this.wn(e,i,_).next(b=>{const T=this.mn(u,_);return b.isEqual(T)?ie.resolve():this.gn(e,u,_,b,T)}))))})}yn(e,t,r,i){return H(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return H(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=H(e);let u=new Dn(h);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,p)=>{u=u.add(new l(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new Dn(h);const i=this.an(t,e);if(null==i)return r;const u=e0(t);if(null!=u){const c=e.data.field(u.fieldPath);if(bh(c))for(const p of c.arrayValue.values||[])r=r.add(new l(t.indexId,e.key,this.on(p),i))}else r=r.add(new l(t.indexId,e.key,S,i));return r}gn(e,t,r,i,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,b,T,M){const L=p.getIterator(),G=_.getIterator();let Z=Ya(L),ue=Ya(G);for(;Z||ue;){let _e=!1,Ye=!1;if(Z&&ue){const at=b(Z,ue);at<0?Ye=!0:at>0&&(_e=!0)}else null!=Z?Ye=!0:_e=!0;_e?(T(ue),ue=Ya(G)):Ye?(M(Z),Z=Ya(L)):(Z=Ya(L),ue=Ya(G))}}(i,u,h,p=>{c.push(this.yn(e,t,r,p))},p=>{c.push(this.pn(e,t,r,p))}),ie.waitFor(c)}_n(e){let t=1;return ve(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>h(c,p)).filter((c,p,_)=>!p||0!==h(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=h(c,e),_=h(c,t);if(0===p)i[0]=e.Ke();else if(p>0&&_<0)i.push(c),i.push(c.Ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,S,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,S,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ke)}getMinOffset(e,t){return ie.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||st())).next(ke)}}function O(n){return Or(n,"collectionParents")}function H(n){return Or(n,"indexEntries")}function X(n){return Or(n,"indexConfiguration")}function ve(n){return Or(n,"indexState")}function ke(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;t0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}const Ge={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class We{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new We(e,We.DEFAULT_COLLECTION_PERCENTILE,We.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Et(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Z({range:c},(T,M,L)=>(p++,L.delete()));u.push(_.next(()=>{Tt(1===p)}));const b=[];for(const T of t.mutations){const M=FI(e,T.key.path,t.batchId);u.push(i.delete(M)),b.push(T.key)}return ie.waitFor(u).next(()=>b)}function Se(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}We.DEFAULT_COLLECTION_PERCENTILE=10,We.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,We.DEFAULT=new We(41943040,We.DEFAULT_COLLECTION_PERCENTILE,We.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),We.DISABLED=new We(-1,0,0);class Dt{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Dt(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gn(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=$s(e),c=gn(e);return c.add({}).next(p=>{Tt("number"==typeof p);const _=new F0(p,t,r,i),b=function(L,G,Z){const ue=Z.baseMutations.map(Ye=>Ph(L.re,Ye)),_e=Z.mutations.map(Ye=>Ph(L.re,Ye));return{userId:G,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ue,mutations:_e}}(this.It,this.userId,_),T=[];let M=new Dn((L,G)=>Vt(L.canonicalString(),G.canonicalString()));for(const L of i){const G=FI(this.userId,L.key.path,p);M=M.add(L.key.path.popLast()),T.push(c.put(b)),T.push(u.put(G,qT))}return M.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),ie.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return gn(e).get(t).next(r=>r?(Tt(r.userId===this.userId),kh(this.It,r)):null)}Tn(e,t){return this.In[t]?ie.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return gn(e).Z({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(Tt(p.batchId>=r),u=kh(this.It,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return gn(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gn(e).W("userMutationsIndex",t).next(r=>r.map(i=>kh(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Lc(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return $s(e).Z({range:i},(c,p,_)=>{const[b,T,M]=c,L=ru(T);if(b===this.userId&&t.path.isEqual(L))return gn(e).get(M).next(G=>{if(!G)throw st();Tt(G.userId===this.userId),u.push(kh(this.It,G))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Vt);const i=[];return t.forEach(u=>{const c=Lc(this.userId,u.path),p=IDBKeyRange.lowerBound(c),_=$s(e).Z({range:p},(b,T,M)=>{const[L,G,Z]=b,ue=ru(G);L===this.userId&&u.path.isEqual(ue)?r=r.add(Z):M.done()});i.push(_)}),ie.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Lc(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Dn(Vt);return $s(e).Z({range:c},(_,b,T)=>{const[M,L,G]=_,Z=ru(L);M===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(p=p.add(G)):T.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(gn(e).get(u).next(c=>{if(null===c)throw st();Tt(c.userId===this.userId),r.push(kh(this.It,c))}))}),ie.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Et(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ie.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $s(e).Z({range:r},(u,c,p)=>{if(u[0]===this.userId){const _=ru(u[1]);i.push(_)}else p.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return hn(e,this.userId,t)}Rn(e){return Iy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function hn(n,e,t){const r=Lc(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return $s(n).Z({range:u,X:!0},(p,_,b)=>{const[T,M,L]=p;T===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function gn(n){return Or(n,"mutations")}function $s(n){return Or(n,"documentMutations")}function Iy(n){return Or(n,"mutationQueues")}class iu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new iu(0)}static vn(){return new iu(-1)}}class B0{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new iu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Nt.fromTimestamp(new kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bl(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return bl(e).Z((c,p)=>{const _=Vp(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>ie.waitFor(u)).next(()=>i)}forEachTarget(e,t){return bl(e).Z((r,i)=>{const u=Vp(i);t(u)})}Vn(e){return Dy(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}Sn(e,t){return Dy(e).put("targetGlobalKey",t)}Dn(e,t){return bl(e).put(qI(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ja(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return bl(e).Z({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const b=Vp(p);Dh(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=aa(e);return t.forEach(c=>{const p=Hi(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),ie.waitFor(i)}removeMatchingKeys(e,t,r){const i=aa(e);return ie.forEach(t,u=>{const c=Hi(u.path);return ie.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=aa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=aa(e);let u=$t();return i.Z({range:r,X:!0},(c,p,_)=>{const b=ru(c[1]),T=new ze(b);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Hi(t.path),i=IDBKeyRange.bound([r],[Wb(r)],!1,!0);let u=0;return aa(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,p],_,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}se(e,t){return bl(e).get(t).next(r=>r?Vp(r):null)}}function bl(n){return Or(n,"targets")}function Dy(n){return Or(n,"targetGlobal")}function aa(n){return Or(n,"targetDocuments")}function Cy([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class j0{constructor(e){this.xn=e,this.buffer=new Dn(Cy),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Cy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ac(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ka(r)}yield t.Fn(3e5)}))}}class UR{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve($i.at);const r=new j0(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Ge)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ge):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,p,_,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),wp()<=cs.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${M} documents in `+(b-_)+`ms\nTotal Duration: ${b-T}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class BR{constructor(e,t){this.db=e,this.garbageCollector=new UR(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return ZI(e,r)}removeReference(e,t,r){return ZI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ZI(e,t)}Gn(e,t){return function(r,i){let u=!1;return Iy(r).tt(c=>hn(r,c,i).next(p=>(p&&(u=!0),ie.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,p)=>{if(p<=t){const _=this.Gn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Nt.min()),aa(e).delete([0,Hi(c.path)])))});i.push(_)}}).next(()=>ie.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ZI(e,t)}Kn(e,t){const r=aa(e);let i,u=$i.at;return r.Z({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:b})=>{0===c?(u!==$i.at&&t(new ze(ru(i)),u),u=b,i=_):u=$i.at}).next(()=>{u!==$i.at&&t(new ze(ru(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ZI(n,e){return aa(n).put((r=n.currentSequenceNumber,{targetId:0,path:Hi(e.path),sequenceNumber:r}));var r}class yx{constructor(){this.changes=new eu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jR{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Up(e).put(r)}removeEntry(e,t,r){return Up(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Ey(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return Up(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(H0(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return Up(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(H0(t))},(i,u)=>{r={document:this.jn(t,u),size:Se(u)}}).next(()=>r)}getEntries(e,t){let r=Hn();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=Hn(),i=new jn(ze.comparator);return this.zn(e,t,(u,c)=>{const p=this.jn(u,c);r=r.insert(u,p),i=i.insert(u,Se(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ie.resolve();let i=new Dn(Ex);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(H0(i.first()),H0(i.last())),c=i.getIterator();let p=c.getNext();return Up(e).Z({index:"documentKeyIndex",range:u},(_,b,T)=>{const M=ze.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&Ex(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?T.j(H0(p)):T.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Ey(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Up(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=Hn();for(const _ of c){const b=this.jn(ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=Hn();const c=wx(t,r),p=wx(t,ps.max());return Up(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,b,T)=>{const M=this.jn(ze.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new $R(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vx(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Qn(e,t){return vx(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function GI(n,e){let t;if(e.document)t=A0(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=Oh(e.noDocument.readTime);t=Tn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=ze.fromSegments(e.unknownDocument.path),i=Oh(e.unknownDocument.version);t=Tn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new kn(r[0],r[1]);return Nt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return Tn.newInvalidDocument(e)}}function _x(n){return new jR(n)}class $R extends yx{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new eu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Dn((u,c)=>Vt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const _=wy(this.Yn.It,c);i=i.add(u.path.popLast()),r+=Se(_)-p.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=wy(this.Yn.It,c.convertToNoDocument(Nt.min()));t.push(this.Yn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function vx(n){return Or(n,"remoteDocumentGlobal")}function Up(n){return Or(n,"remoteDocumentsV14")}function H0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wx(n,e){const t=e.documentKey.path.toArray();return[n,Ey(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ex(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Vt(t[u],r[u]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class HR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bx{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&dy(r.mutation,i,gi.empty(),kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$t()){const i=_r();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=Oc();return u.forEach((p,_)=>{c=c.insert(p,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=_r();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$t()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let u=Hn();const c=kc(),p=kc();return t.forEach((_,b)=>{const T=r.get(b.key);i.has(b.key)&&(void 0===T||T.mutation instanceof js)?u=u.insert(b.key,b):void 0!==T&&(c.set(b.key,T.mutation.getFieldMask()),dy(T.mutation,b,T.mutation.getFieldMask(),kn.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,T)=>c.set(b,T)),t.forEach((b,T)=>{var M;return p.set(b,new HR(T,null!==(M=c.get(b))&&void 0!==M?M:null))}),p))}recalculateAndSaveOverlays(e,t){const r=kc();let i=new jn((c,p)=>c-p),u=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let T=r.get(_)||gi.empty();T=p.applyToLocalView(b,T),r.set(_,T);const M=(i.get(p.batchId)||$t()).add(_);i=i.insert(p.batchId,M)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),b=_.key,T=_.value,M=TI();T.forEach(L=>{if(!u.has(L)){const G=vI(t.get(L),r.get(L));null!==G&&M.set(L,G),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,M))}return ie.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):d0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ie.resolve(_r());let p=-1,_=u;return c.next(b=>ie.forEach(b,(T,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),u.get(T)?ie.resolve():this.getBaseDocument(e,T,M).next(L=>{_=_.insert(T,L)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,$t())).next(T=>({batchId:p,changes:CI(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let i=Oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Oc();return this.indexManager.getCollectionParents(e,i).next(c=>ie.forEach(c,p=>{const _=(b=t,T=p.child(i),new wl(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((T,M)=>{u=u.insert(T,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,_)=>{const b=_.getKey();null===i.get(b)&&(i=i.insert(b,Tn.newInvalidDocument(b)))});let c=Oc();return i.forEach((p,_)=>{const b=u.get(p);void 0!==b&&dy(b.mutation,_,gi.empty(),kn.now()),cy(t,_)&&(c=c.insert(p,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ie.resolve(Tn.newInvalidDocument(t))}}class GR{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ie.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Wr(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:V0(r.bundledQuery),readTime:Wr(r.readTime)}),ie.resolve();var r}}class qR{constructor(){this.overlays=new jn(ze.comparator),this.es=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_r();return ie.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=_r(),u=t.length+1,c=new ze(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new jn((b,T)=>b-T);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let T=u.get(b.largestBatchId);null===T&&(T=_r(),u=u.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const p=_r(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,T)=>p.set(b,T)),!(p.size()>=i)););return ie.resolve(p)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new vy(t,r));let u=this.es.get(t);void 0===u&&(u=$t(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class XT{constructor(){this.ns=new Dn(vi.ss),this.rs=new Dn(vi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new vi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new vi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new sn([])),r=new vi(t,e),i=new vi(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new sn([])),r=new vi(t,e),i=new vi(t,e+1);let u=$t();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new vi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||Vt(e._s,t._s)}static os(e,t){return Vt(e._s,t._s)||ze.comparator(e.key,t.key)}}class zR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Dn(vi.ss)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new F0(u,t,r,i);this.mutationQueue.push(c);for(const p of i)this.gs=this.gs.add(new vi(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),i=new vi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const p=this.ys(c._s);u.push(p)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Vt);return t.forEach(i=>{const u=new vi(i,0),c=new vi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],p=>{r=r.add(p._s)})}),ie.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const c=new vi(new ze(u),0);let p=new Dn(Vt);return this.gs.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(_._s)),!0)},c),ie.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ie.forEach(t.mutations,i=>{const u=new vi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new vi(t,0),i=this.gs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WR{constructor(e){this.Es=e,this.docs=new jn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Hn();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Tn.newInvalidDocument(i))}),ie.resolve(r)}getAllFromCollection(e,t,r){let i=Hn();const u=new ze(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||t0(Yb(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ie.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}As(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ZR(this)}getSize(e){return ie.resolve(this.size)}}class ZR extends yx{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class KR{constructor(e){this.persistence=e,this.Rs=new eu(t=>Ja(t),Dh),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new XT,this.targetCount=0,this.vs=iu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ie.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new iu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Dn(t),ie.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ie.waitFor(u).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Ps.containsKey(t))}}class Ix{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new $i(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new KR(this),this.indexManager=new E,this.remoteDocumentCache=new WR(r=>this.referenceDelegate.xs(r)),this.It=new ZT(t),this.Ns=new GR(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new zR(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new YR(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return ie.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class YR extends _h{constructor(e){super(),this.currentSequenceNumber=e}}class KI{constructor(e){this.persistence=e,this.Fs=new XT,this.$s=null}static Bs(e){return new KI(e)}get Ls(){if(this.$s)return this.$s;throw st()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ls,r=>{const i=ze.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Nt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ie.or([()=>ie.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class QR{constructor(e){this.It=e}$(e,t,r,i){const u=new Ip("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kI,{unique:!0}),p.createObjectStore("documentMutations"),Dx(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ie.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),Dx(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").W().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kI,{unique:!0});const T=_.store("mutations"),M=b.map(L=>T.put(L));return ie.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:hx});_.createIndex("collectionPathOverlayIndex",fx,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",UI,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:LI});_.createIndex("documentKeyIndex",Vc),_.createIndex("collectionGroupIndex",VI)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:k0}).createIndex("sequenceNumberIndex",yy,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:cx}).createIndex("documentKeyIndex",dx,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Se(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ie.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(p=>ie.forEach(p,_=>{Tt(_.userId===u.userId);const b=kh(this.It,_);return Et(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,p)=>{const _=new sn(c),b=[0,Hi(_)];u.push(t.get(b).next(T=>T?ie.resolve():t.put({targetId:0,path:Hi(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ie.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:O0});const r=t.store("collectionParents"),i=new I,u=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:Hi(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const _=new sn(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,_],b)=>{const T=ru(p);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=Vp(i),c=qI(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const p=t.store("remoteDocumentsV14"),_=(b=c,b.document?new ze(sn.fromString(b.document.name).popFirst(5)):b.noDocument?ze.fromSegments(b.noDocument.path):b.unknownDocument?ze.fromSegments(b.unknownDocument.path):st()).path.toArray();var b;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(T))}).next(()=>ie.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=_x(this.It),u=new Ix(KI.Bs,this.It.re);return r.W().next(c=>{const p=new Map;return c.forEach(_=>{var b;let T=null!==(b=p.get(_.userId))&&void 0!==b?b:$t();kh(this.It,_).keys().forEach(M=>T=T.add(M)),p.set(_.userId,T)}),ie.forEach(p,(_,b)=>{const T=new qr(b),M=U0.oe(this.It,T),L=u.getIndexManager(T),G=Dt.oe(T,this.It,L,u.referenceDelegate);return new bx(i,G,M,L).recalculateAndSaveOverlaysForDocumentKeys(new _y(t,$i.at),_).next()})})}}function Dx(n){n.createObjectStore("targetDocuments",{keyPath:R0}).createIndex("documentTargetsIndex",zT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",P0,{unique:!0}),n.createObjectStore("targetGlobal")}const eS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tS{constructor(e,t,r,i,u,c,p,_,b,T,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=p,this.Js=b,this.Ys=T,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!tS.C())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new BR(this,i),this.ii=t+"main",this.It=new ZT(_),this.ri=new Bs(this.ii,this.Xs,new QR(this.It)),this.Cs=new B0(this.referenceDelegate,this.It),this.remoteDocumentCache=_x(this.It),this.Ns=new px,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,eS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new $i(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>YI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ac(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return G0(e).get("owner").next(t=>ie.resolve(this.mi(t)))}gi(e){return YI(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Or(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),p=u.filter(_=>-1===c.indexOf(_));return ie.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ie.resolve(!0):G0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,eS);return!1}}return!(!this.networkEnabled||!this.inForeground)||YI(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new _y(t,$i.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>YI(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Dt.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new N(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return U0.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?HI:14===c?$I:13===c?jI:12===c?WT:11===c?BI:void st();var c;let p;return this.ri.runTransaction(e,i,u,_=>(p=new _y(_,this.Ss?this.Ss.next():$i.at),"readwrite-primary"===t?this.fi(p).next(b=>!!b||this.di(p)).next(b=>{if(!b)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(ce.FAILED_PRECONDITION,Qb);return r(p)}).next(b=>this.wi(p).next(()=>b)):this.Vi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return G0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,eS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return G0(e).put("owner",t)}static C(){return Bs.C()}_i(e){const t=G0(e);return t.get("owner").next(r=>this.mi(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Yt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function G0(n){return Or(n,"owner")}function YI(n){return Or(n,"clientMetadata")}function nS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class rS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=$t(),i=$t();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new rS(e,t.fromCache,r,i)}}class Cx{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(fI(t))return ie.resolve(null);let r=_i(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ly(t,null,"F"),r=_i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=$t(...u);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.Fi(t,p);return this.$i(t,b,c,_.readTime)?this.ki(e,ly(t,null,"F")):this.Bi(e,b,t,_)}))})))}Oi(e,t,r,i){return fI(t)||i.isEqual(Nt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Mi(e,t):(wp()<=cs.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),f0(t)),this.Bi(e,c,t,Kb(i,-1)))})}Fi(e,t){let r=new Dn(g0(e));return t.forEach((i,u)=>{cy(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return wp()<=cs.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",f0(t)),this.Ni.getDocumentsMatchingQuery(e,t,ps.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class JR{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new jn(Vt),this.qi=new eu(u=>Ja(u),Dh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bx(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Tx(n,e,t,r){return new JR(n,e,t,r)}function Sx(n,e){return iS.apply(this,arguments)}function iS(){return iS=(0,ye.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let _=$t();for(const b of i){c.push(b.batchId);for(const T of b.mutations)_=_.add(T.key)}for(const b of u){p.push(b.batchId);for(const T of b.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(b=>({ji:b,removedBatchIds:c,addedBatchIds:p}))})})}),iS.apply(this,arguments)}function XR(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,b){const T=_.batch,M=T.keys();let L=ie.resolve();return M.forEach(G=>{L=L.next(()=>b.getEntry(p,G)).next(Z=>{const ue=_.docVersions.get(G);Tt(null!==ue),Z.version.compareTo(ue)<0&&(T.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),b.addEntry(Z)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(p,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=$t();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(p=p.add(c.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Ax(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function eO(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const p=[];e.targetChanges.forEach((T,M)=>{const L=i.get(M);if(!L)return;p.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,M)));let G=L.withSequenceNumber(u.currentSequenceNumber);var Z,ue,_e;e.targetMismatches.has(M)?G=G.withResumeToken(Rr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,r)),i=i.insert(M,G),ue=G,_e=T,(0===(Z=L).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,G))});let _=Hn(),b=$t();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),p.push(Mx(u,c,e.documentUpdates).next(T=>{_=T.Wi,b=T.zi})),!r.isEqual(Nt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(T)}return ie.waitFor(p).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.Ui=i,u))}function Mx(n,e,t){let r=$t(),i=$t();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Hn();return t.forEach((p,_)=>{const b=u.get(p);_.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(Nt.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):Pe("LocalStore","Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",_.version)}),{Wi:c,zi:i}})}function tO(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ty(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,ie.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new oa(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Sy(n,e,t){return sS.apply(this,arguments)}function sS(){return sS=(0,ye.Z)(function*(n,e,t){const r=qe(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Ac(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),sS.apply(this,arguments)}function QI(n,e,t){const r=qe(n);let i=Nt.min(),u=$t();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,b){const T=qe(p),M=T.qi.get(b);return void 0!==M?ie.resolve(T.Ui.get(M)):T.Cs.getTargetData(_,b)}(r,c,_i(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Nt.min(),t?u:$t())).next(p=>(Px(r,p0(e),p),{documents:p,Hi:u})))}function xx(n,e){const t=qe(n),r=qe(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function Nx(n,e){const t=qe(n),r=t.Ki.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Kb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Px(t,e,i),i))}function Px(n,e,t){let r=n.Ki.get(e)||Nt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function oS(){return oS=(0,ye.Z)(function*(n,e,t,r){const i=qe(n);let u=$t(),c=Hn();for(const b of t){const T=e.Ji(b.metadata.name);b.document&&(u=u.add(T));const M=e.Yi(b);M.setReadTime(e.Xi(b.metadata.readTime)),c=c.insert(T,M)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Ty(i,(b=r,_i(Th(sn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>Mx(b,p,c).next(T=>(p.apply(b),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.Cs.addMatchingKeys(b,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,T.Wi,T.zi)).next(()=>T.Wi)))}),oS.apply(this,arguments)}function rO(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,ye.Z)(function*(n,e,t=$t()){const r=yield Ty(n,_i(V0(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Wr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(Rr.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(p.targetId,p),i.Cs.updateTargetData(u,p).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),aS.apply(this,arguments)}function Rx(n,e){return`firestore_clients_${n}_${e}`}function Ox(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function uS(n,e){return`firestore_targets_${n}_${e}`}class JI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Ne(i.error.code,i.error.message))),c?new JI(e,t,i.state,u):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class q0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Ne(r.error.code,r.error.message))),u?new q0(e,r.state,i):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class XI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Op();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=ey(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new XI(e,u):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lS(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class cS{constructor(){this.activeTargetIds=Op()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dS{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new jn(Vt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=Rx(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new cS),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(Rx(e.persistenceKey,i));if(u){const c=XI.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(uS(this.persistenceKey,e));if(r){const i=q0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(uS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=$i.at;if(null!=u)try{const p=JSON.parse(u);Tt("number"==typeof p),c=p}catch(p){mr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==$i.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new JI(this.currentUser,e,t,r),u=Ox(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=Ox(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=uS(this.persistenceKey,e),u=new q0(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return XI.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return JI.Zi(new qr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return q0.Zi(i,t)}yr(e){return lS.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],p=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Br(c,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Op();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class kx{constructor(){this.Lr=new cS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new cS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iO{qr(e){}shutdown(){}}class Fx{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const sO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oO{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class aO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const c=this.ho(e,t);Pe("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,u),this.fo(e,c,p,r).then(_=>(Pe("RestConnection","Received: ",_),_),_=>{throw Sc("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u,c){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ph,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${sO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const p=new Bb;p.setWithCredentials(!0),p.listenOnce(cT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Kv.NO_ERROR:const b=p.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Kv.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Kv.HTTP_ERROR:const T=p.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',T,"response text:",p.getResponseText()),T>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const L=function(G){const Z=G.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Z)>=0?Z:ce.UNKNOWN}(M.status);c(new Ne(L,M.message))}else c(new Ne(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=uT(),c=lT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new dT({})),this.lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=i.join("");Pe("Connection","Creating WebChannel: "+_,p);const b=u.createWebChannel(_,p);let T=!1,M=!1;const L=new oO({Hr:Z=>{M?Pe("Connection","Not sending because WebChannel is closed:",Z):(T||(Pe("Connection","Opening WebChannel transport."),b.open(),T=!0),Pe("Connection","WebChannel sending:",Z),b.send(Z))},Jr:()=>b.close()}),G=(Z,ue,_e)=>{Z.listen(ue,Ye=>{try{_e(Ye)}catch(at){setTimeout(()=>{throw at},0)}})};return G(b,zm.EventType.OPEN,()=>{M||Pe("Connection","WebChannel transport opened.")}),G(b,zm.EventType.CLOSE,()=>{M||(M=!0,Pe("Connection","WebChannel transport closed"),L.io())}),G(b,zm.EventType.ERROR,Z=>{M||(M=!0,Sc("Connection","WebChannel transport errored:",Z),L.io(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),G(b,zm.EventType.MESSAGE,Z=>{var ue;if(!M){const _e=Z.data[0];Tt(!!_e);const Ye=_e,at=Ye.error||(null===(ue=Ye[0])||void 0===ue?void 0:ue.error);if(at){Pe("Connection","WebChannel received error:",at);const gt=at.status;let ct=function(Pt){const ln=Ar[Pt];if(void 0!==ln)return _0(ln)}(gt),St=at.message;void 0===ct&&(ct=ce.INTERNAL,St="Unknown error status: "+gt+" with message "+at.message),M=!0,L.io(new Ne(ct,St)),b.close()}else Pe("Connection","WebChannel received:",_e),L.ro(_e)}}),G(c,Ub.STAT_EVENT,Z=>{Z.stat===Yv.PROXY?Pe("Connection","Detected buffering proxy"):Z.stat===Yv.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function Lx(){return typeof window<"u"?window:null}function eD(){return typeof document<"u"?document:null}function z0(n){return new LT(n,!0)}class hS{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Vx{constructor(e,t,r,i,u,c,p,_){this.Hs=e,this.vo=r,this.Vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new hS(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ye.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ye.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}jo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uO extends Vx{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function PI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:st(),i=e.targetChange.targetIds||[],u=function(_,b){return _.gt?(Tt(void 0===b||"string"==typeof b),Rr.fromBase64String(b||"")):(Tt(void 0===b||b instanceof Uint8Array),Rr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const b=void 0===_.code?ce.UNKNOWN:_0(_.code);return new Ne(b,_.message||"")}(c);t=new v0(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=wo(n,r.document.name),u=Wr(r.document.updateTime),c=new yi({mapValue:{fields:r.document.fields}}),p=Tn.newFoundDocument(i,u,c);t=new Fp(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=wo(n,r.document),u=r.readTime?Wr(r.readTime):Nt.min(),c=Tn.newNoDocument(i,u);t=new Fp([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=wo(n,r.document);t=new Fp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,u=new OT(r.count||0);t=new AI(r.targetId,u)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Nt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Nt.min():u.readTime?Wr(u.readTime):Nt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=py(this.It),t.addTarget=function(i,u){let c;const p=u.target;return c=ry(p)?{documents:M0(i,p)}:{query:x0(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=xI(i,u.resumeToken):u.snapshotVersion.compareTo(Nt.min())>0&&(c.readTime=hy(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function RI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=py(this.It),t.removeTarget=e,this.Lo(t)}}class lO extends Vx{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function my(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let u=Wr(r.updateTime?r.updateTime:i);return u.isEqual(Nt.min())&&(u=Wr(i)),new _I(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.tu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=py(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ph(this.It,r))};this.Lo(t)}}class cO extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=i,this.su=!1}iu(){if(this.su)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ce.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.So._o(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ce.UNKNOWN,u.toString())})}terminate(){this.su=!0}}class hO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(mr(t),this.uu=!1):Pe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class fO{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.qr(p=>{r.enqueueAndForget((0,ye.Z)(function*(){var _;Bc(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ye.Z)(function*(b){const T=qe(b);T.wu.add(4),yield Ay(T),T.yu.set("Unknown"),T.wu.delete(4),yield W0(T)}),function(b){return _.apply(this,arguments)})(c))}))}),this.yu=new hO(r,i)}}function W0(n){return pS.apply(this,arguments)}function pS(){return pS=(0,ye.Z)(function*(n){if(Bc(n))for(const e of n.mu)yield e(!0)}),pS.apply(this,arguments)}function Ay(n){return gS.apply(this,arguments)}function gS(){return gS=(0,ye.Z)(function*(n){for(const e of n.mu)yield e(!1)}),gS.apply(this,arguments)}function tD(n,e){const t=qe(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),_S(t)?yS(t):xy(t).Oo()&&mS(t,e))}function Z0(n,e){const t=qe(n),r=xy(t);t._u.delete(e),r.Oo()&&Ux(t,e),0===t._u.size&&(r.Oo()?r.$o():Bc(t)&&t.yu.set("Unknown"))}function mS(n,e){n.pu.Mt(e.targetId),xy(n).Ho(e)}function Ux(n,e){n.pu.Mt(e),xy(n).Jo(e)}function yS(n){n.pu=new w0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),xy(n).start(),n.yu.cu()}function _S(n){return Bc(n)&&!xy(n).ko()&&n._u.size>0}function Bc(n){return 0===qe(n).wu.size}function Bx(n){n.pu=void 0}function pO(n){return vS.apply(this,arguments)}function vS(){return vS=(0,ye.Z)(function*(n){n._u.forEach((e,t)=>{mS(n,e)})}),vS.apply(this,arguments)}function gO(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,ye.Z)(function*(n,e){Bx(n),_S(n)?(n.yu.lu(e),yS(n)):n.yu.set("Unknown")}),wS.apply(this,arguments)}function mO(n,e,t){return ES.apply(this,arguments)}function ES(){return ES=(0,ye.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof v0&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i._u.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i._u.delete(p),i.pu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nD(n,r)}else if(e instanceof Fp?n.pu.Gt(e):e instanceof AI?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Nt.min()))try{const r=yield Ax(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.te(u);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const b=i._u.get(_);b&&i._u.set(_,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const _=i._u.get(p);if(!_)return;i._u.set(p,_.withResumeToken(Rr.EMPTY_BYTE_STRING,_.snapshotVersion)),Ux(i,p);const b=new oa(_.target,p,1,_.sequenceNumber);mS(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield nD(n,r)}var r}),ES.apply(this,arguments)}function nD(n,e,t){return bS.apply(this,arguments)}function bS(){return bS=(0,ye.Z)(function*(n,e,t){if(!Ac(e))throw e;n.wu.add(1),yield Ay(n),n.yu.set("Offline"),t||(t=()=>Ax(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield W0(n)}))}),bS.apply(this,arguments)}function jx(n,e){return e().catch(t=>nD(n,t,e))}function My(n){return IS.apply(this,arguments)}function IS(){return IS=(0,ye.Z)(function*(n){const e=qe(n),t=Lh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;yO(e);)try{const i=yield tO(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,_O(e,i)}catch(i){yield nD(e,i)}$x(e)&&Hx(e)}),IS.apply(this,arguments)}function yO(n){return Bc(n)&&n.du.length<10}function _O(n,e){n.du.push(e);const t=Lh(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function $x(n){return Bc(n)&&!Lh(n).ko()&&n.du.length>0}function Hx(n){Lh(n).start()}function vO(n){return DS.apply(this,arguments)}function DS(){return DS=(0,ye.Z)(function*(n){Lh(n).nu()}),DS.apply(this,arguments)}function wO(n){return CS.apply(this,arguments)}function CS(){return CS=(0,ye.Z)(function*(n){const e=Lh(n);for(const t of n.du)e.Zo(t.mutations)}),CS.apply(this,arguments)}function EO(n,e,t){return TS.apply(this,arguments)}function TS(){return TS=(0,ye.Z)(function*(n,e,t){const r=n.du.shift(),i=L0.from(r,e,t);yield jx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield My(n)}),TS.apply(this,arguments)}function bO(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,ye.Z)(function*(n,e){var t;e&&Lh(n).Xo&&(yield(t=(0,ye.Z)(function*(r,i){if(II(u=i.code)&&u!==ce.ABORTED){const c=r.du.shift();Lh(r).Fo(),yield jx(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield My(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),$x(n)&&Hx(n)}),SS.apply(this,arguments)}function Gx(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,ye.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Bc(t);t.wu.add(3),yield Ay(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield W0(t)}),AS.apply(this,arguments)}function MS(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,ye.Z)(function*(n,e){const t=qe(n);e?(t.wu.delete(2),yield W0(t)):e||(t.wu.add(2),yield Ay(t),t.yu.set("Unknown"))}),xS.apply(this,arguments)}function xy(n){return n.Iu||(n.Iu=function(e,t,r){const i=qe(e);return i.iu(),new uO(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:pO.bind(null,n),Zr:gO.bind(null,n),zo:mO.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Fo(),_S(n)?yS(n):n.yu.set("Unknown")):(yield n.Iu.stop(),Bx(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Lh(n){return n.Tu||(n.Tu=function(e,t,r){const i=qe(e);return i.iu(),new lO(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:vO.bind(null,n),Zr:bO.bind(null,n),eu:wO.bind(null,n),tu:EO.bind(null,n)}),n.mu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Tu.Fo(),yield My(n)):(yield n.Tu.stop(),n.du.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class NS{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new NS(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ny(n,e){if(mr("AsyncQueue",`${e}: ${n}`),Ac(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Py{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Oc(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new Py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Py;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class qx{constructor(){this.Eu=new jn(ze.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):st():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ry{constructor(e,t,r,i,u,c,p,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(p=>{c.push({type:0,doc:p})}),new Ry(e,t,Py.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class IO{constructor(){this.Ru=void 0,this.listeners=[]}}class DO{constructor(){this.queries=new eu(e=>h0(e),Mp),this.onlineState="Unknown",this.bu=new Set}}function PS(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new IO),i)try{u.Ru=yield t.onListen(r)}catch(c){const p=Ny(c,`Initialization of query '${f0(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.vu(u.Ru)&&FS(t)}),RS.apply(this,arguments)}function OS(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),kS.apply(this,arguments)}function CO(n,e){const t=qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.vu(i)&&(r=!0);c.Ru=i}}r&&FS(t)}function TO(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function FS(n){n.bu.forEach(e=>{e.next()})}class LS{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ry(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ry.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class SO{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class zx{constructor(e){this.It=e}Ji(e){return wo(this.It,e)}Yi(e){return e.metadata.exists?A0(this.It,e.document,!1):Tn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Wr(e)}}class AO{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Wx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=sn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new zx(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||$t()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function nO(n,e,t,r){return oS.apply(this,arguments)}(e.localStore,new zx(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield rO(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Wx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Zx{constructor(e){this.key=e}}class Kx{constructor(e){this.key=e}}class Yx{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=$t(),this.mutatedKeys=$t(),this.Gu=g0(e),this.Qu=new Py(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new qx,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,M)=>{const L=i.get(T),G=cy(this.query,M)?M:null,Z=!!L&&this.mutatedKeys.has(L.key),ue=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let _e=!1;L&&G?L.data.isEqual(G.data)?Z!==ue&&(r.track({type:3,doc:G}),_e=!0):this.Hu(L,G)||(r.track({type:2,doc:G}),_e=!0,(_&&this.Gu(G,_)>0||b&&this.Gu(G,b)<0)&&(p=!0)):!L&&G?(r.track({type:0,doc:G}),_e=!0):L&&!G&&(r.track({type:1,doc:L}),_e=!0,(_||b)&&(p=!0)),_e&&(G?(c=c.add(G),u=ue?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Qu:c,zu:r,$i:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,T)=>function(M,L){const G=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return G(M)-G(L)}(b.type,T.type)||this.Gu(b.doc,T.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.qu;return this.qu=p,0!==u.length||_?{snapshot:new Ry(this.query,e.Qu,i,u,e.mutatedKeys,0===p,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new qx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=$t(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Kx(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Zx(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=$t();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ry.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class MO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xO{constructor(e){this.key=e,this.nc=!1}}class NO{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new eu(p=>h0(p),Mp),this.rc=new Map,this.oc=new Set,this.uc=new jn(ze.comparator),this.cc=new Map,this.ac=new XT,this.hc={},this.lc=new Map,this.fc=iu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function PO(n,e){return VS.apply(this,arguments)}function VS(){return VS=(0,ye.Z)(function*(n,e){const t=aA(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const c=yield Ty(t.localStore,_i(e));t.isPrimaryClient&&tD(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield US(t,e,r,"current"===p,c.resumeToken)}return i}),VS.apply(this,arguments)}function US(n,e,t,r,i){return BS.apply(this,arguments)}function BS(){return BS=(0,ye.Z)(function*(n,e,t,r,i){n._c=(M,L,G)=>{return(Z=(0,ye.Z)(function*(ue,_e,Ye,at){let gt=_e.view.Wu(Ye);gt.$i&&(gt=yield QI(ue.localStore,_e.query,!1).then(({documents:Pt})=>_e.view.Wu(Pt,gt)));const ct=at&&at.targetChanges.get(_e.targetId),St=_e.view.applyChanges(gt,ue.isPrimaryClient,ct);return YS(ue,_e.targetId,St.Xu),St.snapshot}),function(ue,_e,Ye,at){return Z.apply(this,arguments)})(n,M,L,G);var Z};const u=yield QI(n.localStore,e,!0),c=new Yx(e,u.Hi),p=c.Wu(u.documents),_=Nh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),b=c.applyChanges(p,n.isPrimaryClient,_);YS(n,t,b.Xu);const T=new MO(e,t,c);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),BS.apply(this,arguments)}function RO(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,ye.Z)(function*(n,e){const t=qe(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!Mp(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Sy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Z0(t.remoteStore,r.targetId),Oy(t,r.targetId)}).catch(Ka))):(Oy(t,r.targetId),yield Sy(t.localStore,r.targetId,!0))}),jS.apply(this,arguments)}function $S(){return $S=(0,ye.Z)(function*(n,e,t){const r=uA(n);try{const i=yield function(u,c){const p=qe(u),_=kn.now(),b=c.reduce((L,G)=>L.add(G.key),$t());let T,M;return p.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=Hn(),Z=$t();return p.Gi.getEntries(L,b).next(ue=>{G=ue,G.forEach((_e,Ye)=>{Ye.isValidDocument()||(Z=Z.add(_e))})}).next(()=>p.localDocuments.getOverlayedDocuments(L,G)).next(ue=>{T=ue;const _e=[];for(const Ye of c){const at=NT(Ye,T.get(Ye.key).overlayedDocument);null!=at&&_e.push(new js(Ye.key,at,u0(at.value.mapValue),Jn.exists(!0)))}return p.mutationQueue.addMutationBatch(L,_,_e,c)}).next(ue=>{M=ue;const _e=ue.applyToLocalDocumentSet(T,Z);return p.documentOverlayCache.saveOverlays(L,ue.batchId,_e)})}).then(()=>({batchId:M.batchId,changes:CI(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let _=u.hc[u.currentUser.toKey()];_||(_=new jn(Vt)),_=_.insert(c,p),u.hc[u.currentUser.toKey()]=_}(r,i.batchId,t),yield jc(r,i.changes),yield My(r.remoteStore)}catch(i){const u=Ny(i,"Failed to persist write");t.reject(u)}}),$S.apply(this,arguments)}function Qx(n,e){return HS.apply(this,arguments)}function HS(){return HS=(0,ye.Z)(function*(n,e){const t=qe(n);try{const r=yield eO(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.cc.get(u);c&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?Tt(c.nc):i.removedDocuments.size>0&&(Tt(c.nc),c.nc=!1))}),yield jc(t,r,e)}catch(r){yield Ka(r)}}),HS.apply(this,arguments)}function Jx(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=qe(u);p.onlineState=c;let _=!1;p.queries.forEach((b,T)=>{for(const M of T.listeners)M.Pu(c)&&(_=!0)}),_&&FS(p)}(r.eventManager,e),i.length&&r.sc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kO(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,ye.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let c=new jn(ze.comparator);c=c.insert(u,Tn.newNoDocument(u,Nt.min()));const p=$t().add(u),_=new kp(Nt.min(),new Map,new Dn(Vt),c,p);yield Qx(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),QS(r)}else yield Sy(r.localStore,e,!1).then(()=>Oy(r,e,t)).catch(Ka)}),GS.apply(this,arguments)}function FO(n,e){return qS.apply(this,arguments)}function qS(){return qS=(0,ye.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield XR(t.localStore,e);KS(t,r,null),ZS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield jc(t,i)}catch(i){yield Ka(i)}}),qS.apply(this,arguments)}function LO(n,e,t){return zS.apply(this,arguments)}function zS(){return zS=(0,ye.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(u,c){const p=qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return p.mutationQueue.lookupMutationBatch(_,c).next(T=>(Tt(null!==T),b=T.keys(),p.mutationQueue.removeMutationBatch(_,T))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,b,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>p.localDocuments.getDocuments(_,b))})}(r.localStore,e);KS(r,e,t),ZS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield jc(r,i)}catch(i){yield Ka(i)}}),zS.apply(this,arguments)}function WS(){return WS=(0,ye.Z)(function*(n,e){const t=qe(n);Bc(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Ny(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),WS.apply(this,arguments)}function ZS(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function KS(n,e,t){const r=qe(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Oy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||Xx(n,r)})}function Xx(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Z0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),QS(n))}function YS(n,e,t){for(const r of t)r instanceof Zx?(n.ac.addReference(r.key,e),UO(n,r)):r instanceof Kx?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||Xx(n,r.key)):st()}function UO(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.oc.add(r),QS(n))}function QS(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ze(sn.fromString(e)),r=n.fc.next();n.cc.set(r,new xO(t)),n.uc=n.uc.insert(t,r),tD(n.remoteStore,new oa(_i(Th(t.path)),r,2,$i.at))}}function jc(n,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,ye.Z)(function*(n,e,t){const r=qe(n),i=[],u=[],c=[];var p;r.ic.isEmpty()||(r.ic.forEach((p,_)=>{c.push(r._c(_,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b?.fromCache?"not-current":"current"),b){i.push(b);const T=rS.Ci(_.targetId,b);u.push(T)}}))}),yield Promise.all(c),r.sc.zo(i),yield(p=(0,ye.Z)(function*(_,b){const T=qe(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ie.forEach(b,L=>ie.forEach(L.Si,G=>T.persistence.referenceDelegate.addReference(M,L.targetId,G)).next(()=>ie.forEach(L.Di,G=>T.persistence.referenceDelegate.removeReference(M,L.targetId,G)))))}catch(M){if(!Ac(M))throw M;Pe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const L=M.targetId;if(!M.fromCache){const G=T.Ui.get(L),ue=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);T.Ui=T.Ui.insert(L,ue)}}}),function(_,b){return p.apply(this,arguments)})(r.localStore,u))}),JS.apply(this,arguments)}function BO(n,e){return XS.apply(this,arguments)}function XS(){return XS=(0,ye.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield Sx(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(p=>{p.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield jc(t,r.ji)}var i}),XS.apply(this,arguments)}function jO(n,e){const t=qe(n),r=t.cc.get(e);if(r&&r.nc)return $t().add(r.key);{let i=$t();const u=t.rc.get(e);if(!u)return i;for(const c of u){const p=t.ic.get(c);i=i.unionWith(p.view.ju)}return i}}function $O(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,ye.Z)(function*(n,e){const t=qe(n),r=yield QI(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&YS(t,e.targetId,i.Xu),i}),eA.apply(this,arguments)}function HO(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,ye.Z)(function*(n,e){const t=qe(n);return Nx(t.localStore,e).then(r=>jc(t,r))}),tA.apply(this,arguments)}function GO(n,e,t,r){return nA.apply(this,arguments)}function nA(){return nA=(0,ye.Z)(function*(n,e,t,r){const i=qe(n),u=yield function(c,p){const _=qe(c),b=qe(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.Tn(T,p).next(M=>M?_.localDocuments.getDocuments(T,M):ie.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield My(i.remoteStore):"acknowledged"===t||"rejected"===t?(KS(i,e,r||null),ZS(i,e),p=e,qe(qe(i.localStore).mutationQueue).An(p)):st(),yield jc(i,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),nA.apply(this,arguments)}function rA(){return rA=(0,ye.Z)(function*(n,e){const t=qe(n);if(aA(t),uA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield eN(t,r.toArray());t.dc=!0,yield MS(t.remoteStore,!0);for(const u of i)tD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Oy(t,c),Sy(t.localStore,c,!0))),Z0(t.remoteStore,c)}),yield i,yield eN(t,r),function(u){const c=qe(u);c.cc.forEach((p,_)=>{Z0(c.remoteStore,_)}),c.ac.fs(),c.cc=new Map,c.uc=new jn(ze.comparator)}(t),t.dc=!1,yield MS(t.remoteStore,!1)}}),rA.apply(this,arguments)}function eN(n,e,t){return iA.apply(this,arguments)}function iA(){return iA=(0,ye.Z)(function*(n,e,t){const r=qe(n),i=[],u=[];for(const c of e){let p;const _=r.rc.get(c);if(_&&0!==_.length){p=yield Ty(r.localStore,_i(_[0]));for(const b of _){const T=r.ic.get(b),M=yield $O(r,T);M.snapshot&&u.push(M.snapshot)}}else{const b=yield xx(r.localStore,c);p=yield Ty(r.localStore,b),yield US(r,tN(b),c,!1,p.resumeToken)}i.push(p)}return r.sc.zo(u),i}),iA.apply(this,arguments)}function tN(n){return hI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zO(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function WO(n,e,t,r){return sA.apply(this,arguments)}function sA(){return sA=(0,ye.Z)(function*(n,e,t,r){const i=qe(n);if(i.dc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Nx(i.localStore,p0(u[0])),p=kp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Rr.EMPTY_BYTE_STRING);yield jc(i,c,p);break}case"rejected":yield Sy(i.localStore,e,!0),Oy(i,e,r);break;default:st()}}),sA.apply(this,arguments)}function ZO(n,e,t){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n,e,t){const r=aA(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const u=yield xx(r.localStore,i),c=yield Ty(r.localStore,u);yield US(r,tN(u),c.targetId,!1,c.resumeToken),tD(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield Sy(r.localStore,i,!1).then(()=>{Z0(r.remoteStore,i),Oy(r,i)}).catch(Ka))}}),oA.apply(this,arguments)}function aA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kO.bind(null,e),e.sc.zo=CO.bind(null,e.eventManager),e.sc.wc=TO.bind(null,e.eventManager),e}function uA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LO.bind(null,e),e}class nN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.It=z0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Tx(this.persistence,new Cx,e.initialUser,this.It)}yc(e){return new Ix(KI.Bs,this.It)}gc(e){return new kx}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rN extends nN{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield uA(r.Ac.syncEngine),yield My(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Tx(this.persistence,new Cx,e.initialUser,this.It)}Tc(e,t){return new $0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new Cp(t,this.persistence);return new _T(e.asyncQueue,r)}yc(e){const t=nS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?We.withCacheSize(this.cacheSizeBytes):We.DEFAULT;return new tS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Lx(),eD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new kx}}class YO extends rN{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof dS&&(r.sharedClientState.syncEngine={Fr:GO.bind(null,i),$r:WO.bind(null,i),Br:ZO.bind(null,i),vi:zO.bind(null,i),Mr:HO.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ye.Z)(function*(c){yield function qO(n,e){return rA.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}gc(e){const t=Lx();if(!dS.C(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class lA{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Jx(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=BO.bind(null,r.syncEngine),yield MS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new DO}createDatastore(e){const t=z0(e.databaseInfo.databaseId),r=new aO(e.databaseInfo);return new cO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>Jx(this.syncEngine,p,0),c=Fx.C()?new Fx:new iO,new fO(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,_,b){const T=new NO(r,i,u,c,p,_);return b&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=qe(t);Pe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Ay(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cA(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iN(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function sN(n){if(!ze.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oN(n){if(ze.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rD(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function aN(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const uN=new Map;class lN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,iN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class K0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hT;switch(t.type){case"gapi":return new Jv(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uN.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),uN.delete(e),t.terminate())}(this),Promise.resolve()}}class Xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class Il extends Gi{constructor(e,t,r){super(e,t,Th(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new ze(e))}withConverter(e){return new Il(this.firestore,e,this._path)}}function dN(n,e,...t){if(n=(0,Yt.m9)(n),cA("collection","path",e),n instanceof K0){const r=sn.fromString(e,...t);return oN(r),new Il(n,null,r)}{if(!(n instanceof Xn||n instanceof Il))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return oN(r),new Il(n.firestore,null,r)}}function iD(n,e,...t){if(n=(0,Yt.m9)(n),1===arguments.length&&(e=zb.R()),cA("doc","path",e),n instanceof K0){const r=sn.fromString(e,...t);return sN(r),new Xn(n,null,new ze(r))}{if(!(n instanceof Xn||n instanceof Il))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return sN(r),new Xn(n.firestore,n instanceof Il?n.converter:null,new ze(r))}}function hN(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),(n instanceof Xn||n instanceof Il)&&(e instanceof Xn||e instanceof Il)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dA(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&Mp(n._query,e._query)&&n.converter===e.converter}function fN(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class sD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class JO{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Sr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new SO(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ye.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class t1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(u,c){const p=qe(u),_=py(p.It)+"/documents",b={documents:c.map(G=>fy(p.It,G))},T=yield p._o("BatchGetDocuments",_,b,c.length),M=new Map;T.forEach(G=>{const Z=function NI(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=wo(t,r.found.name),u=Wr(r.found.updateTime),c=new yi({mapValue:{fields:r.found.fields}});return Tn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=wo(t,r.missing),u=Wr(r.readTime);return Tn.newNoDocument(i,u)}(n,e):st()}(p.It,G);M.set(Z.key.toString(),Z)});const L=[];return c.forEach(G=>{const Z=M.get(G.toString());Tt(!!Z),L.push(Z)}),L}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=ze.fromPath(i);e.mutations.push(new y0(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(i,u){const c=qe(i),p=py(c.It)+"/documents",_={writes:u.map(b=>Ph(c.It,b))};yield c.ao("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?Jn.exists(!1):Jn.updateTime(t):Jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(t)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class n1{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.No=new hS(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ye.Z)(function*(){const t=new t1(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!vh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!II(t)}return!1}}class r1{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=qr.UNAUTHENTICATED,this.clientId=zb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ye.Z)(function*(p){Pe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ny(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function pN(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(u){r.isEqual(u)||(yield Sx(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),hA.apply(this,arguments)}function gN(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield pA(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Gx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Gx(e.remoteStore,u)),n.onlineComponents=e}),fA.apply(this,arguments)}function pA(n){return gA.apply(this,arguments)}function gA(){return gA=(0,ye.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield pN(n,new nN)),n.offlineComponents}),gA.apply(this,arguments)}function oD(n){return mA.apply(this,arguments)}function mA(){return mA=(0,ye.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield gN(n,new lA)),n.onlineComponents}),mA.apply(this,arguments)}function mN(n){return pA(n).then(e=>e.persistence)}function aD(n){return pA(n).then(e=>e.localStore)}function yA(n){return oD(n).then(e=>e.remoteStore)}function _A(n){return oD(n).then(e=>e.syncEngine)}function ky(n){return vA.apply(this,arguments)}function vA(){return vA=(0,ye.Z)(function*(n){const e=yield oD(n),t=e.eventManager;return t.onListen=PO.bind(null,e.syncEngine),t.onUnlisten=RO.bind(null,e.syncEngine),t}),vA.apply(this,arguments)}function _N(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,u,c,p,_){const b=new sD({next:M=>{u.enqueueAndForget(()=>OS(i,T));const L=M.docs.has(c);!L&&M.fromCache?_.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&p&&"server"===p.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),T=new LS(Th(c.path),b,{includeMetadataChanges:!0,ku:!0});return PS(i,T)}(yield ky(n),n.asyncQueue,e,t,r)})),r.promise}function vN(n,e,t={}){const r=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,u,c,p,_){const b=new sD({next:M=>{u.enqueueAndForget(()=>OS(i,T)),M.fromCache&&"server"===p.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),T=new LS(c,b,{includeMetadataChanges:!0,ku:!0});return PS(i,T)}(yield ky(n),n.asyncQueue,e,t,r)})),r.promise}class d1{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new hS(this,"async_queue_retry"),this.Wc=()=>{const t=eD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=eD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=eD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Sr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Ac(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,mr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=NS.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&st()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function wA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class h1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class er extends K0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new d1,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||wN(this),this._firestoreClient.terminate()}}function kr(n){return n._firestoreClient||wN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wN(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new r0(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new r1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function EN(n,e,t){const r=new Sr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield pN(n,t),yield gN(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===ce.FAILED_PRECONDITION||c.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;Sc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function bN(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dl(Rr.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dl(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $c{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bp{constructor(e){this._methodName=e}}class uD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const b1=/^__.*__$/;class I1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new js(e,this.data,this.fieldMask,t,this.fieldTransforms):new xh(e,this.data,t,this.fieldTransforms)}}class IN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class lD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new lD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return hD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(DN(this.sa)&&b1.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class D1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||z0(e)}da(e,t,r,i=!1){return new lD({sa:e,methodName:t,fa:r,path:yr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function jp(n){const e=n._freezeSettings(),t=z0(n._databaseId);return new D1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cD(n,e,t,r,i,u={}){const c=n.da(u.merge||u.mergeFields?2:0,e,t,i);DA("Data must be an object, but it was:",c,r);const p=SN(r,c);let _,b;if(u.merge)_=new gi(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const M of u.mergeFields){const L=CA(e,M,t);if(!c.contains(L))throw new Ne(ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);MN(T,L)||T.push(L)}_=new gi(T),b=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,b=c.fieldTransforms;return new I1(new yi(p),_,b)}class Y0 extends Bp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Y0}}function CN(n,e,t){return new lD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class EA extends Bp{_toFieldTransform(e){return new El(e.path,new Np)}isEqual(e){return e instanceof EA}}class C1 extends Bp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=CN(this,e,!0),r=this._a.map(u=>$p(u,t)),i=new Sh(r);return new El(e.path,i)}isEqual(e){return this===e}}class T1 extends Bp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=CN(this,e,!0),r=this._a.map(u=>$p(u,t)),i=new Ah(r);return new El(e.path,i)}isEqual(e){return this===e}}class S1 extends Bp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Xa(e.It,TT(e.It,this.wa));return new El(e.path,t)}isEqual(e){return this===e}}function bA(n,e,t,r){const i=n.da(1,e,t);DA("Data must be an object, but it was:",i,r);const u=[],c=yi.empty();pi(r,(_,b)=>{const T=dD(e,_,t);b=(0,Yt.m9)(b);const M=i.ca(T);if(b instanceof Y0)u.push(T);else{const L=$p(b,M);null!=L&&(u.push(T),c.set(T,L))}});const p=new gi(u);return new IN(c,p,i.fieldTransforms)}function IA(n,e,t,r,i,u){const c=n.da(1,e,t),p=[CA(e,r,t)],_=[i];if(u.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)p.push(CA(e,u[L])),_.push(u[L+1]);const b=[],T=yi.empty();for(let L=p.length-1;L>=0;--L)if(!MN(b,p[L])){const G=p[L];let Z=_[L];Z=(0,Yt.m9)(Z);const ue=c.ca(G);if(Z instanceof Y0)b.push(G);else{const _e=$p(Z,ue);null!=_e&&(b.push(G),T.set(G,_e))}}const M=new gi(b);return new IN(T,M,c.fieldTransforms)}function TN(n,e,t,r=!1){return $p(t,n.da(r?4:3,e))}function $p(n,e){if(AN(n=(0,Yt.m9)(n)))return DA("Unsupported field value:",e,n),SN(n,e);if(n instanceof Bp)return function(t,r){if(!DN(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=$p(c,r.aa(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Yt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return TT(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=kn.fromDate(t);return{timestampValue:hy(r.It,i)}}if(t instanceof kn){const i=new kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hy(r.It,i)}}if(t instanceof uD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dl)return{bytesValue:xI(r.It,t._byteString)};if(t instanceof Xn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:I0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${rD(t)}`)}(n,e)}function SN(n,e){const t={};return eI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(n,(r,i)=>{const u=$p(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function AN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof kn||n instanceof uD||n instanceof Dl||n instanceof Xn||n instanceof Bp)}function DA(n,e,t){if(!AN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=rD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function CA(n,e,t){if((e=(0,Yt.m9)(e))instanceof $c)return e._internalPath;if("string"==typeof e)return dD(n,e);throw hD("Field path arguments must be of type string or ",n,!1,void 0,t)}const A1=new RegExp("[~\\*/\\[\\]]");function dD(n,e,t){if(e.search(A1)>=0)throw hD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $c(...e.split("."))._internalPath}catch{throw hD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Ne(ce.INVALID_ARGUMENT,p+n+_)}function MN(n,e){return n.some(t=>t.isEqual(e))}class Q0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new M1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class M1 extends Q0{data(){return super.data()}}function fD(n,e){return"string"==typeof e?dD(n,e):e instanceof $c?e._internalPath:e._delegate._internalPath}function xN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J0{}function Vh(n,...e){for(const t of e)n=t._apply(n);return n}class x1 extends J0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=jp(e.firestore),r=function(i,u,c,p,_,b,T){let M;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){FN(T,b);const G=[];for(const Z of T)G.push(kN(p,i,Z));M={arrayValue:{values:G}}}else M=kN(p,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||FN(T,b),M=TN(c,"where",T,"in"===b||"not-in"===b);const L=zr.create(_,b,M);return function(G,Z){if(Z.dt()){const _e=uy(G);if(null!==_e&&!_e.isEqual(Z.field))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_e.toString()}' and '${Z.field.toString()}'`);const Ye=ay(G);null!==Ye&&LN(0,Z.field,Ye)}const ue=function(_e,Ye){for(const at of _e.filters)if(Ye.indexOf(at.op)>=0)return at.op;return null}(G,function(_e){switch(_e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==ue)throw new Ne(ce.INVALID_ARGUMENT,ue===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,L),L}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Gi(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new wl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class P1 extends J0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Pc(i,u);return function(p,_){if(null===ay(p)){const b=uy(p);null!==b&&LN(0,b,_.field)}}(r,c),c}(e._query,this.ma,this.pa);return new Gi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new wl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class NN extends J0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Gi(e.firestore,e.converter,ly(e._query,this.Ia,this.Ta))}}class PN extends J0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=ON(e,this.type,this.Ea,this.Aa);return new Gi(e.firestore,e.converter,(i=t,new wl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class RN extends J0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=ON(e,this.type,this.Ea,this.Aa);return new Gi(e.firestore,e.converter,(i=t,new wl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function ON(n,e,t,r){if(t[0]=(0,Yt.m9)(t[0]),t[0]instanceof Q0)return function(i,u,c,p,_){if(!p)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const T of Rc(i))if(T.field.isKeyField())b.push(_l(u,p.key));else{const M=p.data.field(T.field);if(n0(M))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=T.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(M)}return new vl(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=jp(n.firestore);return function(u,c,p,_,b,T){const M=u.explicitOrderBy;if(b.length>M.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<b.length;G++){const Z=b[G];if(M[G].field.isKeyField()){if("string"!=typeof Z)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!d0(u)&&-1!==Z.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const ue=u.path.child(sn.fromString(Z));if(!ze.isDocumentKey(ue))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const _e=new ze(ue);L.push(_l(c,_e))}else{const ue=TN(p,_,Z);L.push(ue)}}return new vl(L,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kN(n,e,t){if("string"==typeof(t=(0,Yt.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d0(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!ze.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _l(n,new ze(r))}if(t instanceof Xn)return _l(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rD(t)}.`)}function FN(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LN(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class TA{convertValue(e,t="none"){switch(Nc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return pi(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new uD($n(e.latitude),$n(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xm(e));default:return null}}convertTimestamp(e){const t=Qa(e);return new kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);Tt(HT(r));const i=new ra(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return i.isEqual(t)||mr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function pD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class B1 extends TA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}class Hp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hc extends Q0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new X0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class X0 extends Hc{data(e={}){return super.data(e)}}class Uh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new X0(this._firestore,this._userDataWriter,r.key,r,new Hp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new X0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new X0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:j1(c.type),doc:p,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function j1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function VN(n,e){return n instanceof Hc&&e instanceof Hc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Uh&&e instanceof Uh&&n._firestore===e._firestore&&dA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bh extends TA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}function UN(n,e,t){n=on(n,Xn);const r=on(n.firestore,er),i=pD(n.converter,e,t);return Fy(r,[cD(jp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Jn.none())])}function BN(n,e,t,...r){n=on(n,Xn);const i=on(n.firestore,er),u=jp(i);let c;return c="string"==typeof(e=(0,Yt.m9)(e))||e instanceof $c?IA(u,"updateDoc",n._key,e,t,r):bA(u,"updateDoc",n._key,e),Fy(i,[c.toMutation(n._key,Jn.exists(!0))])}function jN(n,...e){var t,r,i;n=(0,Yt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||wA(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(wA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,b,T;if(n instanceof Xn)b=on(n.firestore,er),T=Th(n._key.path),_={next:M=>{e[c]&&e[c](SA(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=on(n,Gi);b=on(M.firestore,er),T=M._query;const L=new Bh(b);_={next:G=>{e[c]&&e[c](new Uh(b,L,M,G))},error:e[c+1],complete:e[c+2]},xN(n._query)}return function(M,L,G,Z){const ue=new sD(Z),_e=new LS(L,ue,G);return M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return PS(yield ky(M),_e)})),()=>{ue.bc(),M.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return OS(yield ky(M),_e)}))}}(kr(b),T,p,_)}function Fy(n,e){return function(t,r){const i=new Sr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function OO(n,e,t){return $S.apply(this,arguments)}(yield _A(t),r,i)})),i.promise}(kr(n),e)}function SA(n,e,t){const r=t.docs.get(e._key),i=new Bh(n);return new Hc(n,i,e._key,r,new Hp(t.hasPendingWrites,t.fromCache),e.converter)}const Q1={maxAttempts:5};class $N{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jp(e)}set(e,t,r){this._verifyNotCommitted();const i=jh(e,this._firestore),u=pD(i.converter,t,r),c=cD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=jh(e,this._firestore);let c;return c="string"==typeof(t=(0,Yt.m9)(t))||t instanceof $c?IA(this._dataReader,"WriteBatch.update",u._key,t,r,i):bA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jh(e,this._firestore);return this._mutations=this._mutations.concat(new Rp(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jh(n,e){if((n=(0,Yt.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class J1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jp(e)}get(e){const t=jh(e,this._firestore),r=new B1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const u=i[0];if(u.isFoundDocument())return new Q0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Q0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=jh(e,this._firestore),u=pD(i.converter,t,r),c=cD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=jh(e,this._firestore);let c;return c="string"==typeof(t=(0,Yt.m9)(t))||t instanceof $c?IA(this._dataReader,"Transaction.update",u._key,t,r,i):bA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=jh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jh(e,this._firestore),r=new Bh(this._firestore);return super.get(e).then(i=>new Hc(this._firestore,r,t._key,i._document,new Hp(!1,!1),t.converter))}}function AA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function GN(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function qN(){if(!function vT(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ph=Vs.SDK_VERSION,(0,Vs._registerComponent)(new Wa.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new er(new fT(t.getProvider("auth-internal")),new Gb(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ra(p.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Vs.registerVersion)(jb,"3.7.1",n),(0,Vs.registerVersion)(jb,"3.7.1","esm2017")}();class ew{constructor(e){this._delegate=e}static fromBase64String(e){return qN(),new ew(Dl.fromBase64String(e))}static fromUint8Array(e){return GN(),new ew(Dl.fromUint8Array(e))}toBase64(){return qN(),this._delegate.toBase64()}toUint8Array(){return GN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function MA(n){return function ak(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class uk{enableIndexedDbPersistence(e,t){return function p1(n,e){bN(n=on(n,er));const t=kr(n),r=n._freezeSettings(),i=new lA;return EN(t,i,new rN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function g1(n){bN(n=on(n,er));const e=kr(n),t=n._freezeSettings(),r=new lA;return EN(e,r,new YO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function m1(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Bs.C())return Promise.resolve();const i=r+"main";yield Bs.delete(i)}),function(r){return t.apply(this,arguments)})(nS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class zN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ra||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function cN(n,e,t,r={}){var i;const u=(n=on(n,K0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Sc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=qr.MOCK_USER;else{c=(0,Yt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new qr(_)}n._authCredentials=new Qv(new Wm(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function _1(n){return function i1(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield mN(n),t=yield yA(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.wu.delete(0),W0(i)}(t)}))}(kr(n=on(n,er)))}(this._delegate)}disableNetwork(){return function v1(n){return function s1(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield mN(n),t=yield yA(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const u=qe(i);u.wu.add(0),yield Ay(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(kr(n=on(n,er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function y1(n){return function(e){const t=new Sr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function VO(n,e){return WS.apply(this,arguments)}(yield _A(e),t)})),t.promise}(kr(n=on(n,er)))}(this._delegate)}onSnapshotsInSync(e){return function Y1(n,e){return function u1(n,e){const t=new sD(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield ky(n),i=t,qe(r).bu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield ky(n),i=t,void qe(r).bu.delete(i);var r,i}))}}(kr(n=on(n,er)),wA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ly(this,dN(this._delegate,e))}catch(t){throw gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ua(this,iD(this._delegate,e))}catch(t){throw gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ms(this,function QO(n,e){if(n=on(n,K0),cA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(t=e,new wl(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function X1(n,e,t){n=on(n,er);const r=Object.assign(Object.assign({},Q1),t);return function(i){if(i.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const p=new Sr;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const _=yield function yN(n){return oD(n).then(e=>e.datastore)}(i);new n1(i.asyncQueue,_,c,u,p).run()})),p.promise}(kr(n),i=>e(new J1(n,i)),r)}(this._delegate,t=>e(new WN(this,t)))}batch(){return kr(this._delegate),new ZN(new $N(this._delegate,e=>Fy(this._delegate,e)))}loadBundle(e){return function w1(n,e){const t=kr(n=on(n,er)),r=new h1;return function l1(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return fN(_,b);if(_ instanceof ArrayBuffer)return fN(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new JO(_,c);var _}(t,z0(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function KO(n,e,t){const r=qe(n);var i;(i=(0,ye.Z)(function*(u,c,p){try{const _=yield c.getMetadata();if(yield function(L,G){const Z=qe(L),ue=Wr(G.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",_e=>Z.Ns.getBundleMetadata(_e,G.id)).then(_e=>!!_e&&_e.createTime.compareTo(ue)>=0)}(u.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(L=_).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);p._updateProgress(Wx(_));const b=new AO(_,u.localStore,c.It);let T=yield c.mc();for(;T;){const L=yield b.Fu(T);L&&p._updateProgress(L),T=yield c.mc()}const M=yield b.complete();return yield jc(u,M.Lu,void 0),yield function(L,G){const Z=qe(L);return Z.persistence.runTransaction("Save bundle","readwrite",ue=>Z.Ns.saveBundleMetadata(ue,G))}(u.localStore,_),p._completeWith(M.progress),Promise.resolve(M.Bu)}catch(_){return Sc("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var L}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield _A(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function E1(n,e){return function c1(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield aD(n),e)}))}(kr(n=on(n,er)),e).then(t=>t?new Gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ms(this,t):null)}}class gD extends TA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ew(new Dl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ua.forKey(t,this.firestore,null)}}class WN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}get(e){const t=qp(e);return this._delegate.get(t).then(r=>new tw(this._firestore,new Hc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=qp(e);return r?(AA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=qp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=qp(e);return this._delegate.delete(t),this}}class ZN{constructor(e){this._delegate=e}set(e,t,r){const i=qp(e);return r?(AA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=qp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=qp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new X0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new nw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Gp(e,new gD(e),t),i.set(t,u)),u}}Gp.INSTANCES=new WeakMap;class ua{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ua(t,new Xn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new ua(t,new Xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ly(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ly(this.firestore,dN(this._delegate,e))}catch(t){throw gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Yt.m9)(e))instanceof Xn&&hN(this._delegate,e)}set(e,t){t=AA("DocumentReference.set",t);try{return t?UN(this._delegate,e,t):UN(this._delegate,e)}catch(r){throw gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?BN(this._delegate,e):BN(this._delegate,e,t,...r)}catch(i){throw gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Z1(n){return Fy(on(n.firestore,er),[new Rp(n._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const t=KN(e),r=YN(e,i=>new tw(this.firestore,new Hc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return jN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function H1(n){n=on(n,Xn);const e=on(n.firestore,er),t=kr(e),r=new Bh(e);return function o1(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,u,c){try{const p=yield function(_,b){const T=qe(_);return T.persistence.runTransaction("read document","readonly",M=>T.localDocuments.getDocument(M,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Ny(p,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield aD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Hc(e,r,n._key,i,new Hp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function G1(n){n=on(n,Xn);const e=on(n.firestore,er);return _N(kr(e),n._key,{source:"server"}).then(t=>SA(e,n,t))}(this._delegate):function $1(n){n=on(n,Xn);const e=on(n.firestore,er);return _N(kr(e),n._key).then(t=>SA(e,n,t))}(this._delegate),t.then(r=>new tw(this.firestore,new Hc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ua(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}function gs(n,e,t){return n.message=n.message.replace(e,t),n}function KN(n){for(const e of n)if("object"==typeof e&&!MA(e))return e;return{}}function YN(n,e){var t,r;let i;return i=MA(n[0])?n[0]:MA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class tw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ua(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return VN(this._delegate,e._delegate)}}class nw extends tw{data(e){const t=this._delegate.data(e);return function gh(n,e){n||st()}(void 0!==t),t}}class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}where(e,t,r){try{return new ms(this.firestore,Vh(this._delegate,function N1(n,e,t){const r=e,i=fD("where",n);return new x1(i,r,t)}(e,t,r)))}catch(i){throw gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ms(this.firestore,Vh(this._delegate,function R1(n,e="asc"){const t=e,r=fD("orderBy",n);return new P1(r,t)}(e,t)))}catch(r){throw gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ms(this.firestore,Vh(this._delegate,function O1(n){return aN("limit",n),new NN("limit",n,"F")}(e)))}catch(t){throw gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ms(this.firestore,Vh(this._delegate,function k1(n){return aN("limitToLast",n),new NN("limitToLast",n,"L")}(e)))}catch(t){throw gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ms(this.firestore,Vh(this._delegate,function F1(...n){return new PN("startAt",n,!0)}(...e)))}catch(t){throw gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ms(this.firestore,Vh(this._delegate,function L1(...n){return new PN("startAfter",n,!1)}(...e)))}catch(t){throw gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ms(this.firestore,Vh(this._delegate,function V1(...n){return new RN("endBefore",n,!1)}(...e)))}catch(t){throw gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ms(this.firestore,Vh(this._delegate,function U1(...n){return new RN("endAt",n,!0)}(...e)))}catch(t){throw gs(t,"endAt()","Query.endAt()")}}isEqual(e){return dA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function z1(n){n=on(n,Gi);const e=on(n.firestore,er),t=kr(e),r=new Bh(e);return function a1(n,e){const t=new Sr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,u,c){try{const p=yield QI(i,u,!0),_=new Yx(u,p.Hi),b=_.Wu(p.documents),T=_.applyChanges(b,!1);c.resolve(T.snapshot)}catch(p){const _=Ny(p,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield aD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Uh(e,r,n,i))}(this._delegate):"server"===e?.source?function W1(n){n=on(n,Gi);const e=on(n.firestore,er),t=kr(e),r=new Bh(e);return vN(t,n._query,{source:"server"}).then(i=>new Uh(e,r,n,i))}(this._delegate):function q1(n){n=on(n,Gi);const e=on(n.firestore,er),t=kr(e),r=new Bh(e);return xN(n._query),vN(t,n._query).then(i=>new Uh(e,r,n,i))}(this._delegate),t.then(r=>new xA(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=KN(e),r=YN(e,i=>new xA(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return jN(this._delegate,t,r)}withConverter(e){return new ms(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}class ck{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new nw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new nw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ck(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new nw(this._firestore,r))})}isEqual(e){return VN(this._delegate,e._delegate)}}class Ly extends ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ua(this.firestore,e):null}doc(e){try{return new ua(this.firestore,void 0===e?iD(this._delegate):iD(this._delegate,e))}catch(t){throw gs(t,"doc()","CollectionReference.doc()")}}add(e){return function K1(n,e){const t=on(n.firestore,er),r=iD(n),i=pD(n.converter,e);return Fy(t,[cD(jp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ua(this.firestore,t))}isEqual(e){return hN(this._delegate,e._delegate)}withConverter(e){return new Ly(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}function qp(n){return on(n,Xn)}class NA{constructor(...e){this._delegate=new $c(...e)}static documentId(){return new NA(yr.keyField().canonicalString())}isEqual(e){return(e=(0,Yt.m9)(e))instanceof $c&&this._delegate._internalPath.isEqual(e._internalPath)}}class zp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function tk(){return new EA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new zp(e)}static delete(){const e=function ek(){return new Y0("deleteField")}();return e._methodName="FieldValue.delete",new zp(e)}static arrayUnion(...e){const t=function nk(...n){return new C1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new zp(t)}static arrayRemove(...e){const t=function rk(...n){return new T1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new zp(t)}static increment(e){const t=function ik(n){return new S1("increment",n)}(e);return t._methodName="FieldValue.increment",new zp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dk={Firestore:zN,GeoPoint:uD,Timestamp:kn,Blob:ew,Transaction:WN,WriteBatch:ZN,DocumentReference:ua,DocumentSnapshot:tw,Query:ms,QueryDocumentSnapshot:nw,QuerySnapshot:xA,CollectionReference:Ly,FieldPath:NA,FieldValue:zp,setLogLevel:function lk(n){!function $b(n){na.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function fk(n){(function hk(n,e){n.INTERNAL.registerComponent(new Wa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},dk)))})(n,(e,t)=>new zN(e,t,new uk)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(K_.Z);var pk=k(6451),mD=k(5363),gk=k(6063);class mk extends dn.x{constructor(e=1/0,t=1/0,r=gk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var yk=k(3099);function QN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,yk.B)({connector:()=>new mk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function JN(n,e){return(0,Si.m)(e)?qt(()=>n,e):qt(()=>n)}var PA=k(9468);k(5867);const eP=new Map,bk={activated:!1,tokenObservers:[]},Ik={initialized:!1,enabled:!1};function wi(n){return eP.get(n)||bk}function la(n,e){eP.set(n,e)}function _D(){return Ik}class Ak{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Yt.BH,yield function Mk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Yt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ys=new Yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nP(n){if(!wi(n).activated)throw ys.create("use-before-activation",{appName:n.name})}function FA(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,ye.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const G=yield c.getHeartbeatsHeader();G&&(u["X-Firebase-Client"]=G)}const p={method:"POST",body:JSON.stringify(e),headers:u};let _,b;try{_=yield fetch(n,p)}catch(G){throw ys.create("fetch-network-error",{originalErrorMessage:null===(r=G)||void 0===r?void 0:r.message})}if(200!==_.status)throw ys.create("fetch-status-error",{httpStatus:_.status});try{b=yield _.json()}catch(G){throw ys.create("fetch-parse-error",{originalErrorMessage:null===(i=G)||void 0===i?void 0:i.message})}const T=b.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const M=1e3*Number(T[1]),L=Date.now();return{token:b.token,expireTimeMillis:L+M,issuedAtTimeMillis:L}}),LA.apply(this,arguments)}function Rk(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const rw="firebase-app-check-store";let ED=null;function iP(){return ED||(ED=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(ys.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(rw,{keyPath:"compositeKey"})}}catch(r){e(ys.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),ED)}function VA(){return VA=(0,ye.Z)(function*(n,e){const r=(yield iP()).transaction(rw,"readwrite"),u=r.objectStore(rw).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var b;p(ys.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),VA.apply(this,arguments)}const iw=new cs.Yd("@firebase/app-check");function jA(n,e){return(0,Yt.hl)()?function Lk(n,e){return function sP(n,e){return VA.apply(this,arguments)}(function aP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{iw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uP(){return _D().enabled}function lP(){return HA.apply(this,arguments)}function HA(){return HA=(0,ye.Z)(function*(){const n=_D();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),HA.apply(this,arguments)}const Hk={error:"UNKNOWN_ERROR"};function Gk(n){return Yt.US.encodeString(JSON.stringify(n),!1)}function bD(n){return GA.apply(this,arguments)}function GA(){return GA=(0,ye.Z)(function*(n,e=!1){const t=n.app;nP(t);const r=wi(t);let u,i=r.token;if(i&&!Vy(i)&&(la(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Vy(_)?i=_:yield jA(t,void 0))}if(!e&&i&&Vy(i))return{token:i.token};let p,c=!1;if(uP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=FA(Rk(t,yield lP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield jA(t,_),la(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?iw.warn(_.message):iw.error(_),u=_}return i?u?p=Vy(i)?{token:i.token,internalError:u}:hP(u):(p={token:i.token},la(t,Object.assign(Object.assign({},r),{token:i})),yield jA(t,i)):p=hP(u),c&&dP(t,p),p}),GA.apply(this,arguments)}function zA(n,e){const t=wi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),la(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function cP(n){const{app:e}=n,t=wi(e);let r=t.tokenRefresher;r||(r=function qk(n){const{app:e}=n;return new Ak((0,ye.Z)(function*(){let r;if(r=wi(e).token?yield bD(n,!0):yield bD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=wi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),la(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function dP(n,e){const t=wi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Vy(n){return n.expireTimeMillis-Date.now()>0}function hP(n){return{token:Gk(Hk),error:n}}class zk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wi(this.app);for(const t of e)zA(this.app,t.next);return Promise.resolve()}}const wP="app-check-internal";!function oF(){(0,Vs._registerComponent)(new Wa.wA("app-check",n=>function Wk(n,e){return new zk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wP).initialize()})),(0,Vs._registerComponent)(new Wa.wA(wP,n=>function Zk(n){return{getToken:e=>bD(n,e),addTokenListener:e=>function qA(n,e,t,r){const{app:i}=n,u=wi(i),c={next:t,error:r,type:e};if(la(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Vy(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),cP(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>cP(n))}(n,"INTERNAL",e),removeTokenListener:e=>zA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Vs.registerVersion)("@firebase/app-check","0.5.15")}();class YA{constructor(){return(0,Cr.vb)("app-check")}}typeof window<"u"&&window,k(127);const bP=new d.OlP("angularfire2.auth.use-emulator"),IP=new d.OlP("angularfire2.auth.settings"),DP=new d.OlP("angularfire2.auth.tenant-id"),CP=new d.OlP("angularfire2.auth.langugage-code"),TP=new d.OlP("angularfire2.auth.use-device-language"),SP=new d.OlP("angularfire.auth.persistence"),AP=(n,e,t,r,i,u,c,p)=>(0,ei.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[b,T]of Object.entries(c))_.settings[b]=T;return p&&_.setPersistence(p),_},[t,r,i,u,c,p]);let MP=(()=>{class n{constructor(t,r,i,u,c,p,_,b,T,M,L,G){const Z=new dn.x,ue=rt(void 0).pipe((0,mD.Q)(c.outsideAngular),qt(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9545)))),(0,bt.U)(()=>(0,ei.on)(t,u,r)),(0,bt.U)(_e=>AP(_e,u,p,b,T,M,_,L)),QN({bufferSize:1,refCount:!1}));if(br(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{ue.pipe(Ie()).subscribe();const Ye=ue.pipe(qt(ct=>ct.getRedirectResult().then(St=>St,()=>null)),Cr.iC,QN({bufferSize:1,refCount:!1})),at=ue.pipe(qt(ct=>new Ir.y(St=>({unsubscribe:u.runOutsideAngular(()=>ct.onAuthStateChanged(Pt=>St.next(Pt),Pt=>St.error(Pt),()=>St.complete()))})))),gt=ue.pipe(qt(ct=>new Ir.y(St=>({unsubscribe:u.runOutsideAngular(()=>ct.onIdTokenChanged(Pt=>St.next(Pt),Pt=>St.error(Pt),()=>St.complete()))}))));this.authState=Ye.pipe(JN(at),(0,PA.R)(c.outsideAngular),(0,mD.Q)(c.insideAngular)),this.user=Ye.pipe(JN(gt),(0,PA.R)(c.outsideAngular),(0,mD.Q)(c.insideAngular)),this.idToken=this.user.pipe(qt(ct=>ct?(0,rn.D)(ct.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(qt(ct=>ct?(0,rn.D)(ct.getIdTokenResult()):rt(null))),this.credential=(0,pk.T)(Ye,Z,this.authState.pipe(C(ct=>!ct))).pipe((0,bt.U)(ct=>ct?.user?ct:null),(0,PA.R)(c.outsideAngular),(0,mD.Q)(c.insideAngular))}return(0,ei.pX)(this,ue,u,{spy:{apply:(_e,Ye,at)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&at.then(gt=>Z.next(gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ei.Dh),d.LFG(ei.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Cr.HU),d.LFG(bP,8),d.LFG(IP,8),d.LFG(DP,8),d.LFG(CP,8),d.LFG(TP,8),d.LFG(SP,8),d.LFG(YA,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function xP(n,e){return function hF(n,e=Jo.z){return new Ir.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function JA(n,e){return xP(n,e).pipe((0,bt.U)(t=>({payload:t,type:"query"})))}function DD(n,e){return JA(n,e).pipe(D(void 0),Hr(),(0,bt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(T=>T.doc.ref.isEqual(c.ref)),b=t?.payload.docs.find(T=>T.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function NP(n,e,t){return DD(n,t).pipe(lt((r,i)=>function pF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function bc(n,e=pr.y){return n=n??pm,(0,Un.e)((t,r)=>{let i,u=!0;t.subscribe((0,or.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function PP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class RP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=DD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(D(void 0),Hr(),C(([r,i])=>i.length>0||!r),(0,bt.U)(([r,i])=>i),Cr.iC)}auditTrail(e){return this.stateChanges(e).pipe(lt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PP(e);return NP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cr.iC)}valueChanges(e={}){return JA(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cr.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Cr.iC)}add(e){return this.ref.add(e)}doc(e){return new OP(this.ref.doc(e),this.afs)}}class OP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=kP(r,t);return new RP(i,u,this.afs)}snapshotChanges(){return function fF(n,e){return xP(n,e).pipe(D(void 0),Hr(),(0,bt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(Cr.iC)}}class mF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?DD(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),C(t=>t.length>0),Cr.iC):DD(this.query,this.afs.schedulers.outsideAngular).pipe(Cr.iC)}auditTrail(e){return this.stateChanges(e).pipe(lt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=PP(e);return NP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cr.iC)}valueChanges(e={}){return JA(this.query,this.afs.schedulers.outsideAngular).pipe((0,bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Cr.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Cr.iC)}}const yF=new d.OlP("angularfire2.enableFirestorePersistence"),_F=new d.OlP("angularfire2.firestore.persistenceSettings"),vF=new d.OlP("angularfire2.firestore.settings"),wF=new d.OlP("angularfire2.firestore.use-emulator");function kP(n,e=(t=>t)){return{query:e(n),ref:n}}let EF=(()=>{class n{constructor(t,r,i,u,c,p,_,b,T,M,L,G,Z,ue,_e,Ye,at){this.schedulers=_;const gt=(0,ei.on)(t,p,r),ct=T;M&&AP(gt,p,L,Z,ue,_e,G,Ye),[this.firestore,this.persistenceEnabled$]=(0,ei.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const St=p.runOutsideAngular(()=>gt.firestore());if(u&&St.settings(u),ct&&St.useEmulator(...ct),i&&!br(c)){const Pt=()=>{try{return(0,rn.D)(St.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ln){return typeof console<"u"&&console.warn(ln),rt(!1)}};return[St,p.runOutsideAngular(Pt)]}return[St,rt(!1)]},[u,ct,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=kP(i,r),p=this.schedulers.ngZone.run(()=>u);return new RP(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new mF(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new OP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ei.Dh),d.LFG(ei.xv,8),d.LFG(yF,8),d.LFG(vF,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Cr.HU),d.LFG(_F,8),d.LFG(wF,8),d.LFG(MP,8),d.LFG(bP,8),d.LFG(IP,8),d.LFG(DP,8),d.LFG(CP,8),d.LFG(TP,8),d.LFG(SP,8),d.LFG(YA,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CD=(()=>{class n{constructor(t){this.firestore=t}agregarproducto(t){return this.firestore.collection("productos").add(t)}getProducts(){return this.firestore.collection("productos",t=>t.orderBy("table","asc")).snapshotChanges()}deleteProducts(t){return this.firestore.collection("productos").doc(t).delete()}getProducto(t){return this.firestore.collection("productos").doc(t).snapshotChanges()}update(t,r){return this.firestore.collection("productos").doc(t).update(r)}ajustarProducto(t){return this.firestore.collection("ajustes").add(t)}obtenerAjuste(t){return this.firestore.collection("ajustes").doc(t).snapshotChanges()}obtProductos(){return this.firestore.collection("ajustes").snapshotChanges()}updatex(t,r){return this.firestore.collection("ajustes").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(EF))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FP=(()=>{class n{constructor(t,r,i,u){this.fb=t,this._servicio=r,this.aRouter=i,this.router=u,this.adjustProduct=this.fb.group({sabor01:[""],sabor02:[""],sabor03:[""],sabor04:[""],sabor05:[""],sabor06:[""],sabor07:[""],sabor08:[""],sabor09:[""],sabor10:[""],sabor11:[""],sabor12:[""]}),this.id=this.aRouter.snapshot.paramMap.get("id")}ngOnInit(){this.ajustesImp()}ajustar(){null===this.id?this.ajustarAddProduct():this.ajustesEdit(this.id)}ajustarAddProduct(){const t={sabor01:this.adjustProduct.value.sabor01,sabor02:this.adjustProduct.value.sabor02,sabor03:this.adjustProduct.value.sabor03,sabor04:this.adjustProduct.value.sabor04,sabor05:this.adjustProduct.value.sabor05,sabor06:this.adjustProduct.value.sabor06,sabor07:this.adjustProduct.value.sabor07,sabor08:this.adjustProduct.value.sabor08,sabor09:this.adjustProduct.value.sabor09,sabor10:this.adjustProduct.value.sabor10,sabor11:this.adjustProduct.value.sabor11,sabor12:this.adjustProduct.value.sabor12};console.log(t),this._servicio.ajustarProducto(t).then(()=>{console.log("registrado con exito")})}ajustesEdit(t){this._servicio.updatex(t,{sabor01:this.adjustProduct.value.sabor01,sabor02:this.adjustProduct.value.sabor02,sabor03:this.adjustProduct.value.sabor03,sabor04:this.adjustProduct.value.sabor04,sabor05:this.adjustProduct.value.sabor05,sabor06:this.adjustProduct.value.sabor06,sabor07:this.adjustProduct.value.sabor07,sabor08:this.adjustProduct.value.sabor08,sabor09:this.adjustProduct.value.sabor09,sabor10:this.adjustProduct.value.sabor10,sabor11:this.adjustProduct.value.sabor11,sabor12:this.adjustProduct.value.sabor12}).then(()=>{}),this.router.navigate(["/mod"])}ajustesImp(){null!==this.id&&this._servicio.obtenerAjuste(this.id).subscribe(t=>{this.adjustProduct.setValue({sabor01:t.payload.data().sabor01,sabor02:t.payload.data().sabor02,sabor03:t.payload.data().sabor03,sabor04:t.payload.data().sabor04,sabor05:t.payload.data().sabor05,sabor06:t.payload.data().sabor06,sabor07:t.payload.data().sabor07,sabor08:t.payload.data().sabor08,sabor09:t.payload.data().sabor09,sabor10:t.payload.data().sabor10,sabor11:t.payload.data().sabor11,sabor12:t.payload.data().sabor12})})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($E),d.Y36(CD),d.Y36(Ui),d.Y36(Dr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-adjust"]],decls:34,vars:1,consts:[[1,"contenedor"],[3,"formGroup","ngSubmit"],[1,"flavors"],[1,"col"],["type","text","placeholder","sabor01","formControlName","sabor01",1,""],["type","text","placeholder","sabor02","formControlName","sabor02",1,""],["type","text","placeholder","sabor03","formControlName","sabor03",1,""],["type","text","placeholder","sabor04","formControlName","sabor04",1,""],["type","text","placeholder","sabor05","formControlName","sabor05",1,""],["type","text","placeholder","sabor06","formControlName","sabor06",1,""],["type","text","placeholder","sabor07","formControlName","sabor07",1,""],["type","text","placeholder","sabor08","formControlName","sabor08",1,""],["type","text","placeholder","sabor09","formControlName","sabor09",1,""],["type","text","placeholder","sabor10","formControlName","sabor10",1,""],["type","text","placeholder","sabor11","formControlName","sabor11",1,""],["type","text","placeholder","sabor12","formControlName","sabor12",1,""],[1,"mt-3","text-center"],["type","text","routerLink","/mod",1,"btn","btn-secondary","btn-lg","mr-3"],["type","submit",1,"btn","btn-dark","btn-lg"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"form",1),d.NdJ("ngSubmit",function(){return r.ajustar()}),d.TgZ(2,"div",2)(3,"h3"),d._uU(4,"ajustar sabores"),d.qZA(),d.TgZ(5,"div",3),d._UZ(6,"input",4),d.qZA(),d.TgZ(7,"div",3),d._UZ(8,"input",5),d.qZA(),d.TgZ(9,"div",3),d._UZ(10,"input",6),d.qZA(),d.TgZ(11,"div",3),d._UZ(12,"input",7),d.qZA(),d.TgZ(13,"div",3),d._UZ(14,"input",8),d.qZA(),d.TgZ(15,"div",3),d._UZ(16,"input",9),d.qZA(),d.TgZ(17,"div",3),d._UZ(18,"input",10),d.qZA(),d.TgZ(19,"div",3),d._UZ(20,"input",11),d.qZA(),d.TgZ(21,"div",3),d._UZ(22,"input",12),d.qZA(),d.TgZ(23,"div",3),d._UZ(24,"input",13),d.qZA(),d.TgZ(25,"div",3),d._UZ(26,"input",14),d.qZA(),d.TgZ(27,"div",3),d._UZ(28,"input",15),d.qZA()(),d.TgZ(29,"div",16)(30,"button",17),d._uU(31,"Regresar"),d.qZA(),d.TgZ(32,"button",18),d._uU(33,"Aceptar"),d.qZA()()()()),2&t&&(d.xp6(1),d.Q6J("formGroup",r.adjustProduct))},dependencies:[Xu,um,yc,Kg,Lf,jf,Qd]}),n})();class LP{}const Gc="*";function IF(n,e){return{type:7,name:n,definitions:e,options:{}}}function VP(n,e=null){return{type:4,styles:e,timings:n}}function UP(n,e=null){return{type:2,steps:n,options:e}}function sw(n){return{type:6,styles:n,offset:null}}function eM(n,e,t){return{type:0,name:n,styles:e,options:t}}function BP(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function jP(n){Promise.resolve().then(n)}class ow{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){jP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class $P{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?jP(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const HP=["toast-component",""];function DF(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.remove())}),d.TgZ(1,"span",6),d._uU(2,"\xd7"),d.qZA()()}}function CF(n,e){if(1&n&&(d.ynx(0),d._uU(1),d.BQk()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("[",t.duplicatesCount+1,"]")}}function TF(n,e){if(1&n&&(d.TgZ(0,"div"),d._uU(1),d.YNc(2,CF,2,1,"ng-container",4),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.titleClass),d.uIk("aria-label",t.title),d.xp6(1),d.hij(" ",t.title," "),d.xp6(1),d.Q6J("ngIf",t.duplicatesCount)}}function SF(n,e){if(1&n&&d._UZ(0,"div",7),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.Q6J("innerHTML",t.message,d.oJD)}}function AF(n,e){if(1&n&&(d.TgZ(0,"div",8),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.uIk("aria-label",t.message),d.xp6(1),d.hij(" ",t.message," ")}}function MF(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"div",9),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Udp("width",t.width+"%")}}class FF{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class VF{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new dn.x,this._activate=new dn.x,this._manualClose=new dn.x,this._resetTimeout=new dn.x,this._countDuplicate=new dn.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class TD{constructor(e,t,r,i,u,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=u,this.toastRef=c,this._onTap=new dn.x,this._onAction=new dn.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const qP=new d.OlP("ToastConfig");class UF extends class LF{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class BF{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let jF=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$F=(()=>{class n{constructor(t,r,i,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new UF(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new BF(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(jF),d.LFG(d._Vd),d.LFG(d.z2F),d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SD=(()=>{class n{constructor(t,r,i,u,c){this.overlay=r,this._injector=i,this.sanitizer=u,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,u){const{includeTitleDuplicates:c}=this.toastrConfig;for(const p of this.toasts){const _=c&&p.title===t;if((!c||_)&&p.message===r)return p.toastRef.onDuplicate(i,u),p}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,u)):this._buildNotification(t,r,i,u)}_buildNotification(t,r,i,u){if(!u.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let b=r;r&&u.enableHtml&&(b=this.sanitizer.sanitize(d.q3G.HTML,r));const T=new VF(_),M=new TD(this.index,u,b,i,t,T),G=d.zs3.create({providers:[{provide:TD,useValue:M}],parent:this._injector}),Z=new FF(u.toastComponent,G),ue=_.attach(Z,u.newestOnTop);T.componentInstance=ue.instance;const _e={toastId:this.index,title:i||"",message:r||"",toastRef:T,onShown:T.afterActivate(),onHidden:T.afterClosed(),onTap:M.onTap(),onAction:M.onAction(),portal:ue};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{_e.toastRef.activate()})),this.toasts.push(_e),_e}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qP),d.LFG($F),d.LFG(d.zs3),d.LFG(Ra),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HF={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(SD),d.Y36(TD),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(d.d8E("@flyInOut",r.state),d.Tol(r.toastClasses),d.Udp("display",r.displayStyle))},attrs:HP,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(d.YNc(0,DF,3,0,"button",0),d.YNc(1,TF,3,5,"div",1),d.YNc(2,SF,1,3,"div",2),d.YNc(3,AF,2,4,"div",3),d.YNc(4,MF,2,2,"div",4)),2&t&&(d.Q6J("ngIf",r.options.closeButton),d.xp6(1),d.Q6J("ngIf",r.title),d.xp6(1),d.Q6J("ngIf",r.message&&r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.message&&!r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.options.progressBar))},dependencies:[Ln],encapsulation:2,data:{animation:[IF("flyInOut",[eM("inactive",sw({opacity:0})),eM("active",sw({opacity:1})),eM("removed",sw({opacity:0})),BP("inactive => active",VP("{{ easeTime }}ms {{ easing }}")),BP("active => removed",VP("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let GF=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:qP,useValue:{default:HF,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Co]}),n})();function qF(n,e){1&n&&(d.TgZ(0,"div",23)(1,"span",24),d._uU(2,"Loading..."),d.qZA()())}function zF(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"TODOS LOS CAMPOS SON OBLIGATORIOS"),d.qZA())}function WF(n,e){if(1&n&&(d.TgZ(0,"option",25),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t),d.xp6(1),d.Oqu(t)}}function ZF(n,e){if(1&n&&(d.TgZ(0,"option",25),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t),d.xp6(1),d.Oqu(t)}}function KF(n,e){if(1&n&&(d.TgZ(0,"option",25),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t),d.xp6(1),d.Oqu(t)}}function YF(n,e){if(1&n&&(d.TgZ(0,"option",25),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t),d.xp6(1),d.Oqu(t)}}function QF(n,e){if(1&n&&(d.TgZ(0,"option",25),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t),d.xp6(1),d.Oqu(t)}}function JF(n,e){if(1&n&&(d.TgZ(0,"option",25),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("ngValue",t),d.xp6(1),d.Oqu(t)}}let zP=(()=>{class n{constructor(t,r,i,u,c){this.fb=t,this._Servicio=r,this.router=i,this.toastr=u,this.aRouter=c,this.subbmited=!1,this.loading=!1,this.titleChange="Agregar Producto",this.mesa=["Mesa #1","Mesa #2","Mesa #3","Mesa #4","Mesa #5"],this.productos=["","Ensalada peque\xf1a"," Ensalada Grande","Estrella","Banana Split","Fresa Split","Copa cereza","Copa Oreo","Copa queso","Copa Arequipe","Banano Queso","Copa kiwi","helado chocorramo","Helado corazon","Malteada","Milo","Sunday","Michelada de soda","Fresas con chocolate","Maracumango","Brownie con helado","Cholado","Combo Tentacion","Paleta de agua","Paleta mango biche","cono","helado casero","chococono"],this.prices=[700,1e3,1500,2e3,2500,4e3,5e3,6e3,7e3,8e3,9e3,1e4],this.flavors=[],this.createProduct=this.fb.group({table:["",Rf.required],product:["",Rf.required],flavor:[""],flavor2:[""],flavor3:[""],price:["",Rf.required],note:["",Rf.maxLength(30)]}),this.id=this.aRouter.snapshot.paramMap.get("id")}ngOnInit(){this.EXeditProducto(),this.obtener()}agregarEditarProducto(){this.subbmited=!0,!this.createProduct.invalid&&(null===this.id?this.agregarProducto():this.editarProducto(this.id))}agregarProducto(){const t={table:this.createProduct.value.table,product:this.createProduct.value.product,flavor:this.createProduct.value.flavor,flavor2:this.createProduct.value.flavor2,flavor3:this.createProduct.value.flavor3,price:this.createProduct.value.price,note:this.createProduct.value.note,fechaCreacion:new Date,fechaActualizacion:new Date};this.loading=!0,this._Servicio.agregarproducto(t).then(()=>{this.toastr.success("Agregado con exito!!","Producto Agregado"),this.loading=!1,this.router.navigate(["/"])}).catch(r=>{console.log(r)})}editarProducto(t){this.loading=!0;const r={table:this.createProduct.value.table,product:this.createProduct.value.product,flavor:this.createProduct.value.flavor,flavor2:this.createProduct.value.flavor2,flavor3:this.createProduct.value.flavor3,price:this.createProduct.value.price,note:this.createProduct.value.note,fechaActualizacion:new Date};this._Servicio.update(t,r).then(()=>{this.loading=!1,this.toastr.info("Producto modificado con exito","Actualizacio Exitosa")}),this.router.navigate(["/"])}EXeditProducto(){null!==this.id&&(this.titleChange="Editar Producto",this.loading=!0,this._Servicio.getProducto(this.id).subscribe(t=>{this.loading=!1,this.createProduct.setValue({table:t.payload.data().table,product:t.payload.data().product,flavor:t.payload.data().flavor,flavor2:t.payload.data().flavor2,flavor3:t.payload.data().flavor3,price:t.payload.data().price,note:t.payload.data().note})}))}obtener(){this._Servicio.obtProductos().subscribe(t=>{this.flavors=[],t.forEach(r=>{this.flavors.push(r.payload.doc.data().sabor01,r.payload.doc.data().sabor02,r.payload.doc.data().sabor03,r.payload.doc.data().sabor04,r.payload.doc.data().sabor05,r.payload.doc.data().sabor06,r.payload.doc.data().sabor07,r.payload.doc.data().sabor08,r.payload.doc.data().sabor09,r.payload.doc.data().sabor10,r.payload.doc.data().sabor11,r.payload.doc.data().sabor12)}),console.log(this.flavors)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($E),d.Y36(CD),d.Y36(Dr),d.Y36(SD),d.Y36(Ui))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-create-product"]],decls:47,vars:10,consts:[[1,"add"],[1,""],[1,"card","text-white","bg-secondary","mb-3",2,"max-width","25rem"],[1,"card-header","text-center"],["class","spn spinner-border","role","status",4,"ngIf"],[1,"card-body"],[4,"ngIf"],[1,"mt-4","content-select",3,"formGroup","ngSubmit"],[1,"selector"],["id","table","formControlName","table"],[3,"ngValue",4,"ngFor","ngForOf"],["id","product","formControlName","product"],[1,"flavors"],[1,"sabor"],["id","flavor","formControlName","flavor"],["id","flavor2","formControlName","flavor2"],["id","flavor3","formControlName","flavor3"],["id","price","formControlName","price"],[1,"col"],["type","text","placeholder","Agregar nota","formControlName","note",1,"form-control","mt-2","text-center"],[1,"mt-3","text-center"],["type","text","routerLink","/",1,"btn","btn-secondary","btn-lg","mr-3"],["type","submit",1,"btn","btn-dark","btn-lg"],["role","status",1,"spn","spinner-border"],[1,"visually-hidden"],[3,"ngValue"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",1)(3,"div",2)(4,"h3",3),d._uU(5),d.YNc(6,qF,3,0,"div",4),d.qZA(),d.TgZ(7,"div",5),d.YNc(8,zF,2,0,"span",6),d.TgZ(9,"form",7),d.NdJ("ngSubmit",function(){return r.agregarEditarProducto()}),d.TgZ(10,"div",8)(11,"p"),d._uU(12,"Elegir Mesa"),d.qZA(),d.TgZ(13,"select",9),d.YNc(14,WF,2,2,"option",10),d.qZA(),d.TgZ(15,"p"),d._uU(16,"Elegir Producto"),d.qZA(),d.TgZ(17,"select",11),d.YNc(18,ZF,2,2,"option",10),d.qZA()(),d.TgZ(19,"div",12)(20,"div",13)(21,"p"),d._uU(22,"Sabor 1"),d.qZA(),d.TgZ(23,"select",14),d.YNc(24,KF,2,2,"option",10),d.qZA()(),d.TgZ(25,"div",13)(26,"p"),d._uU(27,"Sabor 2"),d.qZA(),d.TgZ(28,"select",15),d.YNc(29,YF,2,2,"option",10),d.qZA()(),d.TgZ(30,"div",13)(31,"p"),d._uU(32,"Sabor 3"),d.qZA(),d.TgZ(33,"select",16),d.YNc(34,QF,2,2,"option",10),d.qZA()()(),d.TgZ(35,"div",8)(36,"p"),d._uU(37,"Precio"),d.qZA(),d.TgZ(38,"select",17),d.YNc(39,JF,2,2,"option",10),d.qZA()(),d.TgZ(40,"div",18),d._UZ(41,"input",19),d.qZA(),d.TgZ(42,"div",20)(43,"button",21),d._uU(44,"Regresar"),d.qZA(),d.TgZ(45,"button",22),d._uU(46,"Aceptar"),d.qZA()()()()()()()()),2&t&&(d.xp6(5),d.hij("",r.titleChange," "),d.xp6(1),d.Q6J("ngIf",r.loading),d.xp6(2),d.Q6J("ngIf",r.subbmited&&r.createProduct.invalid),d.xp6(1),d.Q6J("formGroup",r.createProduct),d.xp6(5),d.Q6J("ngForOf",r.mesa),d.xp6(4),d.Q6J("ngForOf",r.productos),d.xp6(6),d.Q6J("ngForOf",r.flavors),d.xp6(5),d.Q6J("ngForOf",r.flavors),d.xp6(5),d.Q6J("ngForOf",r.flavors),d.xp6(5),d.Q6J("ngForOf",r.prices))},dependencies:[Wi,Ln,Xu,um,q_,$f,yc,G_,Kg,Lf,jf,Qd],styles:['@charset "UTF-8";.btn[_ngcontent-%COMP%]{margin-right:12px}.spn[_ngcontent-%COMP%]{float:right}.content-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none}.content-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.content-select[_ngcontent-%COMP%]{max-width:340px}.content-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin:5px;text-align:center;display:inline-block;width:100%;cursor:pointer;padding:7px 10px;height:42px;outline:0;border:0;background:rgba(240,240,240,.137254902);color:#f8f8f8;font-size:1em;color:#fbf9f9;font-family:Quicksand,sans-serif;border:2px solid rgba(240,240,240,.2);border-radius:12px;position:relative;transition:all .25s ease}.content-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{background:#de0d8e}.content-select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:20px;top:calc(50% - 13px);width:16px;height:16px;display:block;border-left:4px solid #f007c9;border-bottom:4px solid #d10feb;transform:rotate(-45deg);transition:all .25s ease}.content-select[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{margin-top:3px}.flavors[_ngcontent-%COMP%]{display:flex;gap:1em}.flavors[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .selector[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:12px;margin-bottom:0}.sabor[_ngcontent-%COMP%]{width:33%}.add[_ngcontent-%COMP%]{margin-top:12px;display:flex;justify-content:center;flex-wrap:wrap}']}),n})();function XF(n,e){1&n&&(d.TgZ(0,"h5",8),d._uU(1,"No hay productos agregados"),d.qZA())}const eL=function(n){return["/edit-product/",n]};function tL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr",12)(1,"td",13),d._uU(2),d.qZA(),d.TgZ(3,"td",14),d._uU(4),d.qZA(),d.TgZ(5,"td",15),d._uU(6),d._UZ(7,"br"),d._uU(8),d._UZ(9,"br"),d._uU(10),d.qZA(),d.TgZ(11,"td",16),d._uU(12),d.ALo(13,"currency"),d.qZA(),d.TgZ(14,"td",17),d._uU(15),d.qZA(),d.TgZ(16,"td",18),d._UZ(17,"i",19),d.TgZ(18,"i",20),d.NdJ("click",function(){const u=d.CHM(t).$implicit,c=d.oxw(2);return d.KtG(c.eliminarProducto(u.id))}),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.table),d.xp6(2),d.Oqu(t.product),d.xp6(2),d.Oqu(t.flavor),d.xp6(2),d.Oqu(t.flavor2),d.xp6(2),d.Oqu(t.flavor3),d.xp6(2),d.Oqu(d.gM2(13,8,t.price,"$","symbol","3.0")),d.xp6(3),d.Oqu(t.note),d.xp6(2),d.Q6J("routerLink",d.VKq(13,eL,t.id))}}function nL(n,e){if(1&n&&(d.TgZ(0,"table",9)(1,"thead")(2,"th",10),d._uU(3,"Mesa"),d.qZA(),d.TgZ(4,"th",10),d._uU(5,"Producto"),d.qZA(),d.TgZ(6,"th",10),d._uU(7,"Sabor(es)"),d.qZA(),d.TgZ(8,"th",10),d._uU(9,"Precio"),d.qZA(),d.TgZ(10,"th",10),d._uU(11,"Nota"),d.qZA(),d._UZ(12,"th",10),d.qZA(),d.TgZ(13,"tbody"),d.YNc(14,tL,19,15,"tr",11),d.qZA()()),2&n){const t=d.oxw();d.xp6(14),d.Q6J("ngForOf",t.productos)}}let rL=(()=>{class n{constructor(t,r){this._services=t,this.toastr=r,this.productos=[]}ngOnInit(){this.getProducts()}getProducts(){this._services.getProducts().subscribe(t=>{this.productos=[],t.forEach(r=>{this.productos.push({id:r.payload.doc.id,...r.payload.doc.data()})})})}eliminarProducto(t){this._services.deleteProducts(t).then(()=>{this.toastr.error("El producto fue eliminado con exito","Producto eliminado"),console.log("deleted...")}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(CD),d.Y36(SD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-list-products"]],decls:11,vars:2,consts:[[1,"contenedor","mt-4"],[1,"card"],[1,"prod"],[1,"h5"],[1,"float"],["routerLink","/create-product",1,"btn","btn-dark","btn-lg"],["class","mt-5",4,"ngIf"],["class","table",4,"ngIf"],[1,"mt-5"],[1,"table"],[1,"th"],["class","tr",4,"ngFor","ngForOf"],[1,"tr"],["data-label","Mesa:",1,"td"],["data-label","Producto:",1,"td"],["data-label","Sabor(es):",1,"td"],["data-label","Precio:",1,"td"],["data-label","Agregar Nota:",1,"td"],[2,"padding-left","136px","border-bottom","1px solid"],[1,"fas","fa-edit","fa-lg","text-info",3,"routerLink"],[1,"fas","fa-trash-alt","fa-lg","text-danger","mt-2",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),d._uU(4,"LISTA DE PRODUCTOS"),d.qZA(),d.TgZ(5,"div",4)(6,"button",5),d._uU(7,"Agregar"),d.qZA()(),d._UZ(8,"br"),d.YNc(9,XF,2,0,"h5",6),d.YNc(10,nL,15,1,"table",7),d.qZA()()()),2&t&&(d.xp6(9),d.Q6J("ngIf",0==r.productos.length),d.xp6(1),d.Q6J("ngIf",r.productos.length>0))},dependencies:[Wi,Ln,Xu,Ss],styles:[".float[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-right:6px}.h5[_ngcontent-%COMP%]{position:relative;top:39px;left:16px}i[_ngcontent-%COMP%]{cursor:pointer}.fas[_ngcontent-%COMP%]{margin-right:12px}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:3px 15px;text-align:center;font-size:16px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#92c9e6;color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#d9ff0026}@media (max-width: 500px){.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:15px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:50%;text-align:left;position:relative}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:0;width:50%;padding-left:15px;font-size:15px;font-weight:700;text-align:left}}"]}),n})();const iL=function(n){return["/adjust/",n]};function sL(n,e){if(1&n&&(d.TgZ(0,"div")(1,"div"),d._uU(2),d.qZA(),d.TgZ(3,"div"),d._uU(4),d.qZA(),d.TgZ(5,"div"),d._uU(6),d.qZA(),d.TgZ(7,"div"),d._uU(8),d.qZA(),d.TgZ(9,"div"),d._uU(10),d.qZA(),d.TgZ(11,"div"),d._uU(12),d.qZA(),d.TgZ(13,"div"),d._uU(14),d.qZA(),d.TgZ(15,"div"),d._uU(16),d.qZA(),d.TgZ(17,"div"),d._uU(18),d.qZA(),d.TgZ(19,"div"),d._uU(20),d.qZA(),d.TgZ(21,"div"),d._uU(22),d.qZA(),d.TgZ(23,"div"),d._uU(24),d.qZA(),d.TgZ(25,"div"),d._UZ(26,"i",1),d.qZA(),d.TgZ(27,"button",2),d._uU(28,"Regresar"),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.hij("sabor 1: ",t.sabor01," "),d.xp6(2),d.hij("sabor 2: ",t.sabor02," "),d.xp6(2),d.hij("sabor 3: ",t.sabor03," "),d.xp6(2),d.hij("sabor 4: ",t.sabor04," "),d.xp6(2),d.hij("sabor 5: ",t.sabor05," "),d.xp6(2),d.hij("sabor 6 ",t.sabor06," "),d.xp6(2),d.hij("sabor 7: ",t.sabor07," "),d.xp6(2),d.hij("sabor 8: ",t.sabor08," "),d.xp6(2),d.hij("sabor 9: ",t.sabor09," "),d.xp6(2),d.hij("sabor 10: ",t.sabor10," "),d.xp6(2),d.hij("sabor 11: ",t.sabor11," "),d.xp6(2),d.hij("sabor 12: ",t.sabor12," "),d.xp6(2),d.Q6J("routerLink",d.VKq(13,iL,t.id))}}const oL=[{path:"",redirectTo:"list-products",pathMatch:"full"},{path:"list-products",component:rL},{path:"create-product",component:zP},{path:"edit-product/:id",component:zP},{path:"mod",component:(()=>{class n{constructor(t){this._service=t,this.ajustes=[]}ngOnInit(){this.getAdjust()}getAdjust(){this._service.obtProductos().subscribe(t=>{this.ajustes=[],t.forEach(r=>{this.ajustes.push({id:r.payload.doc.id,...r.payload.doc.data()})})})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(CD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-modificar"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"fas","fa-edit","fa-lg","text-danger",3,"routerLink"],["type","text","routerLink","/",1,"btn","btn-secondary","btn-lg","mr-3"]],template:function(t,r){1&t&&(d.TgZ(0,"div"),d.YNc(1,sL,29,15,"div",0),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngForOf",r.ajustes))},dependencies:[Wi,Xu],styles:["div[_ngcontent-%COMP%]{margin:8px}"]}),n})()},{path:"crear",component:FP},{path:"adjust/:id",component:FP},{path:"**",redirectTo:"list-products",pathMatch:"full"}];let aL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ww.forRoot(oL),Ww]}),n})();const uL=function(){return["/mod/"]};let lL=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],decls:13,vars:2,consts:[[1,"nav"],["type","checkbox","id","nav__checkbox",1,"nav__checkbox"],["for","nav__checkbox",1,"nav__toggle"],["src","https://www.clipartmax.com/png/full/36-365828_navbar-toggle-icon-menu-hamburger-png-white.png",1,"hamburger"],[1,"close"],[1,"nav__menu"],[2,"color","rgba(255, 255, 255, 0)"],[1,"menu"],[2,"color","white",3,"routerLink"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0),d._UZ(1,"input",1),d.TgZ(2,"label",2),d._UZ(3,"img",3),d.TgZ(4,"span",4),d._uU(5,"X"),d.qZA()(),d.TgZ(6,"ul",5)(7,"li")(8,"span",6),d._uU(9," B "),d.qZA()(),d.TgZ(10,"li",7)(11,"a",8),d._uU(12,"Ajustar sabores"),d.qZA()()()()),2&t&&(d.xp6(11),d.Q6J("routerLink",d.DdM(1,uL)))},dependencies:[pc],styles:[".navbar[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}.adjust[_ngcontent-%COMP%]{margin-right:10px;cursor:pointer}.nav[_ngcontent-%COMP%]{border-bottom:1px solid rgb(254,252,252)}.nav__toggle[_ngcontent-%COMP%]{position:absolute;cursor:pointer;margin:0rem 1rem;right:0}.close[_ngcontent-%COMP%]{margin-top:8px;margin-left:4px;font-size:34px}.close[_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{margin-top:12px;width:30px;height:30px}.menu[_ngcontent-%COMP%]{position:relative;left:170px}.nav__menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;align-items:center;margin:1rem}li[_ngcontent-%COMP%]{list-style:none;display:none}li[_ngcontent-%COMP%]:first-child{margin-right:auto;display:block}.nav__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:initial;font-size:1.2rem}#nav__checkbox[_ngcontent-%COMP%]:checked ~ ul.nav__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}#nav__checkbox[_ngcontent-%COMP%]:checked ~ label.nav__toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{display:none}#nav__checkbox[_ngcontent-%COMP%]:checked ~ label.nav__toggle[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{display:block}@media only screen and (min-width: 768px){.nav__toggle[_ngcontent-%COMP%]{display:none}.nav__menu[_ngcontent-%COMP%]{flex-direction:row}.nav__menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}}"]}),n})(),cL=(()=>{class n{constructor(){this.title="IceCreamShop"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[If,lL]}),n})();const WP_firebase={apiKey:"AIzaSyDM-VLc0vP957ORl88fcEiciO4cPQJIFsc",authDomain:"icecreamproducts-ad8db.firebaseapp.com",projectId:"icecreamproducts-ad8db",storageBucket:"icecreamproducts-ad8db.appspot.com",messagingSenderId:"1033061040970",appId:"1:1033061040970:web:3a76ddad9e9b3e854277b3"};function ZP(n){return new d.vHH(3e3,!1)}function qL(){return typeof window<"u"&&typeof window.document<"u"}function nM(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function $h(n){switch(n.length){case 0:return new ow;case 1:return n[0];default:return new $P(n)}}function KP(n,e,t,r,i=new Map,u=new Map){const c=[],p=[];let _=-1,b=null;if(r.forEach(T=>{const M=T.get("offset"),L=M==_,G=L&&b||new Map;T.forEach((Z,ue)=>{let _e=ue,Ye=Z;if("offset"!==ue)switch(_e=e.normalizePropertyName(_e,c),Ye){case"!":Ye=i.get(ue);break;case Gc:Ye=u.get(ue);break;default:Ye=e.normalizeStyleValue(ue,_e,Ye,c)}G.set(_e,Ye)}),L||p.push(G),b=G,_=M}),c.length)throw function RL(n){return new d.vHH(3502,!1)}();return p}function rM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&iM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&iM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&iM(t,"destroy",n)))}}function iM(n,e,t){const u=sM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function sM(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Eo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function YP(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let oM=(n,e)=>!1,QP=(n,e,t)=>[],JP=null;function aM(n){const e=n.parentNode||n.host;return e===JP?null:e}(nM()||typeof Element<"u")&&(qL()?(JP=(()=>document.documentElement)(),oM=(n,e)=>{for(;e;){if(e===n)return!0;e=aM(e)}return!1}):oM=(n,e)=>n.contains(e),QP=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Wp=null,XP=!1;const eR=oM,tR=QP;let nR=(()=>{class n{validateStyleProperty(t){return function WL(n){Wp||(Wp=function ZL(){return typeof document<"u"?document.body:null}()||{},XP=!!Wp.style&&"WebkitAppearance"in Wp.style);let e=!0;return Wp.style&&!function zL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Wp.style,!e&&XP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Wp.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return eR(t,r)}getParentElement(t){return aM(t)}query(t,r,i){return tR(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],_){return new ow(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),uM=(()=>{class n{}return n.NOOP=new nR,n})();const lM="ng-enter",AD="ng-leave",MD="ng-trigger",xD=".ng-trigger",iR="ng-animating",cM=".ng-animating";function qc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:dM(parseFloat(e[1]),e[2])}function dM(n,e){return"s"===e?1e3*n:n}function ND(n,e,t){return n.hasOwnProperty("duration")?n:function QL(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(ZP()),{duration:0,delay:0,easing:""};i=dM(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(u=dM(parseFloat(_),p[4]));const b=p[5];b&&(c=b)}else i=n;if(!t){let p=!1,_=e.length;i<0&&(e.push(function dL(){return new d.vHH(3100,!1)}()),p=!0),u<0&&(e.push(function hL(){return new d.vHH(3101,!1)}()),p=!0),p&&e.splice(_,0,ZP())}return{duration:i,delay:u,easing:c}}(n,e,t)}function aw(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function sR(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Hh(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function aR(n,e,t){return t?e+":"+t+";":""}function uR(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=aR(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=aR(0,tV(t),n.style[t]));n.setAttribute("style",e)}function Cl(n,e,t){n.style&&(e.forEach((r,i)=>{const u=fM(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),nM()&&uR(n))}function Zp(n,e){n.style&&(e.forEach((t,r)=>{const i=fM(r);n.style[i]=""}),nM()&&uR(n))}function uw(n){return Array.isArray(n)?1==n.length?n[0]:UP(n):n}const hM=new RegExp("{{\\s*(.+?)\\s*}}","g");function lR(n){let e=[];if("string"==typeof n){let t;for(;t=hM.exec(n);)e.push(t[1]);hM.lastIndex=0}return e}function lw(n,e,t){const r=n.toString(),i=r.replace(hM,(u,c)=>{let p=e[c];return null==p&&(t.push(function pL(n){return new d.vHH(3003,!1)}()),p=""),p.toString()});return i==r?n:i}function PD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const eV=/-+([a-z0-9])/g;function fM(n){return n.replace(eV,(...e)=>e[1].toUpperCase())}function tV(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function bo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function gL(n){return new d.vHH(3004,!1)}()}}function cR(n,e){return window.getComputedStyle(n)[e]}function aV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function uV(n,e,t){if(":"==n[0]){const _=function lV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function ML(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function AL(n){return new d.vHH(3015,!1)}()),e;const i=r[1],u=r[2],c=r[3];e.push(dR(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(dR(c,i))}(r,t,e)):t.push(n),t}const FD=new Set(["true","1"]),LD=new Set(["false","0"]);function dR(n,e){const t=FD.has(n)||LD.has(n),r=FD.has(e)||LD.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?FD.has(n):LD.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?FD.has(e):LD.has(e)),c&&p}}const cV=new RegExp("s*:selfs*,?","g");function pM(n,e,t,r){return new dV(n).build(e,t,r)}class dV{constructor(e){this._driver=e}build(e,t,r){const i=new pV(t);return this._resetContextStyleTimingState(i),bo(this,uw(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function yL(){return new d.vHH(3006,!1)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,b=_.name;b.toString().split(/\s*,\s*/).forEach(T=>{_.name=T,u.push(this.visitState(_,t))}),_.name=b}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function _L(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{p instanceof Map&&p.forEach(_=>{lR(_).forEach(b=>{c.hasOwnProperty(b)||u.add(b)})})}),u.size&&(PD(u.values()),t.errors.push(function vL(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=bo(this,uw(e.animation),t);return{type:1,matchers:aV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Kp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>bo(this,r,t)),options:Kp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=bo(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:Kp(e.options)}}visitAnimate(e,t){const r=function mV(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return gM(ND(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=gM(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=ND(t,e);return gM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:sw({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=sw(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=p,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let p of i)"string"==typeof p?p===Gc?r.push(p):t.errors.push(new d.vHH(3002,!1)):r.push(sR(p));let u=!1,c=null;return r.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(c=p.get("easing"),p.delete("easing")),!u))for(let _ of p.values())if(_.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((p,_)=>{const b=t.collectedStyles.get(t.currentQuerySelector),T=b.get(_);let M=!0;T&&(u!=i&&u>=T.startTime&&i<=T.endTime&&(t.errors.push(function EL(n,e,t,r,i){return new d.vHH(3010,!1)}()),M=!1),u=T.startTime),M&&b.set(_,{startTime:u,endTime:i}),t.options&&function XL(n,e,t){const r=e.params||{},i=lR(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function fL(n){return new d.vHH(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function bL(){return new d.vHH(3011,!1)}()),r;let u=0;const c=[];let p=!1,_=!1,b=0;const T=e.steps.map(Ye=>{const at=this._makeStyleAst(Ye,t);let gt=null!=at.offset?at.offset:function gV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(at.styles),ct=0;return null!=gt&&(u++,ct=at.offset=gt),_=_||ct<0||ct>1,p=p||ct<b,b=ct,c.push(ct),at});_&&t.errors.push(function IL(){return new d.vHH(3012,!1)}()),p&&t.errors.push(function DL(){return new d.vHH(3200,!1)}());const M=e.steps.length;let L=0;u>0&&u<M?t.errors.push(function CL(){return new d.vHH(3202,!1)}()):0==u&&(L=1/(M-1));const G=M-1,Z=t.currentTime,ue=t.currentAnimateTimings,_e=ue.duration;return T.forEach((Ye,at)=>{const gt=L>0?at==G?1:L*at:c[at],ct=gt*_e;t.currentTime=Z+ue.delay+ct,ue.duration=ct,this._validateStyleAst(Ye,t),Ye.offset=gt,r.styles.push(Ye)}),r}visitReference(e,t){return{type:8,animation:bo(this,uw(e.animation),t),options:Kp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Kp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Kp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function hV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(cV,"")),n=n.replace(/@\*/g,xD).replace(/@\w+/g,t=>xD+"-"+t.slice(1)).replace(/:animating/g,cM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Eo(t.collectedStyles,t.currentQuerySelector,new Map);const p=bo(this,uw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:Kp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function TL(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:ND(e.timings,t.errors,!0);return{type:12,animation:bo(this,uw(e.animation),t),timings:r,options:null}}}class pV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Kp(n){return n?(n=aw(n)).params&&(n.params=function fV(n){return n?aw(n):null}(n.params)):n={},n}function gM(n,e,t){return{duration:n,delay:e,easing:t}}function mM(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class VD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vV=new RegExp(":enter","g"),EV=new RegExp(":leave","g");function yM(n,e,t,r,i,u=new Map,c=new Map,p,_,b=[]){return(new bV).buildKeyframes(n,e,t,r,i,u,c,p,_,b)}class bV{buildKeyframes(e,t,r,i,u,c,p,_,b,T=[]){b=b||new VD;const M=new _M(e,t,b,i,u,T,[]);M.options=_;const L=_.delay?qc(_.delay):0;M.currentTimeline.delayNextStep(L),M.currentTimeline.setStyles([c],null,M.errors,_),bo(this,r,M);const G=M.timelines.filter(Z=>Z.containsAnimation());if(G.length&&p.size){let Z;for(let ue=G.length-1;ue>=0;ue--){const _e=G[ue];if(_e.element===t){Z=_e;break}}Z&&!Z.allowOnlyTimelineStyles()&&Z.setStyles([p],null,M.errors,_)}return G.length?G.map(Z=>Z.buildKeyframes()):[mM(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const c="number"==typeof u?u:qc(lw(u,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?qc(r.duration):null,p=null!=r.delay?qc(r.delay):null;return 0!==c&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),bo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=UD);const c=qc(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>bo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?qc(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),bo(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return ND(t.params?lw(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*u),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?qc(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=UD);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((b,T)=>{t.currentQueryIndex=T;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(_=M.currentTimeline),bo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const T=t.currentTimeline;_&&T.delayNextStep(_);const M=T.currentTime;bo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const UD={};class _M{constructor(e,t,r,i,u,c,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=UD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new BD(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=qc(r.duration)),null!=r.delay&&(i.delay=qc(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=lw(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new _M(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=UD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new IV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(vV,"."+this._enterClassName)).replace(EV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function SL(n){return new d.vHH(3014,!1)}()),p}}class BD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new BD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Gc),this._currentKeyframe.set(t,Gc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},c=function DV(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,Gc)}else Hh(i,t)}),t}(e,this._globalTimelineStyles);for(let[p,_]of c){const b=lw(_,u,r);this._pendingStyles.set(p,b),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??Gc),this._updateStyle(p,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,_)=>{const b=Hh(p,new Map,this._backFill);b.forEach((T,M)=>{"!"===T?e.add(M):T===Gc&&t.add(M)}),r||b.set("offset",_/this.duration),i.push(b)});const u=e.size?PD(e.values()):[],c=t.size?PD(t.values()):[];if(r){const p=i[0],_=new Map(p);p.set("offset",0),_.set("offset",1),i=[p,_]}return mM(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class IV extends BD{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,_=Hh(e[0]);_.set("offset",0),u.push(_);const b=Hh(e[0]);b.set("offset",pR(p)),u.push(b);const T=e.length-1;for(let M=1;M<=T;M++){let L=Hh(e[M]);const G=L.get("offset");L.set("offset",pR((t+G*r)/c)),u.push(L)}r=c,t=0,i="",e=u}return mM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function pR(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class vM{}const CV=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class TV extends vM{normalizePropertyName(e,t){return fM(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(CV.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function mL(n,e){return new d.vHH(3005,!1)}())}return c+u}}function gR(n,e,t,r,i,u,c,p,_,b,T,M,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:_,preStyleProps:b,postStyleProps:T,totalTime:M,errors:L}}const wM={};class mR{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function SV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,c,p,_,b,T){const M=[],L=this.ast.options&&this.ast.options.params||wM,Z=this.buildStyles(r,p&&p.params||wM,M),ue=_&&_.params||wM,_e=this.buildStyles(i,ue,M),Ye=new Set,at=new Map,gt=new Map,ct="void"===i,St={params:AV(ue,L),delay:this.ast.options?.delay},Pt=T?[]:yM(e,t,this.ast.animation,u,c,Z,_e,St,b,M);let ln=0;if(Pt.forEach(zc=>{ln=Math.max(zc.duration+zc.delay,ln)}),M.length)return gR(t,this._triggerName,r,i,ct,Z,_e,[],[],at,gt,ln,M);Pt.forEach(zc=>{const Wc=zc.element,NR=Eo(at,Wc,new Set);zc.preStyleProps.forEach(Yp=>NR.add(Yp));const dw=Eo(gt,Wc,new Set);zc.postStyleProps.forEach(Yp=>dw.add(Yp)),Wc!==t&&Ye.add(Wc)});const _s=PD(Ye.values());return gR(t,this._triggerName,r,i,ct,Z,_e,Pt,_s,at,gt,ln)}}function AV(n,e){const t=aw(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class MV{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=aw(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(i[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,p)=>{c&&(c=lw(c,i,t));const _=this.normalizer.normalizePropertyName(p,t);c=this.normalizer.normalizeStyleValue(p,_,c,t),r.set(_,c)})}),r}}class NV{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new MV(i.style,i.options&&i.options.params||{},r))}),yR(this.states,"true","1"),yR(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new mR(e,i,this.states))}),this.fallbackTransition=function PV(n,e,t){return new mR(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function yR(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const RV=new VD;class OV{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=pM(this._driver,t,r,[]);if(r.length)throw function OL(n){return new d.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=KP(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let c;const p=new Map;if(u?(c=yM(this._driver,t,u,lM,AD,new Map,new Map,r,RV,i),c.forEach(T=>{const M=Eo(p,T.element,new Map);T.postStyleProps.forEach(L=>M.set(L,null))})):(i.push(function kL(){return new d.vHH(3300,!1)}()),c=[]),i.length)throw function FL(n){return new d.vHH(3504,!1)}();p.forEach((T,M)=>{T.forEach((L,G)=>{T.set(G,this._driver.computeStyle(M,G,Gc))})});const b=$h(c.map(T=>{const M=p.get(T.element);return this._buildPlayer(T,new Map,M)}));return this._playersById.set(e,b),b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function LL(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=sM(t,"","","");return rM(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const _R="ng-animate-queued",EM="ng-animate-disabled",UV=[],vR={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},BV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ca="__ng_removed";class bM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function GV(n){return n??null}(r?e.value:e),r){const u=aw(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const cw="void",IM=new bM(cw);class jV{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,da(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function VL(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function UL(n){return new d.vHH(3303,!1)}();if(!function qV(n){return"start"==n||"done"==n}(r))throw function BL(n,e){return new d.vHH(3400,!1)}();const u=Eo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=Eo(this._engine.statesByElement,e,new Map);return p.has(t)||(da(e,MD),da(e,MD+"-"+t),p.set(t,IM)),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers.has(t)||p.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function jL(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new DM(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(da(e,MD),da(e,MD+"-"+t),this._engine.statesByElement.set(e,p=new Map));let _=p.get(t);const b=new bM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),p.set(t,b),_||(_=IM),b.value!==cw&&_.value===b.value){if(!function ZV(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,b.params)){const ue=[],_e=u.matchStyles(_.value,_.params,ue),Ye=u.matchStyles(b.value,b.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{Zp(e,_e),Cl(e,Ye)})}return}const L=Eo(this._engine.playersByElement,e,[]);L.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==t&&ue.queued&&ue.destroy()});let G=u.matchTransition(_.value,b.value,e,b.params),Z=!1;if(!G){if(!i)return;G=u.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:G,fromState:_,toState:b,player:c,isFallbackTransition:Z}),Z||(da(e,_R),c.onStart(()=>{Uy(e,_R)})),c.onDone(()=>{let ue=this.players.indexOf(c);ue>=0&&this.players.splice(ue,1);const _e=this._engine.playersByElement.get(e);if(_e){let Ye=_e.indexOf(c);Ye>=0&&_e.splice(Ye,1)}}),this.players.push(c),L.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,xD,!0);r.forEach(i=>{if(i[ca])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(u.forEach((_,b)=>{if(c.set(b,_.value),this._triggers.has(b)){const T=this.trigger(e,b,cw,i);T&&p.push(T)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&$h(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const _=this._triggers.get(c).fallbackTransition,b=r.get(c)||IM,T=new bM(cw),M=new DM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:b,toState:T,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[ca];(!u||u===vR)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){da(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const _=sM(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,rM(r.player,p.phase,_,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class $V{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new jV(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,p=this.driver.getParentElement(t);for(;p;){const _=i.get(p);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(jD(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!jD(t))return;const u=t[ca];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),da(e,EM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Uy(e,EM))}removeNode(e,t,r,i){if(jD(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[ca]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return jD(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,xD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,cM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return $h(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ca];if(t&&t.setForRemoval){if(e[ca]=vR,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(EM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)da(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?$h(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function $L(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new VD,i=[],u=new Map,c=[],p=new Map,_=new Map,b=new Map,T=new Set;this.disabledNodes.forEach(pt=>{T.add(pt);const At=this.driver.query(pt,".ng-animate-queued",!0);for(let Ot=0;Ot<At.length;Ot++)T.add(At[Ot])});const M=this.bodyNode,L=Array.from(this.statesByElement.keys()),G=bR(L,this.collectedEnterElements),Z=new Map;let ue=0;G.forEach((pt,At)=>{const Ot=lM+ue++;Z.set(At,Ot),pt.forEach(mn=>da(mn,Ot))});const _e=[],Ye=new Set,at=new Set;for(let pt=0;pt<this.collectedLeaveElements.length;pt++){const At=this.collectedLeaveElements[pt],Ot=At[ca];Ot&&Ot.setForRemoval&&(_e.push(At),Ye.add(At),Ot.hasAnimation?this.driver.query(At,".ng-star-inserted",!0).forEach(mn=>Ye.add(mn)):at.add(At))}const gt=new Map,ct=bR(L,Array.from(Ye));ct.forEach((pt,At)=>{const Ot=AD+ue++;gt.set(At,Ot),pt.forEach(mn=>da(mn,Ot))}),e.push(()=>{G.forEach((pt,At)=>{const Ot=Z.get(At);pt.forEach(mn=>Uy(mn,Ot))}),ct.forEach((pt,At)=>{const Ot=gt.get(At);pt.forEach(mn=>Uy(mn,Ot))}),_e.forEach(pt=>{this.processLeaveNode(pt)})});const St=[],Pt=[];for(let pt=this._namespaceList.length-1;pt>=0;pt--)this._namespaceList[pt].drainQueuedTransitions(t).forEach(Ot=>{const mn=Ot.player,Ei=Ot.element;if(St.push(mn),this.collectedEnterElements.length){const qi=Ei[ca];if(qi&&qi.setForMove){if(qi.previousTriggersValues&&qi.previousTriggersValues.has(Ot.triggerName)){const Qp=qi.previousTriggersValues.get(Ot.triggerName),ha=this.statesByElement.get(Ot.element);if(ha&&ha.has(Ot.triggerName)){const GD=ha.get(Ot.triggerName);GD.value=Qp,ha.set(Ot.triggerName,GD)}}return void mn.destroy()}}const Tl=!M||!this.driver.containsElement(M,Ei),Io=gt.get(Ei),Gh=Z.get(Ei),vr=this._buildInstruction(Ot,r,Gh,Io,Tl);if(vr.errors&&vr.errors.length)return void Pt.push(vr);if(Tl)return mn.onStart(()=>Zp(Ei,vr.fromStyles)),mn.onDestroy(()=>Cl(Ei,vr.toStyles)),void i.push(mn);if(Ot.isFallbackTransition)return mn.onStart(()=>Zp(Ei,vr.fromStyles)),mn.onDestroy(()=>Cl(Ei,vr.toStyles)),void i.push(mn);const OR=[];vr.timelines.forEach(qi=>{qi.stretchStartingKeyframe=!0,this.disabledNodes.has(qi.element)||OR.push(qi)}),vr.timelines=OR,r.append(Ei,vr.timelines),c.push({instruction:vr,player:mn,element:Ei}),vr.queriedElements.forEach(qi=>Eo(p,qi,[]).push(mn)),vr.preStyleProps.forEach((qi,Qp)=>{if(qi.size){let ha=_.get(Qp);ha||_.set(Qp,ha=new Set),qi.forEach((GD,SM)=>ha.add(SM))}}),vr.postStyleProps.forEach((qi,Qp)=>{let ha=b.get(Qp);ha||b.set(Qp,ha=new Set),qi.forEach((GD,SM)=>ha.add(SM))})});if(Pt.length){const pt=[];Pt.forEach(At=>{pt.push(function HL(n,e){return new d.vHH(3505,!1)}())}),St.forEach(At=>At.destroy()),this.reportError(pt)}const ln=new Map,_s=new Map;c.forEach(pt=>{const At=pt.element;r.has(At)&&(_s.set(At,At),this._beforeAnimationBuild(pt.player.namespaceId,pt.instruction,ln))}),i.forEach(pt=>{const At=pt.element;this._getPreviousPlayers(At,!1,pt.namespaceId,pt.triggerName,null).forEach(mn=>{Eo(ln,At,[]).push(mn),mn.destroy()})});const zc=_e.filter(pt=>DR(pt,_,b)),Wc=new Map;ER(Wc,this.driver,at,b,Gc).forEach(pt=>{DR(pt,_,b)&&zc.push(pt)});const dw=new Map;G.forEach((pt,At)=>{ER(dw,this.driver,new Set(pt),_,"!")}),zc.forEach(pt=>{const At=Wc.get(pt),Ot=dw.get(pt);Wc.set(pt,new Map([...Array.from(At?.entries()??[]),...Array.from(Ot?.entries()??[])]))});const Yp=[],PR=[],RR={};c.forEach(pt=>{const{element:At,player:Ot,instruction:mn}=pt;if(r.has(At)){if(T.has(At))return Ot.onDestroy(()=>Cl(At,mn.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(mn.totalTime),void i.push(Ot);let Ei=RR;if(_s.size>1){let Io=At;const Gh=[];for(;Io=Io.parentNode;){const vr=_s.get(Io);if(vr){Ei=vr;break}Gh.push(Io)}Gh.forEach(vr=>_s.set(vr,Ei))}const Tl=this._buildAnimation(Ot.namespaceId,mn,ln,u,dw,Wc);if(Ot.setRealPlayer(Tl),Ei===RR)Yp.push(Ot);else{const Io=this.playersByElement.get(Ei);Io&&Io.length&&(Ot.parentPlayer=$h(Io)),i.push(Ot)}}else Zp(At,mn.fromStyles),Ot.onDestroy(()=>Cl(At,mn.toStyles)),PR.push(Ot),T.has(At)&&i.push(Ot)}),PR.forEach(pt=>{const At=u.get(pt.element);if(At&&At.length){const Ot=$h(At);pt.setRealPlayer(Ot)}}),i.forEach(pt=>{pt.parentPlayer?pt.syncPlayerEvents(pt.parentPlayer):pt.destroy()});for(let pt=0;pt<_e.length;pt++){const At=_e[pt],Ot=At[ca];if(Uy(At,AD),Ot&&Ot.hasAnimation)continue;let mn=[];if(p.size){let Tl=p.get(At);Tl&&Tl.length&&mn.push(...Tl);let Io=this.driver.query(At,cM,!0);for(let Gh=0;Gh<Io.length;Gh++){let vr=p.get(Io[Gh]);vr&&vr.length&&mn.push(...vr)}}const Ei=mn.filter(Tl=>!Tl.destroyed);Ei.length?zV(this,At,Ei):this.processLeaveNode(At)}return _e.length=0,Yp.forEach(pt=>{this.players.push(pt),pt.onDone(()=>{pt.destroy();const At=this.players.indexOf(pt);this.players.splice(At,1)}),pt.play()}),Yp}elementContainsData(e,t){let r=!1;const i=t[ca];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const _=!u||u==cw;p.forEach(b=>{b.queued||!_&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,T=b!==u,M=Eo(r,b,[]);this._getPreviousPlayers(b,T,c,p,t.toState).forEach(G=>{const Z=G.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),G.destroy(),M.push(G)})}Zp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,_=t.element,b=[],T=new Set,M=new Set,L=t.timelines.map(Z=>{const ue=Z.element;T.add(ue);const _e=ue[ca];if(_e&&_e.removedBeforeQueried)return new ow(Z.duration,Z.delay);const Ye=ue!==_,at=function WV(n){const e=[];return IR(n,e),e}((r.get(ue)||UV).map(ln=>ln.getRealPlayer())).filter(ln=>!!ln.element&&ln.element===ue),gt=u.get(ue),ct=c.get(ue),St=KP(0,this._normalizer,0,Z.keyframes,gt,ct),Pt=this._buildPlayer(Z,St,at);if(Z.subTimeline&&i&&M.add(ue),Ye){const ln=new DM(e,p,ue);ln.setRealPlayer(Pt),b.push(ln)}return Pt});b.forEach(Z=>{Eo(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function HV(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Z.element,Z))}),T.forEach(Z=>da(Z,iR));const G=$h(L);return G.onDestroy(()=>{T.forEach(Z=>Uy(Z,iR)),Cl(_,t.toStyles)}),M.forEach(Z=>{Eo(i,Z,[]).push(G)}),G}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ow(e.duration,e.delay)}}class DM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ow,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>rM(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Eo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function jD(n){return n&&1===n.nodeType}function wR(n,e){const t=n.style.display;return n.style.display=e??"none",t}function ER(n,e,t,r,i){const u=[];t.forEach(_=>u.push(wR(_)));const c=[];r.forEach((_,b)=>{const T=new Map;_.forEach(M=>{const L=e.computeStyle(b,M,i);T.set(M,L),(!L||0==L.length)&&(b[ca]=BV,c.push(b))}),n.set(b,T)});let p=0;return t.forEach(_=>wR(_,u[p++])),c}function bR(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let _=u.get(p);if(_)return _;const b=p.parentNode;return _=t.has(b)?b:i.has(b)?1:c(b),u.set(p,_),_}return e.forEach(p=>{const _=c(p);1!==_&&t.get(_).push(p)}),t}function da(n,e){n.classList?.add(e)}function Uy(n,e){n.classList?.remove(e)}function zV(n,e,t){$h(t).onDone(()=>n.processLeaveNode(e))}function IR(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof $P?IR(r.players,e):e.push(r)}}function DR(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class $D{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new $V(e,t,r),this._timelineEngine=new OV(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const _=[],T=pM(this._driver,u,_,[]);if(_.length)throw function PL(n,e){return new d.vHH(3404,!1)}();p=function xV(n,e,t){return new NV(n,e,t)}(i,T,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=YP(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=YP(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let YV=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Cl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Cl(this._element,this._initialStyles),this._endStyles&&(Cl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zp(this._element,this._endStyles),this._endStyles=null),Cl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function CM(n){let e=null;return n.forEach((t,r)=>{(function QV(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class CR{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:cR(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class JV{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return eR(e,t)}getParentElement(e){return aM(e)}query(e,t,r){return tR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const b=new Map,T=c.filter(G=>G instanceof CR);(function nV(n,e){return 0===n||0===e})(r,i)&&T.forEach(G=>{G.currentSnapshot.forEach((Z,ue)=>b.set(ue,Z))});let M=function JL(n){return n.length?n[0]instanceof Map?n:n.map(e=>sR(e)):[]}(t).map(G=>Hh(G));M=function rV(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,c)=>{r.has(c)||i.push(c),r.set(c,u)}),i.length)for(let u=1;u<e.length;u++){let c=e[u];i.forEach(p=>c.set(p,cR(n,p)))}}return e}(e,M,b);const L=function KV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=CM(e[0]),e.length>1&&(r=CM(e[e.length-1]))):e instanceof Map&&(t=CM(e)),t||r?new YV(n,t,r):null}(e,M);return new CR(e,M,_,L)}}let XV=(()=>{class n extends LP{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?UP(t):t;return TR(this._renderer,null,r,"register",[i]),new eU(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class eU extends class bF{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new tU(this._id,e,t||{},this._renderer)}}class tU{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return TR(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function TR(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const SR="@.disabled";let nU=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=c?.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(u);return T||(T=new AR("",u,this.engine),this._rendererCache.set(u,T)),T}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=T=>{Array.isArray(T)?T.forEach(_):this.engine.registerTrigger(c,p,t,T.name,T)};return r.data.animation.forEach(_),new rU(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG($D),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class AR{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==SR?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class rU extends AR{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==SR?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function iU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function sU(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let oU=(()=>{class n extends $D{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae),d.LFG(uM),d.LFG(vM),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const MR=[{provide:LP,useClass:XV},{provide:vM,useFactory:function aU(){return new TV}},{provide:$D,useClass:oU},{provide:d.FYo,useFactory:function uU(n,e,t){return new nU(n,e,t)},deps:[Xs,$D,d.R0b]}],TM=[{provide:uM,useFactory:()=>new JV},{provide:d.QbO,useValue:"BrowserAnimations"},...MR],xR=[{provide:uM,useClass:nR},{provide:d.QbO,useValue:"NoopAnimations"},...MR];let lU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?xR:TM}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:TM,imports:[Ou]}),n})(),cU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[cL]}),n.\u0275inj=d.cJS({imports:[Ou,aL,ei.hO.initializeApp(WP_firebase),jE,lU,GF.forRoot({timeOut:4e3,positionClass:"toast-bottom-right",preventDuplicates:!0})]}),n})();(0,d.G48)(),Ru().bootstrapModule(cU).catch(n=>console.error(n))},5867:(dt,Ae,k)=>{k.d(Ae,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=k(9681);(0,d.registerVersion)("firebase","9.12.1","app")},127:(dt,Ae,k)=>{k.d(Ae,{Z:()=>d.Z});var d=k(3942);d.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(dt,Ae,k)=>{k.r(Ae);var d=k(5861),ee=k(3942),R=k(2090),se=k(9681),re=k(1877),de=k(655),ae=k(4859);const be=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new R.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new re.Yd("@firebase/auth");function ot(y,...f){Xe.logLevel<=re.in.ERROR&&Xe.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Me(y,...f){throw je(y,...f)}function we(y,...f){return je(y,...f)}function De(y,f,m){const w=Object.assign(Object.assign({},nt()),{[f]:m});return new R.LL("auth","Firebase",w).create(f,{appName:y.name})}function Be(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Me(y,"argument-error"),De(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...f){if("string"!=typeof y){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(m,...w)}return me.create(y,...f)}function U(y,f,...m){if(!y)throw je(f,...m)}function ge(y){const f="INTERNAL ASSERTION FAILED: "+y;throw ot(f),new Error(f)}function z(y,f){y||ge(f)}const J=new Map;function ne(y){z(y instanceof Function,"Expected a class definition");let f=J.get(y);return f?(z(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,J.set(y,f),f)}function Re(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function mt(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class cn{constructor(f,m){this.shortDelay=f,this.longDelay=m,z(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,R.uI)()||(0,R.b$)()}get(){return function Gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mt()||(0,R.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wn(y,f){z(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Qt{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Fr=new cn(3e4,6e4);function Ft(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function fn(y,f,m,w){return zi.apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(y,f,m,w,A={}){return bi(y,A,(0,d.Z)(function*(){let P={},q={};w&&("GET"===f?q=w:P={body:JSON.stringify(w)});const le=(0,R.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Qt.fetch()(Ii(y,y.config.apiHost,m,le),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function bi(y,f,m){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,d.Z)(function*(y,f,m){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},en),f);try{const A=new ii(y),P=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const q=yield P.json();if("needConfirmation"in q)throw si(y,"account-exists-with-different-credential",q);if(P.ok&&!("errorMessage"in q))return q;{const le=P.ok?q.errorMessage:q.error.message,[Fe,Je]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw si(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Fe)throw si(y,"email-already-in-use",q);if("USER_DISABLED"===Fe)throw si(y,"user-disabled",q);const vt=w[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw De(y,vt,Je);Me(y,vt)}}catch(A){if(A instanceof R.ZR)throw A;Me(y,"network-request-failed")}})).apply(this,arguments)}function Zr(y,f,m,w){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(y,f,m,w,A={}){const P=yield fn(y,f,m,w,A);return"mfaPendingCredential"in P&&Me(y,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Ii(y,f,m,w){const A=`${f}${m}?${w}`;return y.config.emulator?wn(y.config,A):`${y.config.apiScheme}://${A}`}class ii{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(we(this.auth,"network-request-failed")),Fr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function si(y,f,m){const w={appName:y.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const A=we(y,f,w);return A.customData._tokenResponse=m,A}function Ke(){return(Ke=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Mr(y,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function tr(y,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Pi(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function _n(){return(_n=(0,d.Z)(function*(y,f=!1){const m=(0,R.m9)(y),w=yield m.getIdToken(f),A=ut(w);U(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,q=P?.sign_in_provider;return{claims:A,token:w,authTime:Pi(yt(A.auth_time)),issuedAtTime:Pi(yt(A.iat)),expirationTime:Pi(yt(A.exp)),signInProvider:q||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function yt(y){return 1e3*Number(y)}function ut(y){var f;const[m,w,A]=y.split(".");if(void 0===m||void 0===w||void 0===A)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,R.tV)(w);return P?JSON.parse(P):(ot("Failed to decode base64 JWT payload"),null)}catch(P){return ot("Caught error parsing JWT payload as JSON",null===(f=P)||void 0===f?void 0:f.toString()),null}}function wr(y,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof R.ZR&&Kr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Kr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class xt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,d.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(m=w)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class ws{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tn(y){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,d.Z)(function*(y){var f;const m=y.auth,w=yield y.getIdToken(),A=yield wr(y,tr(m,{idToken:w}));U(A?.users.length,m,"internal-error");const P=A.users[0];y._notifyReloadListener(P);const q=null!==(f=P.providerUserInfo)&&void 0!==f&&f.length?tt(P.providerUserInfo):[],le=Vr(y.providerData,q),vt=!!y.isAnonymous&&!(y.email&&P.passwordHash||le?.length),_t={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:le,metadata:new ws(P.createdAt,P.lastLoginAt),isAnonymous:vt};Object.assign(y,_t)})).apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(y){const f=(0,R.m9)(y);yield tn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Vr(y,f){return[...y.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function tt(y){return y.map(f=>{var{providerId:m}=f,w=(0,de._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function et(){return(et=(0,d.Z)(function*(y,f){const m=yield bi(y,{},(0,d.Z)(function*(){const w=(0,R.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:P}=y.config,q=Ii(y,A,"/v1/token",`key=${P}`),le=yield y._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Qt.fetch()(q,{method:"POST",headers:le,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function an(y){const f=ut(y);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,d.Z)(function*(){return U(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:q}=yield function Ce(y,f){return et.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(A,P,Number(q))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:A,expirationTime:P}=m,q=new Ct;return w&&(U("string"==typeof w,"internal-error",{appName:f}),q.refreshToken=w),A&&(U("string"==typeof A,"internal-error",{appName:f}),q.accessToken=A),P&&(U("number"==typeof P,"internal-error",{appName:f}),q.expirationTime=P),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return ge("not implemented")}}function It(y,f){U("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Ut{constructor(f){var{uid:m,auth:w,stsTokenManager:A}=f,P=(0,de._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new ws(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const w=yield wr(m,m.stsTokenManager.getToken(m.auth,f));return U(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function Gn(y){return _n.apply(this,arguments)}(this,f)}reload(){return function nn(y){return nr.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ut(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,d.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield tn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield wr(f,function fa(y,f){return Ke.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,A,P,q,le,Fe,Je,vt;const _t=null!==(w=m.displayName)&&void 0!==w?w:void 0,Qn=null!==(A=m.email)&&void 0!==A?A:void 0,An=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Fd=null!==(q=m.photoURL)&&void 0!==q?q:void 0,lc=null!==(le=m.tenantId)&&void 0!==le?le:void 0,cc=null!==(Fe=m._redirectEventId)&&void 0!==Fe?Fe:void 0,e_=null!==(Je=m.createdAt)&&void 0!==Je?Je:void 0,Ag=null!==(vt=m.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:dc,emailVerified:t_,isAnonymous:n_,providerData:Zo,stsTokenManager:qa}=m;U(dc&&qa,f,"internal-error");const Df=Ct.fromJSON(this.name,qa);U("string"==typeof dc,f,"internal-error"),It(_t,f.name),It(Qn,f.name),U("boolean"==typeof t_,f,"internal-error"),U("boolean"==typeof n_,f,"internal-error"),It(An,f.name),It(Fd,f.name),It(lc,f.name),It(cc,f.name),It(e_,f.name),It(Ag,f.name);const Ld=new Ut({uid:dc,auth:f,email:Qn,emailVerified:t_,displayName:_t,isAnonymous:n_,photoURL:Fd,phoneNumber:An,tenantId:lc,stsTokenManager:Df,createdAt:e_,lastLoginAt:Ag});return Zo&&Array.isArray(Zo)&&(Ld.providerData=Zo.map(Ju=>Object.assign({},Ju))),cc&&(Ld._redirectEventId=cc),Ld}static _fromIdTokenResponse(f,m,w=!1){return(0,d.Z)(function*(){const A=new Ct;A.updateFromServerResponse(m);const P=new Ut({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield tn(P),P})()}}const V=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var A=this;return(0,d.Z)(function*(){A.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const A=w.storage[m];return void 0===A?null:A})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return y.type="NONE",y})();function W(y,f,m){return`firebase:${y}:${f}:${m}`}class Ee{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:A,name:P}=this.auth;this.fullUserKey=W(this.userKey,A.apiKey,P),this.fullPersistenceKey=W("persistence",A.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Ut._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new Ee(ne(V),f,w);const A=(yield Promise.all(m.map(function(){var Je=(0,d.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let P=A[0]||ne(V);const q=W(w,f.config.apiKey,f.name);let le=null;for(const Je of m)try{const vt=yield Je._get(q);if(vt){const _t=Ut._fromJSON(f,vt);Je!==P&&(le=_t),P=Je;break}}catch{}const Fe=A.filter(Je=>Je._shouldAllowMigration);return P._shouldAllowMigration&&Fe.length?(P=Fe[0],le&&(yield P._set(q,le.toJSON())),yield Promise.all(m.map(function(){var Je=(0,d.Z)(function*(vt){if(vt!==P)try{yield vt._remove(q)}catch{}});return function(vt){return Je.apply(this,arguments)}}())),new Ee(P,f,w)):new Ee(P,f,w)})()}}function Q(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(yn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(He(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ve(f))return"Blackberry";if($e(f))return"Webos";if(ht(f))return"Safari";if((f.includes("chrome/")||Jt(f))&&!f.includes("edge/"))return"Chrome";if(Zt(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function He(y=(0,R.z$)()){return/firefox\//i.test(y)}function ht(y=(0,R.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Jt(y=(0,R.z$)()){return/crios\//i.test(y)}function yn(y=(0,R.z$)()){return/iemobile/i.test(y)}function Zt(y=(0,R.z$)()){return/android/i.test(y)}function Ve(y=(0,R.z$)()){return/blackberry/i.test(y)}function $e(y=(0,R.z$)()){return/webos/i.test(y)}function Ht(y=(0,R.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Gs(y=(0,R.z$)()){return Ht(y)||Zt(y)||$e(y)||Ve(y)||/windows phone/i.test(y)||yn(y)}function Es(y,f=[]){let m;switch(y){case"Browser":m=Q((0,R.z$)());break;case"Worker":m=`${Q((0,R.z$)())}-${y}`;break;default:m=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${se.SDK_VERSION}/${w}`}class Do{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=P=>new Promise((q,le)=>{try{q(f(P))}catch(Fe){le(Fe)}});w.onAbort=m,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){var w;if(m.auth.currentUser===f)return;const A=[];try{for(const P of m.queue)yield P(f),P.onAbort&&A.push(P.onAbort)}catch(P){A.reverse();for(const q of A)try{q()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=P)||void 0===w?void 0:w.message})}})()}}class Bt{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qs(this),this.idTokenSubscription=new qs(this),this.beforeStateQueue=new Do(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=ne(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,P;if(!w._deleted&&(w.persistenceManager=yield Ee.create(w,f),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var w;const A=yield m.assertedPersistence.getCurrentUser();let P=A,q=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const le=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Fe=P?._redirectEventId,Je=yield m.tryRedirectSignIn(f);(!le||le===Fe)&&Je?.user&&(P=Je.user,q=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(q)try{yield m.beforeStateQueue.runMiddleware(P)}catch(le){P=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(le))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return U(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){var w;try{yield tn(f)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const w=f?(0,R.m9)(f):null;return w&&U(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return f&&U(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(ne(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new R.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,d.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&ne(f)||m._popupRedirectResolver;U(w,m,"argument-error"),m.redirectPersistenceManager=yield Ee.create(m,[ne(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var w,A;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,A){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),q=this._isInitialized?Promise.resolve():this._initializationPromise;return U(q,this,"internal-error"),q.then(()=>P(this.currentUser)),"function"==typeof m?f.addObserver(m,w,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Es(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Cn(y){return(0,R.m9)(y)}class qs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,R.ne)(m=>this.observer=m)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function bs(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Er{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return ge("not implemented")}_getIdTokenResponse(f){return ge("not implemented")}_linkToIdToken(f,m){return ge("not implemented")}_getReauthenticationResolver(f){return ge("not implemented")}}function Wn(y,f){return ou.apply(this,arguments)}function ou(){return(ou=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:resetPassword",Ft(y,f))})).apply(this,arguments)}function pn(y,f){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Al(y,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:update",Ft(y,f))})).apply(this,arguments)}function Wi(){return(Wi=(0,d.Z)(function*(y,f){return Zr(y,"POST","/v1/accounts:signInWithPassword",Ft(y,f))})).apply(this,arguments)}function Ds(y,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:sendOobCode",Ft(y,f))})).apply(this,arguments)}function Ln(y,f){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,d.Z)(function*(y,f){return Ds(y,f)})).apply(this,arguments)}function dr(y,f){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,d.Z)(function*(y,f){return Ds(y,f)})).apply(this,arguments)}function au(y,f){return ga.apply(this,arguments)}function ga(){return(ga=(0,d.Z)(function*(y,f){return Ds(y,f)})).apply(this,arguments)}function xl(y,f){return xr.apply(this,arguments)}function xr(){return(xr=(0,d.Z)(function*(y,f){return Ds(y,f)})).apply(this,arguments)}function Zc(){return(Zc=(0,d.Z)(function*(y,f){return Zr(y,"POST","/v1/accounts:signInWithEmailLink",Ft(y,f))})).apply(this,arguments)}function Nl(){return(Nl=(0,d.Z)(function*(y,f){return Zr(y,"POST","/v1/accounts:signInWithEmailLink",Ft(y,f))})).apply(this,arguments)}class Pl extends Er{constructor(f,m,w,A=null){super("password",w),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new Pl(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Pl(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function pa(y,f){return Wi.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function qh(y,f){return Zc.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Me(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return pn(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function zh(y,f){return Nl.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Me(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ir(y,f){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,d.Z)(function*(y,f){return Zr(y,"POST","/v1/accounts:signInWithIdp",Ft(y,f))})).apply(this,arguments)}class Zi extends Er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Zi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Me("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=m,P=(0,de._T)(m,["providerId","signInMethod"]);if(!w||!A)return null;const q=new Zi(w,A);return q.idToken=P.idToken||void 0,q.accessToken=P.accessToken||void 0,q.secret=P.secret,q.nonce=P.nonce,q.pendingToken=P.pendingToken||null,q}_getIdTokenResponse(f){return ir(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,ir(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ir(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,R.xO)(m)}return f}}function Xp(y,f){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:sendVerificationCode",Ft(y,f))})).apply(this,arguments)}function Cs(){return(Cs=(0,d.Z)(function*(y,f){return Zr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,f))})).apply(this,arguments)}function Qc(){return(Qc=(0,d.Z)(function*(y,f){const m=yield Zr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,f));if(m.temporaryProof)throw si(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const tg={USER_NOT_FOUND:"user-not-found"};function Jc(){return(Jc=(0,d.Z)(function*(y,f){return Zr(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),tg)})).apply(this,arguments)}class Ts extends Er{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ts({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ts({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Rl(y,f){return Cs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function eg(y,f){return Qc.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ng(y,f){return Jc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:P}=f;return w||m||A||P?new Ts({verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:P}):null}}class uu{constructor(f){var m,w,A,P,q,le;const Fe=(0,R.zd)((0,R.pd)(f)),Je=null!==(m=Fe.apiKey)&&void 0!==m?m:null,vt=null!==(w=Fe.oobCode)&&void 0!==w?w:null,_t=function Xc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Fe.mode)&&void 0!==A?A:null);U(Je&&vt&&_t,"argument-error"),this.apiKey=Je,this.operation=_t,this.code=vt,this.continueUrl=null!==(P=Fe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(q=Fe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(le=Fe.tenantId)&&void 0!==le?le:null}static parseLink(f){const m=function ed(y){const f=(0,R.zd)((0,R.pd)(y)).link,m=f?(0,R.zd)((0,R.pd)(f)).deep_link_id:null,w=(0,R.zd)((0,R.pd)(y)).deep_link_id;return(w?(0,R.zd)((0,R.pd)(w)).link:null)||w||m||f||y}(f);try{return new uu(m)}catch{return null}}}let ki=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,w){return Pl._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const A=uu.parseLink(w);return U(A,"argument-error"),Pl._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ki{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Yi extends Ki{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ss extends Yi{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return U("providerId"in m&&"signInMethod"in m,"argument-error"),Zi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ss.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ss.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:P,nonce:q,providerId:le}=f;if(!w&&!A&&!m&&!P||!le)return null;try{return new Ss(le)._credential({idToken:m,accessToken:w,nonce:q,pendingToken:P})}catch{return null}}}let ma=(()=>{class y extends Yi{constructor(){super("facebook.com")}static credential(m){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),lu=(()=>{class y extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:A}=m;if(!w&&!A)return null;try{return y.credential(w,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ol=(()=>{class y extends Yi{constructor(){super("github.com")}static credential(m){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Co extends Er{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return ir(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,ir(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ir(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:P}=m;return w&&A&&P&&w===A?new Co(w,P):null}static _create(f,m){return new Co(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ai extends Ki{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ai.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ai.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Co.fromJSON(f);return U(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return Co._create(w,m)}catch{return null}}}let Qr=(()=>{class y extends Yi{constructor(){super("twitter.com")}static credential(m,w){return Zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=m;if(!w||!A)return null;try{return y.credential(w,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function To(y,f){return td.apply(this,arguments)}function td(){return(td=(0,d.Z)(function*(y,f){return Zr(y,"POST","/v1/accounts:signUp",Ft(y,f))})).apply(this,arguments)}class br{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,A=!1){return(0,d.Z)(function*(){const P=yield Ut._fromIdTokenResponse(f,w,A),q=Kh(w);return new br({user:P,providerId:q,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=Kh(w);return new br({user:f,providerId:A,_tokenResponse:w,operationType:m})})()}}function Kh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function xn(){return(xn=(0,d.Z)(function*(y){var f;const m=Cn(y);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new br({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield To(m,{returnSecureToken:!0}),A=yield br._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class cu extends R.ZR{constructor(f,m,w,A){var P;super(m.code,m.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,A){return new cu(f,m,w,A)}}function Qh(y,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?cu._fromErrorAndOperation(y,P,f,w):P})}function ui(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function du(){return(du=(0,d.Z)(function*(y,f){const m=(0,R.m9)(y);yield Kt(!0,m,f);const{providerUserInfo:w}=yield Mr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=ui(w||[]);return m.providerData=m.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function So(y,f){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,d.Z)(function*(y,f,m=!1){const w=yield wr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return br._forOperation(y,"link",w)})).apply(this,arguments)}function Kt(y,f,m){return hu.apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(y,f,m){yield tn(f);const A=!1===y?"provider-already-linked":"no-such-provider";U(ui(f.providerData).has(m)===y,f.auth,A)})).apply(this,arguments)}function Ws(y,f){return fu.apply(this,arguments)}function fu(){return(fu=(0,d.Z)(function*(y,f,m=!1){var w;const{auth:A}=y,P="reauthenticate";try{const q=yield wr(y,Qh(A,P,f,y),m);U(q.idToken,A,"internal-error");const le=ut(q.idToken);U(le,A,"internal-error");const{sub:Fe}=le;return U(y.uid===Fe,A,"user-mismatch"),br._forOperation(y,P,q)}catch(q){throw"auth/user-not-found"===(null===(w=q)||void 0===w?void 0:w.code)&&Me(A,"user-mismatch"),q}})).apply(this,arguments)}function Ci(y,f){return pu.apply(this,arguments)}function pu(){return(pu=(0,d.Z)(function*(y,f,m=!1){const w="signIn",A=yield Qh(y,w,f),P=yield br._fromIdTokenResponse(y,w,A);return m||(yield y._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Sn(y,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,d.Z)(function*(y,f){return Ci(Cn(y),f)})).apply(this,arguments)}function gu(y,f){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,d.Z)(function*(y,f){const m=(0,R.m9)(y);return yield Kt(!1,m,f.providerId),So(m,f)})).apply(this,arguments)}function mu(y,f){return yu.apply(this,arguments)}function yu(){return(yu=(0,d.Z)(function*(y,f){return Ws((0,R.m9)(y),f)})).apply(this,arguments)}function kl(y,f){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,d.Z)(function*(y,f){return Zr(y,"POST","/v1/accounts:signInWithCustomToken",Ft(y,f))})).apply(this,arguments)}function ya(){return(ya=(0,d.Z)(function*(y,f){const m=Cn(y),w=yield kl(m,{token:f,returnSecureToken:!0}),A=yield br._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Te{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?zt._fromServerResponse(f,m):Me(f,"internal-error")}}class zt extends Te{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new zt(m)}}function _u(y,f,m){var w;U((null===(w=m.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(U(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(U(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Nn(){return(Nn=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y),A={requestType:"PASSWORD_RESET",email:f};m&&_u(w,A,m),yield dr(w,A)})).apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(y,f,m){yield Wn((0,R.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function _a(){return(_a=(0,d.Z)(function*(y,f){yield Al((0,R.m9)(y),{oobCode:f})})).apply(this,arguments)}function va(y,f){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,d.Z)(function*(y,f){const m=(0,R.m9)(y),w=yield Wn(m,{oobCode:f}),A=w.requestType;switch(U(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,m,"internal-error");default:U(w.email,m,"internal-error")}let P=null;return w.mfaInfo&&(P=Te._fromServerResponse(Cn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function nd(){return(nd=(0,d.Z)(function*(y,f){const{data:m}=yield va((0,R.m9)(y),f);return m.email})).apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(y,f,m){const w=Cn(y),A=yield To(w,{returnSecureToken:!0,email:f,password:m}),P=yield br._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};U(m.handleCodeInApp,w,"argument-error"),m&&_u(w,A,m),yield au(w,A)})).apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y),A=ki.credentialWithLink(f,m||Re());return U(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Sn(w,A)})).apply(this,arguments)}function ig(y,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:createAuthUri",Ft(y,f))})).apply(this,arguments)}function ba(){return(ba=(0,d.Z)(function*(y,f){const w={identifier:f,continueUri:mt()?Re():"http://localhost"},{signinMethods:A}=yield ig((0,R.m9)(y),w);return A||[]})).apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(y,f){const m=(0,R.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&_u(m.auth,A,f);const{email:P}=yield Ln(m.auth,A);P!==y.email&&(yield y.reload())})).apply(this,arguments)}function bu(){return(bu=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&_u(w.auth,P,m);const{email:q}=yield xl(w.auth,P);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function Iu(y,f){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,d.Z)(function*(y,f){return fn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ql(){return(ql=(0,d.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,R.m9)(y),P={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},q=yield wr(w,Iu(w.auth,P));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const le=w.providerData.find(({providerId:Fe})=>"password"===Fe);le&&(le.displayName=w.displayName,le.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)})).apply(this,arguments)}function Ys(y,f,m){return Du.apply(this,arguments)}function Du(){return(Du=(0,d.Z)(function*(y,f,m){const{auth:w}=y,P={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(P.email=f),m&&(P.password=m);const q=yield wr(y,pn(w,P));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Jr{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class bn extends Jr{constructor(f,m,w,A){super(f,m,w),this.username=A}}class id extends Jr{constructor(f,m){super(f,"facebook.com",m)}}class zl extends bn{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Xh extends Jr{constructor(f,m){super(f,"google.com",m)}}class Wl extends bn{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Cu(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function sr(y){var f,m;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},P=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const q=null===(m=null===(f=ut(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(q)return new Jr(P,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new id(P,A);case"github.com":return new zl(P,A);case"google.com":return new Xh(P,A);case"twitter.com":return new Wl(P,A,y.screenName||null);case"custom":case"anonymous":return new Jr(P,null);default:return new Jr(P,w,A)}}(m)}class Js{constructor(f,m,w){this.type=f,this.credential=m,this.auth=w}static _fromIdtoken(f,m){return new Js("enroll",f,m)}static _fromMfaPendingCredential(f){return new Js("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Js._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return Js._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Su{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=Cn(f),A=m.customData._serverResponse,P=(A.mfaInfo||[]).map(le=>Te._fromServerResponse(w,le));U(A.mfaPendingCredential,w,"internal-error");const q=Js._fromMfaPendingCredential(A.mfaPendingCredential);return new Su(q,P,function(){var le=(0,d.Z)(function*(Fe){const Je=yield Fe._process(w,q);delete A.mfaInfo,delete A.mfaPendingCredential;const vt=Object.assign(Object.assign({},A),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(m.operationType){case"signIn":const _t=yield br._fromIdTokenResponse(w,m.operationType,vt);return yield w._updateCurrentUser(_t.user),_t;case"reauthenticate":return U(m.user,w,"internal-error"),br._forOperation(m.user,m.operationType,vt);default:Me(w,"internal-error")}});return function(Fe){return le.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}function Au(y,f){return fn(y,"POST","/v2/accounts/mfaEnrollment:start",Ft(y,f))}class ef{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>Te._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new ef(f)}getSession(){var f=this;return(0,d.Z)(function*(){return Js._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var w=this;return(0,d.Z)(function*(){const A=f,P=yield w.getSession(),q=yield wr(w.user,A._process(w.user.auth,P,m));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){var w;const A="string"==typeof f?f:f.uid,P=yield m.user.getIdToken(),q=yield wr(m.user,function ud(y,f){return fn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(y,f))}(m.user.auth,{idToken:P,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:le})=>le!==A),yield m.user._updateTokensIfNecessary(q);try{yield m.user.reload()}catch(le){if("auth/user-token-expired"!==(null===(w=le)||void 0===w?void 0:w.code))throw le}})()}}const Xs=new WeakMap,eo="__sak";class xu{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(eo,"1"),this.storage.removeItem(eo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ca=(()=>{class y extends xu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Da(){const y=(0,R.z$)();return ht(y)||Ht(y)}()&&function En(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Gs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),P=this.localCache[w];A!==P&&m(w,P,A)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((le,Fe,Je)=>{this.notifyListeners(le,Je)});const A=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(A);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!w)return}const P=()=>{const le=this.storage.getItem(A);!w&&this.localCache[A]===le||this.notifyListeners(A,le)},q=this.storage.getItem(A);!function rr(){return(0,R.w1)()&&10===document.documentMode}()||q===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const P of Array.from(A))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var A=()=>super._set,P=this;return(0,d.Z)(function*(){yield A().call(P,m,w),P.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,A=this;return(0,d.Z)(function*(){const P=yield w().call(A,m);return A.localCache[m]=JSON.stringify(P),P})()}_remove(m){var w=()=>super._remove,A=this;return(0,d.Z)(function*(){yield w().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),Li=(()=>{class y extends xu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return y.type="SESSION",y})();let dd=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(P=>P.isListeningto(m));if(w)return w;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const A=m,{eventId:P,eventType:q,data:le}=A.data,Fe=w.handlersMap[q];if(!Fe?.size)return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:q});const Je=Array.from(Fe).map(function(){var _t=(0,d.Z)(function*(Qn){return Qn(A.origin,le)});return function(Qn){return _t.apply(this,arguments)}}()),vt=yield function Sa(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Je);A.ports[0].postMessage({status:"done",eventId:P,eventType:q,response:vt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Aa(y="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return y+m}class Zl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var A=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let q,le;return new Promise((Fe,Je)=>{const vt=Aa("",20);P.port1.start();const _t=setTimeout(()=>{Je(new Error("unsupported_event"))},w);le={messageChannel:P,onMessage(Qn){const An=Qn;if(An.data.eventId===vt)switch(An.data.status){case"ack":clearTimeout(_t),q=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Fe(An.data.response);break;default:clearTimeout(_t),clearTimeout(q),Je(new Error("invalid_response"))}}},A.handlers.add(le),P.port1.addEventListener("message",le.onMessage),A.target.postMessage({eventType:f,eventId:vt,data:m},[P.port2])}).finally(()=>{le&&A.removeMessageHandler(le)})})()}}function Vn(){return window}function Nu(){return typeof Vn().WorkerGlobalScope<"u"&&"function"==typeof Vn().importScripts}function Ma(){return(Ma=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xs="firebaseLocalStorageDb",Ns="firebaseLocalStorage",Ou="fbase_key";class no{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function xa(y,f){return y.transaction([Ns],f?"readwrite":"readonly").objectStore(Ns)}function Po(){const y=indexedDB.open(xs,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Ns,{keyPath:Ou})}catch(A){m(A)}}),y.addEventListener("success",(0,d.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Ns)?f(w):(w.close(),yield function fd(){const y=indexedDB.deleteDatabase(xs);return new no(y).toPromise()}(),f(yield Po()))}))})}function ts(y,f,m){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,d.Z)(function*(y,f,m){const w=xa(y,!0).put({[Ou]:f,value:m});return new no(w).toPromise()})).apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(y,f){const m=xa(y,!1).get(f),w=yield new no(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ro(y,f){const m=xa(y,!0).delete(f);return new no(m).toPromise()}const Ro=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Po()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const P=yield w._openDb();return yield m(P)}catch(P){if(A++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Nu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=dd._getInstance(function Ru(){return Nu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(A,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(A,P){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,A;if(m.activeServiceWorker=yield function to(){return Ma.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Zl(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Pu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Po();return yield ts(m,eo,"1"),yield ro(m,eo),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(P=>ts(P,m,w)),A.localCache[m]=w,A.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const A=yield w._withRetries(P=>function ku(y,f){return Na.apply(this,arguments)}(P,m));return w.localCache[m]=A,A})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(A=>ro(A,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(q=>{const le=xa(q,!1).getAll();return new no(le).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:q,value:le}of w)P.add(q),JSON.stringify(m.localCache[q])!==JSON.stringify(le)&&(m.notifyListeners(q,le),A.push(q));for(const q of Object.keys(m.localCache))m.localCache[q]&&!P.has(q)&&(m.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const P of Array.from(A))P(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Oo(y,f){return fn(y,"POST","/v2/accounts/mfaSignIn:start",Ft(y,f))}function Ps(){return(Ps=(0,d.Z)(function*(y){return(yield fn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fo(y){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=A=>{const P=we("internal-error");P.customData=A,m(P)},w.type="text/javascript",w.charset="UTF-8",function ko(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function Vu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Pa=1e12;class vn{constructor(f){this.auth=f,this.counter=Pa,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new sg(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||Pa;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Pa))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(f||Pa))||void 0===w||w.execute(),""})()}}class sg{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;U(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function By(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const og=Vu("rcb"),jy=new cn(3e4,6e4);class tf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Vn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return U(function hw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Vn().grecaptcha):new Promise((w,A)=>{const P=Vn().setTimeout(()=>{A(we(f,"network-request-failed"))},jy.get());Vn()[og]=()=>{Vn().clearTimeout(P),delete Vn()[og];const le=Vn().grecaptcha;if(!le)return void A(we(f,"internal-error"));const Fe=le.render;le.render=(Je,vt)=>{const _t=Fe(Je,vt);return this.counter++,_t},this.hostLanguage=m,w(le)},Fo(`https://www.google.com/recaptcha/api.js??${(0,R.xO)({onload:og,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),A(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Vn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ra{load(f){return(0,d.Z)(function*(){return new vn(f)})()}clearedOneInstance(){}}const ag="recaptcha",ug={theme:"light",type:"image"};class fr{constructor(f,m=Object.assign({},ug),w){this.parameters=m,this.type=ag,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;U(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ra:new tf,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(P=>{const q=le=>{!le||(f.tokenChangeListeners.delete(q),P(le))};f.tokenChangeListeners.add(q),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=Vn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){U(mt()&&!Nu(),f.auth,"internal-error"),yield function ei(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Xr(y){return Ps.apply(this,arguments)}(f.auth);U(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rn{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ts._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function rt(){return(rt=(0,d.Z)(function*(y,f,m){const w=Cn(y),A=yield Ir(w,f,(0,R.m9)(m));return new rn(A,P=>Sn(w,P))})).apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y);yield Kt(!1,w,"phone");const A=yield Ir(w.auth,f,(0,R.m9)(m));return new rn(A,P=>gu(w,P))})).apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y),A=yield Ir(w.auth,f,(0,R.m9)(m));return new rn(A,P=>mu(w,P))})).apply(this,arguments)}function Ir(y,f,m){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,d.Z)(function*(y,f,m){var w;const A=yield m.verify();try{let P;if(U("string"==typeof A,y,"argument-error"),U(m.type===ag,y,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const q=P.session;if("phoneNumber"in P)return U("enroll"===q.type,y,"internal-error"),(yield Au(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{U("signin"===q.type,y,"internal-error");const le=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return U(le,y,"missing-multi-factor-info"),(yield Oo(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Xp(y,{phoneNumber:P.phoneNumber,recaptchaToken:A});return q}}finally{m._reset()}})).apply(this,arguments)}function Ql(){return(Ql=(0,d.Z)(function*(y,f){yield So((0,R.m9)(y),f)})).apply(this,arguments)}let Bu=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Cn(m)}verifyPhoneNumber(m,w){return Ir(this.auth,m,(0,R.m9)(w))}static credential(m,w){return Ts._fromVerification(m,w)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:A}=m;return w&&A?Ts._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function so(y,f){return f?ne(f):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ju extends Er{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ir(f,this._buildIdpRequest())}_linkToIdToken(f,m){return ir(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return ir(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function pr(y){return Ci(y.auth,new ju(y),y.bypassAuthState)}function bt(y){const{auth:f,user:m}=y;return U(m,f,"internal-error"),Ws(m,new ju(y),y.bypassAuthState)}function Rs(y){return $u.apply(this,arguments)}function $u(){return($u=(0,d.Z)(function*(y){const{auth:f,user:m}=y;return U(m,f,"internal-error"),So(m,new ju(y),y.bypassAuthState)})).apply(this,arguments)}class Uo{constructor(f,m,w,A,P=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(w,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:P,tenantId:q,error:le,type:Fe}=f;if(le)return void m.reject(le);const Je={auth:m.auth,requestUri:w,sessionId:A,tenantId:q||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Fe)(Je))}catch(vt){m.reject(vt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return pr;case"linkViaPopup":case"linkViaRedirect":return Rs;case"reauthViaPopup":case"reauthViaRedirect":return bt;default:Me(this.auth,"internal-error")}}resolve(f){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hu=new cn(2e3,1e4);function Oa(){return(Oa=(0,d.Z)(function*(y,f,m){const w=Cn(y);Be(y,f,Ki);const A=so(w,m);return new Bo(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function gd(){return(gd=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y);Be(w.auth,f,Ki);const A=so(w.auth,m);return new Bo(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y);Be(w.auth,f,Ki);const A=so(w.auth,m);return new Bo(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Bo=(()=>{class y extends Uo{constructor(m,w,A,P,q){super(m,w,P,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return U(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){z(1===m.filter.length,"Popup operations only handle one event");const w=Aa();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(we(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Hu.get())};m()}}return y.currentPopupAction=null,y})();const ti=new Map;class Gu extends Uo{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=ti.get(m.auth._key());if(!w){try{const P=(yield function qu(y,f){return Si.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(P)}catch(A){w=()=>Promise.reject(A)}ti.set(m.auth._key(),w)}return m.bypassAuthState||ti.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Si(){return(Si=(0,d.Z)(function*(y,f){const m=Jl(f),w=Vi(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(m));return yield w._remove(m),A})).apply(this,arguments)}function ao(y,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,d.Z)(function*(y,f){return Vi(y)._set(Jl(f),"true")})).apply(this,arguments)}function Un(y,f){ti.set(y._key(),f)}function Vi(y){return ne(y._redirectPersistence)}function Jl(y){return W("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,d.Z)(function*(y,f,m){const w=Cn(y);Be(y,f,Ki);const A=so(w,m);return yield ao(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y);Be(w.auth,f,Ki);const A=so(w.auth,m);yield ao(A,w.auth);const P=yield lt(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function Ie(){return(Ie=(0,d.Z)(function*(y,f,m){const w=(0,R.m9)(y);Be(w.auth,f,Ki);const A=so(w.auth,m);yield Kt(!1,w,f.providerId),yield ao(A,w.auth);const P=yield lt(w);return A._openRedirect(w.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*(y,f){return yield Cn(y)._initializationPromise,ft(y,f,!1)})).apply(this,arguments)}function ft(y,f){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*(y,f,m=!1){const w=Cn(y),A=so(w,f),q=yield new Gu(w,A,m).execute();return q&&!m&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,f)),q})).apply(this,arguments)}function lt(y){return In.apply(this,arguments)}function In(){return(In=(0,d.Z)(function*(y){const f=Aa(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class jo{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Rt(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ss(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!ss(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(we(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($o(f))}saveEventToCache(f){this.cachedEventUids.add($o(f)),this.lastProcessedEventTime=Date.now()}}function $o(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function ss({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function ci(y){return uo.apply(this,arguments)}function uo(){return(uo=(0,d.Z)(function*(y,f={}){return fn(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Ai=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lo=/^https?/;function os(){return(os=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield ci(y);for(const m of f)try{if(cg(m))return}catch{}Me(y,"unauthorized-domain")})).apply(this,arguments)}function cg(y){const f=Re(),{protocol:m,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===w?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&q.hostname===w}if(!lo.test(m))return!1;if(Ai.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const dg=new cn(3e4,6e4);function sf(){const y=Vn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let Zn=null;function Ho(y){return Zn=Zn||function af(y){return new Promise((f,m)=>{var w,A,P;function q(){sf(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{sf(),m(we(y,"network-request-failed"))},timeout:dg.get()})}if(null!==(A=null===(w=Vn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(P=Vn().gapi)||void 0===P||!P.load){const le=Vu("iframefcb");return Vn()[le]=()=>{gapi.load?q():m(we(y,"network-request-failed"))},Fo(`https://apis.google.com/js/api.js?onload=${le}`).catch(Fe=>m(Fe))}q()}}).catch(f=>{throw Zn=null,f})}(y),Zn}const _d=new cn(5e3,15e3),Hy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gy(y){const f=y.config;U(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?wn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},A=vd.get(y.config.apiHost);A&&(w.eid=A);const P=y._getFrameworks();return P.length&&(w.fw=P.join(",")),`${m}?${(0,R.xO)(w).slice(1)}`}function zu(){return zu=(0,d.Z)(function*(y){const f=yield Ho(y),m=Vn().gapi;return U(m,y,"internal-error"),f.open({where:document.body,url:Gy(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hy,dontclear:!0},w=>new Promise(function(){var A=(0,d.Z)(function*(P,q){yield w.restyle({setHideOnLeave:!1});const le=we(y,"network-request-failed"),Fe=Vn().setTimeout(()=>{q(le)},_d.get());function Je(){Vn().clearTimeout(Fe),P(w)}w.ping(Je).then(Je,()=>{q(le)})});return function(P,q){return A.apply(this,arguments)}}()))}),zu.apply(this,arguments)}const wd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class co{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function as(y,f,m,w,A,P){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:w,v:se.SDK_VERSION,eventId:A};if(f instanceof Ki){f.setDefaultLanguage(y.languageCode),q.providerId=f.providerId||"",(0,R.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Je]of Object.entries(P||{}))q[Fe]=Je}if(f instanceof Yi){const Fe=f.getScopes().filter(Je=>""!==Je);Fe.length>0&&(q.scopes=Fe.join(","))}y.tenantId&&(q.tid=y.tenantId);const le=q;for(const Fe of Object.keys(le))void 0===le[Fe]&&delete le[Fe];return`${function qy({config:y}){return y.emulator?wn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,R.xO)(le).slice(1)}`}const Wu="webStorageSupport";class us extends class bd{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new us(f)}_finalizeEnroll(f,m,w){return function Mu(y,f){return fn(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(y,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Lu(y,f){return fn(y,"POST","/v2/accounts/mfaSignIn:finalize",Ft(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qo=(()=>{class y{constructor(){}static assertion(m){return us._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var ec="@firebase/auth",hf="0.20.10";class pg{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Va(){return window}function Os(){return(Os=(0,d.Z)(function*(y,f,m){var w;const{BuildInfo:A}=Va();z(f.sessionId,"AuthEvent did not contain a session ID");const P=yield ff(f.sessionId),q={};return Ht()?q.ibi=A.packageName:Zt()?q.apn=A.packageName:Me(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=P,as(y,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,q)})).apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(y){const{BuildInfo:f}=Va(),m={};Ht()?m.iosBundleId=f.packageName:Zt()?m.androidPackageName=f.packageName:Me(y,"operation-not-supported-in-this-environment"),yield ci(y,m)})).apply(this,arguments)}function yg(){return(yg=(0,d.Z)(function*(y,f,m){const{cordova:w}=Va();let A=()=>{};try{yield new Promise((P,q)=>{let le=null;function Fe(){var _t;P();const Qn=null===(_t=w.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof Qn&&Qn(),"function"==typeof m?.close&&m.close()}function Je(){le||(le=window.setTimeout(()=>{q(we(y,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&Je()}f.addPassiveListener(Fe),document.addEventListener("resume",Je,!1),Zt()&&document.addEventListener("visibilitychange",vt,!1),A=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",vt,!1),le&&window.clearTimeout(le)}})}finally{A()}})).apply(this,arguments)}function ff(y){return ho.apply(this,arguments)}function ho(){return(ho=(0,d.Z)(function*(y){const f=Cd(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Cd(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let w=0;w<y.length;w++)m[w]=y.charCodeAt(w);return m}(0,R.Pz)("authIdTokenMaxAge"),function Wy(y){(0,se._registerComponent)(new ae.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:P,authDomain:q}=w.options;return((le,Fe)=>{U(P&&!P.includes(":"),"invalid-api-key",{appName:le.name}),U(!q?.includes(":"),"argument-error",{appName:le.name});const Je={apiKey:P,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Es(y)},vt=new Bt(le,Fe,Je);return function Oe(y,f){const m=f?.persistence||[],w=(Array.isArray(m)?m:[m]).map(ne);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,f?.popupRedirectResolver)}(vt,m),vt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ae.wA("auth-internal",f=>{const m=Cn(f.getProvider("auth").getImmediate());return new pg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(ec,hf,function zy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(ec,hf,"esm2017")}("Browser");class pf extends jo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function Ua(y){return gf.apply(this,arguments)}function gf(){return(gf=(0,d.Z)(function*(y){const f=yield Td()._get(Ba(y));return f&&(yield Td()._remove(Ba(y))),f})).apply(this,arguments)}function rc(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function Td(){return ne(Ca)}function Ba(y){return W("authEvent",y.config.apiKey,y.name)}function ja(y){if(!y?.includes("?"))return{};const[f,...m]=y.split("?");return(0,R.zd)(m.join("?"))}function Fs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function Md(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Zu(y=(0,R.z$)()){return!("file:"!==Md()&&"ionic:"!==Md()&&"capacitor:"!==Md()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Cg(){try{const y=self.localStorage,f=Aa();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Dg(y=(0,R.z$)()){return function bg(){return(0,R.w1)()&&11===document?.documentMode}()||function Ig(y=(0,R.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,R.hl)()}catch{return xd()&&(0,R.hl)()}return!1}function xd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Nd(){return(function mw(){return"http:"===Md()||"https:"===Md()}()||(0,R.ru)()||Zu())&&!function _f(){return(0,R.b$)()||(0,R.UG)()}()&&Cg()&&!xd()}function Pd(){return Zu()&&typeof document<"u"}function vf(){return(vf=(0,d.Z)(function*(){return!!Pd()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const jr={LOCAL:"local",NONE:"none",SESSION:"session"},zo=U,$r="persistence";function Yu(y){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,d.Z)(function*(y){yield y._initializationPromise;const f=Ui(),m=W($r,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function Ui(){var y;try{return(null===(y=function Rd(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const sc=U;class di{constructor(){this.browserResolver=ne(class Xl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Li,this._completeRedirectFn=ft,this._overrideRedirectResult=Un}_openPopup(f,m,w,A){var P=this;return(0,d.Z)(function*(){var q;z(null===(q=P.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const le=as(f,m,w,Re(),A);return function lf(y,f,m,w=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let le="";const Fe=Object.assign(Object.assign({},wd),{width:w.toString(),height:A.toString(),top:P,left:q}),Je=(0,R.z$)().toLowerCase();m&&(le=Jt(Je)?"_blank":m),He(Je)&&(f=f||"http://localhost",Fe.scrollbars="yes");const vt=Object.entries(Fe).reduce((Qn,[An,Fd])=>`${Qn}${An}=${Fd},`,"");if(function Yr(y=(0,R.z$)()){var f;return Ht(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Je)&&"_self"!==le)return function Go(y,f){const m=document.createElement("a");m.href=y,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",le),new co(null);const _t=window.open(f||"",le,vt);U(_t,y,"popup-blocked");try{_t.focus()}catch{}return new co(_t)}(f,le,Aa())})()}_openRedirect(f,m,w,A){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(f),function Ti(y){Vn().location.href=y}(as(f,m,w,Re(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:P}=this.eventManagers[m];return A?Promise.resolve(A):(z(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const w=yield function uf(y){return zu.apply(this,arguments)}(f),A=new jo(f);return w.register("authEvent",P=>(U(P?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Wu,{type:Wu},A=>{var P;const q=null===(P=A?.[0])||void 0===P?void 0:P[Wu];void 0!==q&&m(!!q),Me(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function yd(y){return os.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Gs()||ht()||Ht()}}),this.cordovaResolver=ne(class Sd{constructor(){this._redirectPersistence=Li,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ft,this._overrideRedirectResult=Un}_initialize(f){var m=this;return(0,d.Z)(function*(){const w=f._key();let A=m.eventManagers.get(w);return A||(A=new pf(f),m.eventManagers.set(w,A),m.attachCallbackListeners(f,A)),A})()}_openPopup(f){Me(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,A){var P=this;return(0,d.Z)(function*(){!function gw(y){var f,m,w,A,P,q,le,Fe,Je,vt;const _t=Va();U("function"==typeof(null===(f=_t?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(m=_t?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(P=null===(A=null===(w=_t?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===P?void 0:P.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Fe=null===(le=null===(q=_t?.cordova)||void 0===q?void 0:q.plugins)||void 0===le?void 0:le.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(vt=null===(Je=_t?.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===vt?void 0:vt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield P._initialize(f);yield q.initialized(),q.resetRedirect(),function md(){ti.clear()}(),yield P._originValidation(f);const le=function _g(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:rc(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(f,w,A);yield function vg(y,f){return Td()._set(Ba(y),f)}(f,le);const Fe=yield function ls(y,f,m){return Os.apply(this,arguments)}(f,le,m),Je=yield function Dd(y){const{cordova:f}=Va();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function cr(y=(0,R.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}(Fe);return function qD(y,f,m){return yg.apply(this,arguments)}(f,q,Je)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function mg(y){return ks.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:A,BuildInfo:P}=Va(),q=setTimeout((0,d.Z)(function*(){yield Ua(f),m.onEvent(Fs())}),500),le=function(){var vt=(0,d.Z)(function*(_t){clearTimeout(q);const Qn=yield Ua(f);let An=null;Qn&&_t?.url&&(An=function wg(y,f){var m,w;const A=function Kn(y){const f=ja(y),m=f.link?decodeURIComponent(f.link):void 0,w=ja(m).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ja(A).link||A||w||m||y}(f);if(A.includes("/__/auth/callback")){const P=ja(A),q=P.firebaseError?function ic(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,le=null===(w=null===(m=q?.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Fe=le?we(le):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Qn,_t.url)),m.onEvent(An||Fs())});return function(Qn){return vt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,le);const Fe=A,Je=`${P.packageName.toLowerCase()}://`;Va().handleOpenURL=function(){var vt=(0,d.Z)(function*(_t){if(_t.toLowerCase().startsWith(Je)&&le({url:_t}),"function"==typeof Fe)try{Fe(_t)}catch(Qn){console.error(Qn)}});return function(_t){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Li,this._completeRedirectFn=ft,this._overrideRedirectResult=Un}_initialize(f){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,A){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,m,w,A)})()}_openRedirect(f,m,w,A){var P=this;return(0,d.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,m,w,A)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Pd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return sc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Qy(){return vf.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Qu(y){return y.unwrap()}function wf(y){return oc(y)}function oc(y){const{_tokenResponse:f}=y instanceof R.ZR?y.customData:y;if(!f)return null;if(!(y instanceof R.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Bu.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=lu;break;case"facebook.com":w=ma;break;case"github.com":w=Ol;break;case"twitter.com":w=Qr;break;default:const{oauthIdToken:A,oauthAccessToken:P,oauthTokenSecret:q,pendingToken:le,nonce:Fe}=f;return P||q||A||le?le?m.startsWith("saml.")?Co._create(m,le):Zi._fromParams({providerId:m,signInMethod:m,pendingToken:le,idToken:A,accessToken:P}):new Ss(m).credential({idToken:A,accessToken:P,rawNonce:Fe}):null}return y instanceof R.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Yn(y,f){return f.catch(m=>{throw m instanceof R.ZR&&function Tg(y,f){var m,w;const A=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=f)||void 0===w?void 0:w.code))f.resolver=new Xy(y,function Rn(y,f){var m;const w=(0,R.m9)(y),A=f;return U(f.customData.operationType,w,"argument-error"),U(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Su._fromError(w,A)}(y,f));else if(A){const P=oc(f),q=f;P&&(q.credential=P,q.tenantId=A.tenantId||void 0,q.email=A.email||void 0,q.phoneNumber=A.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:wf(m),additionalUserInfo:Cu(m),user:fo.getOrCreate(A)}})}function Ef(y,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,d.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>Yn(y,m.confirm(w))}})).apply(this,arguments)}class Xy{constructor(f,m){this.resolver=m,this.auth=function Od(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Yn(Qu(this.auth),this.resolver.resolveSignIn(f))}}class fo{constructor(f){this._delegate=f,this.multiFactor=function No(y){const f=(0,R.m9)(y);return Xs.has(f)||Xs.set(f,ef._fromUser(f)),Xs.get(f)}(f)}static getOrCreate(f){return fo.USER_MAP.has(f)||fo.USER_MAP.set(f,new fo(f)),fo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,d.Z)(function*(){return Yn(m.auth,gu(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,d.Z)(function*(){return Ef(w.auth,function dn(y,f,m){return On.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,d.Z)(function*(){return Yn(m.auth,function rf(y,f,m){return is.apply(this,arguments)}(m._delegate,f,di))})()}linkWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield Yu(Cn(m.auth)),function Y(y,f,m){return function oe(y,f,m){return Ie.apply(this,arguments)}(y,f,m)}(m._delegate,f,di)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,d.Z)(function*(){return Yn(m.auth,mu(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Ef(this.auth,function pd(y,f,m){return rs.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Yn(this.auth,function nf(y,f,m){return gd.apply(this,arguments)}(this._delegate,f,di))}reauthenticateWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield Yu(Cn(m.auth)),function C(y,f,m){return function x(y,f,m){return F.apply(this,arguments)}(y,f,m)}(m._delegate,f,di)})()}sendEmailVerification(f){return function jl(y,f){return Ia.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,d.Z)(function*(){return yield function Br(y,f){return du.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function rd(y,f){return Ys((0,R.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Ks(y,f){return Ys((0,R.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function lg(y,f){return Ql.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Gl(y,f){return ql.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function $l(y,f,m){return bu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fo.USER_MAP=new WeakMap;const po=U;let bf=(()=>{class y{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;po(A,"invalid-api-key",{appName:m.name}),po(A,"invalid-api-key",{appName:m.name});const P=typeof window<"u"?di:void 0;this._delegate=w.initialize({options:{persistence:Sg(A,m.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function su(y,f,m){const w=Cn(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!m?.disableWarnings,P=Oi(f),{host:q,port:le}=function zn(y){const f=Oi(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const P=A[1];return{host:P,port:bs(w.substr(P.length+1))}}{const[P,q]=w.split(":");return{host:P,port:bs(q)}}}(f);w.config.emulator={url:`${P}//${q}${null===le?"":`:${le}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:le,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Is(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,w)}applyActionCode(m){return function li(y,f){return _a.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return va(this._delegate,m)}confirmPasswordReset(m,w){return function wu(y,f,m){return Ao.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var A=this;return(0,d.Z)(function*(){return Yn(A._delegate,function wa(y,f,m){return Pn.apply(this,arguments)}(A._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Eu(y,f){return ba.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function es(y,f){return"EMAIL_SIGNIN"===uu.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){po(Nd(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function Ue(y,f){return Qe.apply(this,arguments)}(m._delegate,di);return w?Yn(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function yf(y,f){Cn(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,A){const{next:P,error:q,complete:le}=kd(m,w,A);return this._delegate.onAuthStateChanged(P,q,le)}onIdTokenChanged(m,w,A){const{next:P,error:q,complete:le}=kd(m,w,A);return this._delegate.onIdTokenChanged(P,q,le)}sendSignInLinkToEmail(m,w){return function Ul(y,f,m){return Zs.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function vu(y,f,m){return Nn.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,d.Z)(function*(){let A;switch(function Ku(y,f){zo(Object.values(jr).includes(f),y,"invalid-persistence-type"),(0,R.b$)()?zo(f!==jr.SESSION,y,"unsupported-persistence-type"):(0,R.UG)()?zo(f===jr.NONE,y,"unsupported-persistence-type"):xd()?zo(f===jr.NONE||f===jr.LOCAL&&(0,R.hl)(),y,"unsupported-persistence-type"):zo(f===jr.NONE||Cg(),y,"unsupported-persistence-type")}(w._delegate,m),m){case jr.SESSION:A=Li;break;case jr.LOCAL:A=(yield ne(Ro)._isAvailable())?Ro:Ca;break;case jr.NONE:A=V;break;default:return Me("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Yn(this._delegate,function Yh(y){return xn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Yn(this._delegate,Sn(this._delegate,m))}signInWithCustomToken(m){return Yn(this._delegate,function Fl(y,f){return ya.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return Yn(this._delegate,function Fi(y,f,m){return Sn((0,R.m9)(y),ki.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return Yn(this._delegate,function rg(y,f,m){return Ea.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return Ef(this._delegate,function Vo(y,f,m){return rt.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,d.Z)(function*(){return po(Nd(),w._delegate,"operation-not-supported-in-this-environment"),Yn(w._delegate,function or(y,f,m){return Oa.apply(this,arguments)}(w._delegate,m,di))})()}signInWithRedirect(m){var w=this;return(0,d.Z)(function*(){return po(Nd(),w._delegate,"operation-not-supported-in-this-environment"),yield Yu(w._delegate),function qt(y,f,m){return function ka(y,f,m){return D.apply(this,arguments)}(y,f,m)}(w._delegate,m,di)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Vl(y,f){return nd.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=jr,y})();function kd(y,f,m){let w=y;"function"!=typeof y&&({next:w,error:f,complete:m}=y);const A=w;return{next:q=>A(q&&fo.getOrCreate(q)),error:f,complete:m}}function Sg(y,f){const m=function Jy(y,f){const m=Ui();if(!m)return[];const w=W($r,y,f);switch(m.getItem(w)){case jr.NONE:return[V];case jr.LOCAL:return[Ro,Li];case jr.SESSION:return[Li];default:return[]}}(y,f);if(typeof self<"u"&&!m.includes(Ro)&&m.push(Ro),typeof window<"u")for(const w of[Ca,Li])m.includes(w)||m.push(w);return m.includes(V)||m.push(V),m}class ac{constructor(){this.providerId="phone",this._delegate=new Bu(Qu(ee.Z.auth()))}static credential(f,m){return Bu.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}ac.PHONE_SIGN_IN_METHOD=Bu.PHONE_SIGN_IN_METHOD,ac.PROVIDER_ID=Bu.PROVIDER_ID;const yw=U;class uc{constructor(f,m,w=ee.Z.app()){var A;yw(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new fr(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function If(y){y.INTERNAL.registerComponent(new ae.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new bf(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ki,FacebookAuthProvider:ma,GithubAuthProvider:Ol,GoogleAuthProvider:lu,OAuthProvider:Ss,SAMLAuthProvider:ai,PhoneAuthProvider:ac,PhoneMultiFactorGenerator:qo,RecaptchaVerifier:uc,TwitterAuthProvider:Qr,Auth:bf,AuthCredential:Er,Error:R.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.23")}(ee.Z)},9751:(dt,Ae,k)=>{k.d(Ae,{y:()=>he});var d=k(2961),ee=k(727),R=k(8822),se=k(9635),re=k(2416),de=k(576),ae=k(2806);let he=(()=>{class K{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const be=new K;return be.source=this,be.operator=xe,be}subscribe(xe,be,nt){const me=function j(K){return K&&K instanceof d.Lv||function B(K){return K&&(0,de.m)(K.next)&&(0,de.m)(K.error)&&(0,de.m)(K.complete)}(K)&&(0,ee.Nn)(K)}(xe)?xe:new d.Hp(xe,be,nt);return(0,ae.x)(()=>{const{operator:pe,source:Xe}=this;me.add(pe?pe.call(me,Xe):Xe?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(xe){try{return this._subscribe(xe)}catch(be){xe.error(be)}}forEach(xe,be){return new(be=fe(be))((nt,me)=>{const pe=new d.Hp({next:Xe=>{try{xe(Xe)}catch(ot){me(ot),pe.unsubscribe()}},error:me,complete:nt});this.subscribe(pe)})}_subscribe(xe){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(xe)}[R.L](){return this}pipe(...xe){return(0,se.U)(xe)(this)}toPromise(xe){return new(xe=fe(xe))((be,nt)=>{let me;this.subscribe(pe=>me=pe,pe=>nt(pe),()=>be(me))})}}return K.create=Le=>new K(Le),K})();function fe(K){var Le;return null!==(Le=K??re.v.Promise)&&void 0!==Le?Le:Promise}},7579:(dt,Ae,k)=>{k.d(Ae,{x:()=>ae});var d=k(9751),ee=k(727);const se=(0,k(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),de=k(2806);let ae=(()=>{class fe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new he(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Le,observers:xe}=this;return K||Le?ee.Lc:(this.currentObservers=null,xe.push(j),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(xe,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Le,isStopped:xe}=this;K?j.error(Le):xe&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return fe.create=(B,j)=>new he(B,j),fe})();class he extends ae{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,B)}error(B){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==K?K:ee.Lc}}},2961:(dt,Ae,k)=>{k.d(Ae,{Hp:()=>nt,Lv:()=>K});var d=k(576),ee=k(727),R=k(2416),se=k(7849);function re(){}const de=fe("C",void 0,void 0);function fe(Me,we,De){return{kind:Me,value:we,error:De}}var B=k(3410),j=k(2806);class K extends ee.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,ee.Nn)(we)&&we.add(this)):this.destination=ot}static create(we,De,Be){return new nt(we,De,Be)}next(we){this.isStopped?Xe(function he(Me){return fe("N",Me,void 0)}(we),this):this._next(we)}error(we){this.isStopped?Xe(function ae(Me){return fe("E",void 0,Me)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?Xe(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function xe(Me,we){return Le.call(Me,we)}class be{constructor(we){this.partialObserver=we}next(we){const{partialObserver:De}=this;if(De.next)try{De.next(we)}catch(Be){me(Be)}}error(we){const{partialObserver:De}=this;if(De.error)try{De.error(we)}catch(Be){me(Be)}else me(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(De){me(De)}}}class nt extends K{constructor(we,De,Be){let je;if(super(),(0,d.m)(we)||!we)je={next:we??void 0,error:De??void 0,complete:Be??void 0};else{let U;this&&R.v.useDeprecatedNextContext?(U=Object.create(we),U.unsubscribe=()=>this.unsubscribe(),je={next:we.next&&xe(we.next,U),error:we.error&&xe(we.error,U),complete:we.complete&&xe(we.complete,U)}):je=we}this.destination=new be(je)}}function me(Me){R.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Me):(0,se.h)(Me)}function Xe(Me,we){const{onStoppedNotification:De}=R.v;De&&B.z.setTimeout(()=>De(Me,we))}const ot={closed:!0,next:re,error:function pe(Me){throw Me},complete:re}},727:(dt,Ae,k)=>{k.d(Ae,{Lc:()=>de,w0:()=>re,Nn:()=>ae});var d=k(576);const R=(0,k(3888).d)(fe=>function(j){fe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Le)=>`${Le+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=k(8737);class re{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const xe of j)xe.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,d.m)(K))try{K()}catch(xe){B=xe instanceof R?xe.errors:[xe]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const xe of Le)try{he(xe)}catch(be){B=B??[],be instanceof R?B=[...B,...be.errors]:B.push(be)}}if(B)throw new R(B)}}add(B){var j;if(B&&B!==this)if(this.closed)he(B);else{if(B instanceof re){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,se.P)(j,B),B instanceof re&&B._removeParent(this)}}re.EMPTY=(()=>{const fe=new re;return fe.closed=!0,fe})();const de=re.EMPTY;function ae(fe){return fe instanceof re||fe&&"closed"in fe&&(0,d.m)(fe.remove)&&(0,d.m)(fe.add)&&(0,d.m)(fe.unsubscribe)}function he(fe){(0,d.m)(fe)?fe():fe.unsubscribe()}},2416:(dt,Ae,k)=>{k.d(Ae,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Ae,k)=>{k.d(Ae,{E:()=>ee});const ee=new(k(9751).y)(re=>re.complete())},8996:(dt,Ae,k)=>{k.d(Ae,{D:()=>we});var d=k(8421),ee=k(5363),R=k(9468),de=k(9751),he=k(2202),fe=k(576),B=k(9672);function K(De,Be){if(!De)throw new Error("Iterable cannot be null");return new de.y(je=>{(0,B.f)(je,Be,()=>{const U=De[Symbol.asyncIterator]();(0,B.f)(je,Be,()=>{U.next().then(ge=>{ge.done?je.complete():je.next(ge.value)})},0,!0)})})}var Le=k(3670),xe=k(8239),be=k(1144),nt=k(6495),me=k(2206),pe=k(4532),Xe=k(3260);function we(De,Be){return Be?function Me(De,Be){if(null!=De){if((0,Le.c)(De))return function se(De,Be){return(0,d.Xf)(De).pipe((0,R.R)(Be),(0,ee.Q)(Be))}(De,Be);if((0,be.z)(De))return function ae(De,Be){return new de.y(je=>{let U=0;return Be.schedule(function(){U===De.length?je.complete():(je.next(De[U++]),je.closed||this.schedule())})})}(De,Be);if((0,xe.t)(De))return function re(De,Be){return(0,d.Xf)(De).pipe((0,R.R)(Be),(0,ee.Q)(Be))}(De,Be);if((0,me.D)(De))return K(De,Be);if((0,nt.T)(De))return function j(De,Be){return new de.y(je=>{let U;return(0,B.f)(je,Be,()=>{U=De[he.h](),(0,B.f)(je,Be,()=>{let ge,z;try{({value:ge,done:z}=U.next())}catch(J){return void je.error(J)}z?je.complete():je.next(ge)},0,!0)}),()=>(0,fe.m)(U?.return)&&U.return()})}(De,Be);if((0,Xe.L)(De))return function ot(De,Be){return K((0,Xe.Q)(De),Be)}(De,Be)}throw(0,pe.z)(De)}(De,Be):(0,d.Xf)(De)}},8421:(dt,Ae,k)=>{k.d(Ae,{Xf:()=>Le});var d=k(655),ee=k(1144),R=k(8239),se=k(9751),re=k(3670),de=k(2206),ae=k(4532),he=k(6495),fe=k(3260),B=k(576),j=k(7849),K=k(8822);function Le(Me){if(Me instanceof se.y)return Me;if(null!=Me){if((0,re.c)(Me))return function xe(Me){return new se.y(we=>{const De=Me[K.L]();if((0,B.m)(De.subscribe))return De.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,ee.z)(Me))return function be(Me){return new se.y(we=>{for(let De=0;De<Me.length&&!we.closed;De++)we.next(Me[De]);we.complete()})}(Me);if((0,R.t)(Me))return function nt(Me){return new se.y(we=>{Me.then(De=>{we.closed||(we.next(De),we.complete())},De=>we.error(De)).then(null,j.h)})}(Me);if((0,de.D)(Me))return pe(Me);if((0,he.T)(Me))return function me(Me){return new se.y(we=>{for(const De of Me)if(we.next(De),we.closed)return;we.complete()})}(Me);if((0,fe.L)(Me))return function Xe(Me){return pe((0,fe.Q)(Me))}(Me)}throw(0,ae.z)(Me)}function pe(Me){return new se.y(we=>{(function ot(Me,we){var De,Be,je,U;return(0,d.mG)(this,void 0,void 0,function*(){try{for(De=(0,d.KL)(Me);!(Be=yield De.next()).done;)if(we.next(Be.value),we.closed)return}catch(ge){je={error:ge}}finally{try{Be&&!Be.done&&(U=De.return)&&(yield U.call(De))}finally{if(je)throw je.error}}we.complete()})})(Me,we).catch(De=>we.error(De))})}},6451:(dt,Ae,k)=>{k.d(Ae,{T:()=>de});var d=k(8189),ee=k(8421),R=k(515),se=k(7669),re=k(8996);function de(...ae){const he=(0,se.yG)(ae),fe=(0,se._6)(ae,1/0),B=ae;return B.length?1===B.length?(0,ee.Xf)(B[0]):(0,d.J)(fe)((0,re.D)(B,he)):R.E}},5403:(dt,Ae,k)=>{k.d(Ae,{x:()=>ee});var d=k(2961);function ee(se,re,de,ae,he){return new R(se,re,de,ae,he)}class R extends d.Lv{constructor(re,de,ae,he,fe,B){super(re),this.onFinalize=fe,this.shouldUnsubscribe=B,this._next=de?function(j){try{de(j)}catch(K){re.error(K)}}:super._next,this._error=he?function(j){try{he(j)}catch(K){re.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(dt,Ae,k)=>{k.d(Ae,{U:()=>R});var d=k(4482),ee=k(5403);function R(se,re){return(0,d.e)((de,ae)=>{let he=0;de.subscribe((0,ee.x)(ae,fe=>{ae.next(se.call(re,fe,he++))}))})}},8189:(dt,Ae,k)=>{k.d(Ae,{J:()=>R});var d=k(5577),ee=k(4671);function R(se=1/0){return(0,d.z)(ee.y,se)}},5577:(dt,Ae,k)=>{k.d(Ae,{z:()=>he});var d=k(4004),ee=k(8421),R=k(4482),se=k(9672),re=k(5403),ae=k(576);function he(fe,B,j=1/0){return(0,ae.m)(B)?he((K,Le)=>(0,d.U)((xe,be)=>B(K,xe,Le,be))((0,ee.Xf)(fe(K,Le))),j):("number"==typeof B&&(j=B),(0,R.e)((K,Le)=>function de(fe,B,j,K,Le,xe,be,nt){const me=[];let pe=0,Xe=0,ot=!1;const Me=()=>{ot&&!me.length&&!pe&&B.complete()},we=Be=>pe<K?De(Be):me.push(Be),De=Be=>{xe&&B.next(Be),pe++;let je=!1;(0,ee.Xf)(j(Be,Xe++)).subscribe((0,re.x)(B,U=>{Le?.(U),xe?we(U):B.next(U)},()=>{je=!0},void 0,()=>{if(je)try{for(pe--;me.length&&pe<K;){const U=me.shift();be?(0,se.f)(B,be,()=>De(U)):De(U)}Me()}catch(U){B.error(U)}}))};return fe.subscribe((0,re.x)(B,we,()=>{ot=!0,Me()})),()=>{nt?.()}}(K,Le,fe,j)))}},5363:(dt,Ae,k)=>{k.d(Ae,{Q:()=>se});var d=k(9672),ee=k(4482),R=k(5403);function se(re,de=0){return(0,ee.e)((ae,he)=>{ae.subscribe((0,R.x)(he,fe=>(0,d.f)(he,re,()=>he.next(fe),de),()=>(0,d.f)(he,re,()=>he.complete(),de),fe=>(0,d.f)(he,re,()=>he.error(fe),de)))})}},3099:(dt,Ae,k)=>{k.d(Ae,{B:()=>re});var d=k(8421),ee=k(7579),R=k(2961),se=k(4482);function re(ae={}){const{connector:he=(()=>new ee.x),resetOnError:fe=!0,resetOnComplete:B=!0,resetOnRefCountZero:j=!0}=ae;return K=>{let Le,xe,be,nt=0,me=!1,pe=!1;const Xe=()=>{xe?.unsubscribe(),xe=void 0},ot=()=>{Xe(),Le=be=void 0,me=pe=!1},Me=()=>{const we=Le;ot(),we?.unsubscribe()};return(0,se.e)((we,De)=>{nt++,!pe&&!me&&Xe();const Be=be=be??he();De.add(()=>{nt--,0===nt&&!pe&&!me&&(xe=de(Me,j))}),Be.subscribe(De),!Le&&nt>0&&(Le=new R.Hp({next:je=>Be.next(je),error:je=>{pe=!0,Xe(),xe=de(ot,fe,je),Be.error(je)},complete:()=>{me=!0,Xe(),xe=de(ot,B),Be.complete()}}),(0,d.Xf)(we).subscribe(Le))})(K)}}function de(ae,he,...fe){if(!0===he)return void ae();if(!1===he)return;const B=new R.Hp({next:()=>{B.unsubscribe(),ae()}});return he(...fe).subscribe(B)}},9468:(dt,Ae,k)=>{k.d(Ae,{R:()=>ee});var d=k(4482);function ee(R,se=0){return(0,d.e)((re,de)=>{de.add(R.schedule(()=>re.subscribe(de),se))})}},8505:(dt,Ae,k)=>{k.d(Ae,{b:()=>re});var d=k(576),ee=k(4482),R=k(5403),se=k(4671);function re(de,ae,he){const fe=(0,d.m)(de)||ae||he?{next:de,error:ae,complete:he}:de;return fe?(0,ee.e)((B,j)=>{var K;null===(K=fe.subscribe)||void 0===K||K.call(fe);let Le=!0;B.subscribe((0,R.x)(j,xe=>{var be;null===(be=fe.next)||void 0===be||be.call(fe,xe),j.next(xe)},()=>{var xe;Le=!1,null===(xe=fe.complete)||void 0===xe||xe.call(fe),j.complete()},xe=>{var be;Le=!1,null===(be=fe.error)||void 0===be||be.call(fe,xe),j.error(xe)},()=>{var xe,be;Le&&(null===(xe=fe.unsubscribe)||void 0===xe||xe.call(fe)),null===(be=fe.finalize)||void 0===be||be.call(fe)}))}):se.y}},4408:(dt,Ae,k)=>{k.d(Ae,{o:()=>re});var d=k(727);class ee extends d.w0{constructor(ae,he){super()}schedule(ae,he=0){return this}}const R={setInterval(de,ae,...he){const{delegate:fe}=R;return fe?.setInterval?fe.setInterval(de,ae,...he):setInterval(de,ae,...he)},clearInterval(de){const{delegate:ae}=R;return(ae?.clearInterval||clearInterval)(de)},delegate:void 0};var se=k(8737);class re extends ee{constructor(ae,he){super(ae,he),this.scheduler=ae,this.work=he,this.pending=!1}schedule(ae,he=0){var fe;if(this.closed)return this;this.state=ae;const B=this.id,j=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId(j,B,he)),this.pending=!0,this.delay=he,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(j,this.id,he),this}requestAsyncId(ae,he,fe=0){return R.setInterval(ae.flush.bind(ae,this),fe)}recycleAsyncId(ae,he,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return he;null!=he&&R.clearInterval(he)}execute(ae,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ae,he);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,he){let B,fe=!1;try{this.work(ae)}catch(j){fe=!0,B=j||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ae,scheduler:he}=this,{actions:fe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(fe,this),null!=ae&&(this.id=this.recycleAsyncId(he,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Ae,k)=>{k.d(Ae,{v:()=>R});var d=k(6063);class ee{constructor(re,de=ee.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,ae){return new this.schedulerActionCtor(this,re).schedule(ae,de)}}ee.now=d.l.now;class R extends ee{constructor(re,de=ee.now){super(re,de),this.actions=[],this._active=!1}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let ae;this._active=!0;do{if(ae=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,ae){for(;re=de.shift();)re.unsubscribe();throw ae}}}},4986:(dt,Ae,k)=>{k.d(Ae,{z:()=>R});var d=k(4408);const R=new(k(7565).v)(d.o)},6063:(dt,Ae,k)=>{k.d(Ae,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(dt,Ae,k)=>{k.d(Ae,{z:()=>d});const d={setTimeout(ee,R,...se){const{delegate:re}=d;return re?.setTimeout?re.setTimeout(ee,R,...se):setTimeout(ee,R,...se)},clearTimeout(ee){const{delegate:R}=d;return(R?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(dt,Ae,k)=>{k.d(Ae,{h:()=>ee});const ee=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Ae,k)=>{k.d(Ae,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(dt,Ae,k)=>{k.d(Ae,{_6:()=>de,jO:()=>se,yG:()=>re});var d=k(576);function R(ae){return ae[ae.length-1]}function se(ae){return(0,d.m)(R(ae))?ae.pop():void 0}function re(ae){return function ee(ae){return ae&&(0,d.m)(ae.schedule)}(R(ae))?ae.pop():void 0}function de(ae,he){return"number"==typeof R(ae)?ae.pop():he}},8737:(dt,Ae,k)=>{function d(ee,R){if(ee){const se=ee.indexOf(R);0<=se&&ee.splice(se,1)}}k.d(Ae,{P:()=>d})},3888:(dt,Ae,k)=>{function d(ee){const se=ee(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(Ae,{d:()=>d})},2806:(dt,Ae,k)=>{k.d(Ae,{O:()=>se,x:()=>R});var d=k(2416);let ee=null;function R(re){if(d.v.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),re(),de){const{errorThrown:ae,error:he}=ee;if(ee=null,ae)throw he}}else re()}function se(re){d.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(dt,Ae,k)=>{function d(ee,R,se,re=0,de=!1){const ae=R.schedule(function(){se(),de?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(ae),!de)return ae}k.d(Ae,{f:()=>d})},4671:(dt,Ae,k)=>{function d(ee){return ee}k.d(Ae,{y:()=>d})},1144:(dt,Ae,k)=>{k.d(Ae,{z:()=>d});const d=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(dt,Ae,k)=>{k.d(Ae,{D:()=>ee});var d=k(576);function ee(R){return Symbol.asyncIterator&&(0,d.m)(R?.[Symbol.asyncIterator])}},576:(dt,Ae,k)=>{function d(ee){return"function"==typeof ee}k.d(Ae,{m:()=>d})},3670:(dt,Ae,k)=>{k.d(Ae,{c:()=>R});var d=k(8822),ee=k(576);function R(se){return(0,ee.m)(se[d.L])}},6495:(dt,Ae,k)=>{k.d(Ae,{T:()=>R});var d=k(2202),ee=k(576);function R(se){return(0,ee.m)(se?.[d.h])}},8239:(dt,Ae,k)=>{k.d(Ae,{t:()=>ee});var d=k(576);function ee(R){return(0,d.m)(R?.then)}},3260:(dt,Ae,k)=>{k.d(Ae,{L:()=>se,Q:()=>R});var d=k(655),ee=k(576);function R(re){return(0,d.FC)(this,arguments,function*(){const ae=re.getReader();try{for(;;){const{value:he,done:fe}=yield(0,d.qq)(ae.read());if(fe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(he)}}finally{ae.releaseLock()}})}function se(re){return(0,ee.m)(re?.getReader)}},4482:(dt,Ae,k)=>{k.d(Ae,{A:()=>ee,e:()=>R});var d=k(576);function ee(se){return(0,d.m)(se?.lift)}function R(se){return re=>{if(ee(re))return re.lift(function(de){try{return se(de,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(dt,Ae,k)=>{k.d(Ae,{U:()=>R,z:()=>ee});var d=k(4671);function ee(...se){return R(se)}function R(se){return 0===se.length?d.y:1===se.length?se[0]:function(de){return se.reduce((ae,he)=>he(ae),de)}}},7849:(dt,Ae,k)=>{k.d(Ae,{h:()=>R});var d=k(2416),ee=k(3410);function R(se){ee.z.setTimeout(()=>{const{onUnhandledError:re}=d.v;if(!re)throw se;re(se)})}},4532:(dt,Ae,k)=>{function d(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ae,{z:()=>d})},655:(dt,Ae,k)=>{function se(z,J){var ne={};for(var te in z)Object.prototype.hasOwnProperty.call(z,te)&&J.indexOf(te)<0&&(ne[te]=z[te]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(te=Object.getOwnPropertySymbols(z);Oe<te.length;Oe++)J.indexOf(te[Oe])<0&&Object.prototype.propertyIsEnumerable.call(z,te[Oe])&&(ne[te[Oe]]=z[te[Oe]])}return ne}function he(z,J,ne,te){return new(ne||(ne=Promise))(function(Re,mt){function Xt(cn){try{Ze(te.next(cn))}catch(wn){mt(wn)}}function Gt(cn){try{Ze(te.throw(cn))}catch(wn){mt(wn)}}function Ze(cn){cn.done?Re(cn.value):function Oe(Re){return Re instanceof ne?Re:new ne(function(mt){mt(Re)})}(cn.value).then(Xt,Gt)}Ze((te=te.apply(z,J||[])).next())})}function me(z){return this instanceof me?(this.v=z,this):new me(z)}function pe(z,J,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,te=ne.apply(z,J||[]),Re=[];return Oe={},mt("next"),mt("throw"),mt("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function mt(Qt){te[Qt]&&(Oe[Qt]=function(en){return new Promise(function(Fr,Ft){Re.push([Qt,en,Fr,Ft])>1||Xt(Qt,en)})})}function Xt(Qt,en){try{!function Gt(Qt){Qt.value instanceof me?Promise.resolve(Qt.value.v).then(Ze,cn):wn(Re[0][2],Qt)}(te[Qt](en))}catch(Fr){wn(Re[0][3],Fr)}}function Ze(Qt){Xt("next",Qt)}function cn(Qt){Xt("throw",Qt)}function wn(Qt,en){Qt(en),Re.shift(),Re.length&&Xt(Re[0][0],Re[0][1])}}function ot(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,J=z[Symbol.asyncIterator];return J?J.call(z):(z=function K(z){var J="function"==typeof Symbol&&Symbol.iterator,ne=J&&z[J],te=0;if(ne)return ne.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&te>=z.length&&(z=void 0),{value:z&&z[te++],done:!z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(Re){ne[Re]=z[Re]&&function(mt){return new Promise(function(Xt,Gt){!function Oe(Re,mt,Xt,Gt){Promise.resolve(Gt).then(function(Ze){Re({value:Ze,done:Xt})},mt)}(Xt,Gt,(mt=z[Re](mt)).done,mt.value)})}}}k.d(Ae,{FC:()=>pe,KL:()=>ot,_T:()=>se,mG:()=>he,qq:()=>me})},4650:(dt,Ae,k)=>{k.d(Ae,{$8M:()=>Lu,$Z:()=>kf,AFp:()=>yI,ALo:()=>Jb,AaK:()=>he,BQk:()=>rh,CHM:()=>_u,CRH:()=>_l,CZH:()=>El,CqO:()=>KE,D6c:()=>V0,DdM:()=>pl,EJc:()=>bI,EiD:()=>Td,EpF:()=>_o,F4k:()=>ZE,FYo:()=>A,FiY:()=>Ue,G48:()=>UT,GfV:()=>Fe,Gpc:()=>j,JOm:()=>Ko,JVY:()=>hf,KtG:()=>vu,L6k:()=>pg,LAX:()=>Wy,LFG:()=>qt,LSH:()=>Sd,Lbi:()=>vI,Lck:()=>ce,MMx:()=>Qv,NdJ:()=>ll,OlP:()=>vn,Oqu:()=>oh,PXZ:()=>VT,Q6J:()=>Y_,QGY:()=>Qf,QP$:()=>Jt,QbO:()=>NT,Qsj:()=>P,R0b:()=>_r,RDi:()=>Gy,Rgc:()=>gl,SBq:()=>f,Sil:()=>OT,Suo:()=>ny,TTD:()=>Yi,TgZ:()=>Zf,Tol:()=>Dm,Udp:()=>Xf,VKq:()=>Zb,X6Q:()=>OI,XFs:()=>Ke,Xpm:()=>Ce,Xts:()=>_f,Y36:()=>nl,YKP:()=>qe,YNc:()=>Gr,Yjl:()=>Ee,Yz7:()=>en,Z0I:()=>zi,ZZ4:()=>oa,_Bn:()=>Tt,_UZ:()=>J_,_Vd:()=>Wo,_c5:()=>Vp,_uU:()=>Ev,aQg:()=>wy,c2e:()=>EI,cJS:()=>Ft,cg1:()=>Rm,d8E:()=>Cc,dDg:()=>AI,dqk:()=>an,eBb:()=>zy,eFA:()=>wo,ekj:()=>Tr,eoX:()=>v0,f3M:()=>D,g9A:()=>Pp,gM2:()=>Qm,h0i:()=>gh,hGG:()=>qI,hij:()=>Am,iGM:()=>s0,ifc:()=>ut,ip1:()=>m0,jDz:()=>Hb,kL8:()=>hl,lG2:()=>W,lqb:()=>di,lri:()=>Nh,mCW:()=>Id,n5z:()=>ns,oAB:()=>Ut,oJD:()=>ja,oxw:()=>Jf,pB0:()=>Zy,q3G:()=>Kn,q4F:()=>Je,qLn:()=>Cf,qOj:()=>hm,qZA:()=>Pr,qzn:()=>qo,rWj:()=>Fp,sBO:()=>BT,sIi:()=>eh,s_b:()=>gi,soG:()=>js,tb:()=>wI,tp0:()=>ft,uIk:()=>K_,vHH:()=>be,vpe:()=>pi,wAp:()=>wt,xp6:()=>Zw,ynx:()=>Kf,z2F:()=>Rh,z3N:()=>us,zSh:()=>Yu,zs3:()=>mc});var d=k(7579),ee=k(727),R=k(9751),se=k(6451),re=k(3099);function de(s){for(let o in s)if(s[o]===de)return o;throw Error("Could not find renamed property on target object.")}function ae(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const B=de({__forward_ref__:de});function j(s){return s.__forward_ref__=j,s.toString=function(){return he(this())},s}function K(s){return Le(s)?s():s}function Le(s){return"function"==typeof s&&s.hasOwnProperty(B)&&s.__forward_ref__===j}class be extends Error{constructor(o,a){super(function nt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function we(s,o){throw new be(-201,!1)}function Gt(s,o){null==s&&function Ze(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function en(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ft(s){return{providers:s.providers||[],imports:s.imports||[]}}function fn(s){return bi(s,Ii)||bi(s,si)}function zi(s){return null!==fn(s)}function bi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Hs(s){return s&&(s.hasOwnProperty(ii)||s.hasOwnProperty(fa))?s[ii]:null}const Ii=de({\u0275prov:de}),ii=de({\u0275inj:de}),si=de({ngInjectableDef:de}),fa=de({ngInjectorDef:de});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let Mr;function tr(s){const o=Mr;return Mr=s,o}function oi(s,o,a){const l=fn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ke.Optional?null:void 0!==o?o:void we(he(s))}function Fn(s){return{toString:s}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),ut=(()=>{return(s=ut||(ut={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ut;var s})();const an=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kr={},xt=[],ws=de({\u0275cmp:de}),tn=de({\u0275dir:de}),Ri=de({\u0275pipe:de}),nn=de({\u0275mod:de}),nr=de({\u0275fac:de}),Vr=de({__NG_ELEMENT_ID__:de});let tt=0;function Ce(s){return Fn(()=>{const a=!0===s.standalone,l={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||xt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ut.Emulated,id:"c"+tt++,styles:s.styles||xt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return h.inputs=V(s.inputs,l),h.outputs=V(s.outputs),v&&v.forEach(E=>E(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(Ct).filter(It):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(ht).filter(It):null,h})}function Ct(s){return Q(s)||He(s)}function It(s){return null!==s}function Ut(s){return Fn(()=>({type:s.type,bootstrap:s.bootstrap||xt,declarations:s.declarations||xt,imports:s.imports||xt,exports:s.exports||xt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function V(s,o){if(null==s)return Kr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let h=s[l],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),a[h]=l,o&&(o[h]=g)}return a}const W=Ce;function Ee(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Q(s){return s[ws]||null}function He(s){return s[tn]||null}function ht(s){return s[Ri]||null}function Jt(s){const o=Q(s)||He(s)||ht(s);return null!==o&&o.standalone}function yn(s,o){const a=s[nn]||null;if(!a&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return a}function dr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ur(s){return Array.isArray(s)&&!0===s[1]}function au(s){return 0!=(8&s.flags)}function ga(s){return 2==(2&s.flags)}function xl(s){return 1==(1&s.flags)}function xr(s){return null!==s.template}function qh(s){return 0!=(256&s[2])}function ki(s,o){return s.hasOwnProperty(nr)?s[nr]:null}class Ki{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Yi(){return Ss}function Ss(s){return s.type.prototype.ngOnChanges&&(s.setInput=lu),ma}function ma(){const s=Zh(this),o=s?.current;if(o){const a=s.previous;if(a===Kr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function lu(s,o,a,l){const h=Zh(s)||function Co(s,o){return s[Ol]=o}(s,{previous:Kr,current:null}),g=h.current||(h.current={}),v=h.previous,E=this.declaredInputs[a],I=v[E];g[E]=new Ki(I&&I.currentValue,o,v===Kr),s[l]=o}Yi.ngInherit=!0;const Ol="__ngSimpleChanges__";function Zh(s){return s[Ol]||null}function xn(s){for(;Array.isArray(s);)s=s[0];return s}function ui(s,o){return xn(o[s])}function Br(s,o){return xn(o[s.index])}function So(s,o){return s.data[o]}function Kt(s,o){const a=o[s];return dr(a)?a:a[0]}function Ws(s){return 64==(64&s[2])}function Ci(s,o){return null==o?null:s[o]}function pu(s){s[18]=0}function Sn(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Mt={lFrame:Gl(null),bindingsEnabled:!0};function Xi(){return Mt.bindingsEnabled}function Te(){return Mt.lFrame.lView}function zt(){return Mt.lFrame.tView}function _u(s){return Mt.lFrame.contextLView=s,s[8]}function vu(s){return Mt.lFrame.contextLView=null,s}function Nn(){let s=wu();for(;null!==s&&64===s.type;)s=s.parent;return s}function wu(){return Mt.lFrame.currentTNode}function li(s,o){const a=Mt.lFrame;a.currentTNode=s,a.isParent=o}function _a(){return Mt.lFrame.isParent}function va(){Mt.lFrame.isParent=!1}function Pn(){const s=Mt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Zs(){return Mt.lFrame.bindingIndex++}function es(s){const o=Mt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function ig(s,o){const a=Mt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Eu(o)}function Eu(s){Mt.lFrame.currentDirectiveIndex=s}function ba(s){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function jl(){return Mt.lFrame.currentQueryIndex}function Ia(s){Mt.lFrame.currentQueryIndex=s}function $l(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function bu(s,o,a){if(a&Ke.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||a&Ke.Host||(h=$l(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const l=Mt.lFrame=Hl();return l.currentTNode=o,l.lView=s,!0}function Iu(s){const o=Hl(),a=s[1];Mt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Hl(){const s=Mt.lFrame,o=null===s?null:s.child;return null===o?Gl(s):o}function Gl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ql(){const s=Mt.lFrame;return Mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const rd=ql;function Ks(){const s=ql();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function sr(){return Mt.lFrame.selectedIndex}function Jr(s){Mt.lFrame.selectedIndex=s}function bn(){const s=Mt.lFrame;return So(s.tView,s.selectedIndex)}function Tu(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:N}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-a,I),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(a,N)}}function Qs(s,o,a){xo(s,o,3,a)}function Mo(s,o,a,l){(3&s[2])===a&&xo(s,o,a,l)}function od(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function xo(s,o,a,l){const g=l??-1,v=o.length-1;let E=0;for(let I=void 0!==l?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=l&&E>=l)break}else o[I]<0&&(s[18]+=65536),(E<g||-1==g)&&(ad(s,a,o,I),s[18]=(4294901760&s[18])+I+2),I++}function ad(s,o,a,l){const h=a[l]<0,g=a[l+1],E=s[h?-a[l]:a[l]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Ms{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function No(s,o,a){let l=0;for(;l<a.length;){const h=a[l];if("number"==typeof h){if(0!==h)break;l++;const g=a[l++],v=a[l++],E=a[l++];s.setAttribute(o,v,E,g)}else{const g=h,v=a[++l];xu(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),l++}}return l}function eo(s){return 3===s||4===s||6===s}function xu(s){return 64===s.charCodeAt(0)}function Da(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||ld(s,a,h,null,-1===a||2===a?o[++l]:null)}}return s}function ld(s,o,a,l,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==h&&(s[g+1]=h));if(l===s[g+1])return void(s[g+2]=h)}g++,null!==l&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==h&&s.splice(g++,0,h)}function cd(s){return-1!==s}function hr(s){return 32767&s}function Ta(s,o){let a=function Ca(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Li=!0;function Sa(s){const o=Li;return Li=s,o}let Vn=0;const Ti={};function to(s,o){const a=Pu(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Ma(l.data,s),Ma(o,null),Ma(l.blueprint,null));const h=Ru(s,o),g=s.injectorIndex;if(cd(h)){const v=hr(h),E=Ta(h,o),I=E[1].data;for(let S=0;S<8;S++)o[g+S]=E[v+S]|I[v+S]}return o[g+8]=h,g}function Ma(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Pu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ru(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){if(l=Oo(h),null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function xs(s,o,a){!function Nu(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Vr)&&(l=a[Vr]),null==l&&(l=a[Vr]=Vn++);const h=255&l;o.data[s+(h>>5)]|=1<<h}(s,o,a)}function Ns(s,o,a){if(a&Ke.Optional||void 0!==s)return s;we()}function Ou(s,o,a,l){if(a&Ke.Optional&&void 0===l&&(l=null),0==(a&(Ke.Self|Ke.Host))){const h=s[9],g=tr(void 0);try{return h?h.get(o,l,a&Ke.Optional):oi(o,l,a&Ke.Optional)}finally{tr(g)}}return Ns(l,0,a)}function no(s,o,a,l=Ke.Default,h){if(null!==s){if(1024&o[2]){const v=function Ro(s,o,a,l,h){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=xa(g,v,a,l|Ke.Self,Ti);if(E!==Ti)return E;let I=g.parent;if(!I){const S=v[21];if(S){const N=S.get(a,Ti,l);if(N!==Ti)return N}I=Oo(v),v=v[15]}g=I}return h}(s,o,a,l,Ti);if(v!==Ti)return v}const g=xa(s,o,a,l,Ti);if(g!==Ti)return g}return Ou(o,a,l,h)}function xa(s,o,a,l,h){const g=function Kl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Vr)?s[Vr]:void 0;return"number"==typeof o?o>=0?255&o:Yl:o}(a);if("function"==typeof g){if(!bu(o,s,l))return l&Ke.Host?Ns(h,0,l):Ou(o,a,l,h);try{const v=g(l);if(null!=v||l&Ke.Optional)return v;we()}finally{rd()}}else if("number"==typeof g){let v=null,E=Pu(s,o),I=-1,S=l&Ke.Host?o[16][6]:null;for((-1===E||l&Ke.SkipSelf)&&(I=-1===E?Ru(s,o):o[E+8],-1!==I&&Na(l,!1)?(v=o[1],E=hr(I),o=Ta(I,o)):E=-1);-1!==E;){const N=o[1];if(ku(g,E,N.data)){const O=fd(E,o,a,v,l,S);if(O!==Ti)return O}I=o[E+8],-1!==I&&Na(l,o[1].data[E+8]===S)&&ku(g,E,o)?(v=N,E=hr(I),o=Ta(I,o)):E=-1}}return h}function fd(s,o,a,l,h,g){const v=o[1],E=v.data[s+8],N=Po(E,v,a,null==l?ga(E)&&Li:l!=v&&0!=(3&E.type),h&Ke.Host&&g===E);return null!==N?ts(o,v,N,E):Ti}function Po(s,o,a,l,h){const g=s.providerIndexes,v=o.data,E=1048575&g,I=s.directiveStart,N=g>>20,H=h?E+N:s.directiveEnd;for(let X=l?E:E+N;X<H;X++){const ve=v[X];if(X<I&&a===ve||X>=I&&ve.type===a)return X}if(h){const X=v[I];if(X&&xr(X)&&X.type===a)return I}return null}function ts(s,o,a,l){let h=s[a];const g=o.data;if(function Js(s){return s instanceof Ms}(h)){const v=h;v.resolving&&function Xe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new be(-200,`Circular dependency in DI detected for ${s}${a}`)}(function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}(g[a]));const E=Sa(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?tr(v.injectImpl):null;bu(s,l,Ke.Default);try{h=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function sd(s,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(l){const v=Ss(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,h),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==I&&tr(I),Sa(E),v.resolving=!1,rd()}}return h}function ku(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Na(s,o){return!(s&Ke.Self||s&Ke.Host&&o)}class ro{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return no(this._tNode,this._lView,o,l,a)}}function Yl(){return new ro(Nn(),Te())}function ns(s){return Fn(()=>{const o=s.prototype.constructor,a=o[nr]||Fu(o),l=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==l;){const g=h[nr]||Fu(h);if(g&&g!==a)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Fu(s){return Le(s)?()=>{const o=Fu(K(s));return o&&o()}:ki(s)}function Oo(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function Lu(s){return function hd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const g=a[h];if(eo(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(g===o)return a[h+1];h+=2}}}return null}(Nn(),s)}const Ps="__parameters__";function Lo(s,o,a){return Fn(()=>{const l=function Vu(s){return function(...a){if(s){const l=s(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...g){if(this instanceof h)return l.apply(this,g),this;const v=new h(...g);return E.annotation=v,E;function E(I,S,N){const O=I.hasOwnProperty(Ps)?I[Ps]:Object.defineProperty(I,Ps,{value:[]})[Ps];for(;O.length<=N;)O.push(null);return(O[N]=O[N]||[]).push(v),I}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class vn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function dn(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),dn(l,o)):o!==s&&o.push(l)}return o}function On(s,o){s.forEach(a=>Array.isArray(a)?On(a,o):o(a))}function pd(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function rs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function pr(s,o,a){let l=Rs(s,o);return l>=0?s[1|l]=a:(l=~l,function Ql(s,o,a,l){let h=s.length;if(h==o)s.push(a,l);else if(1===h)s.push(l,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function bt(s,o){const a=Rs(s,o);if(a>=0)return s[1|a]}function Rs(s,o){return function Uo(s,o,a){let l=0,h=s.length>>a;for(;h!==l;){const g=l+(h-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?h=g:l=g+1}return~(h<<a)}(s,o,1)}const ti={},Gu="__NG_DI_FLAG__",qu="ngTempTokenPath",ao=/\n/gm,md="__source";let Un;function Vi(s){const o=Un;return Un=s,o}function Jl(s,o=Ke.Default){if(void 0===Un)throw new be(-203,!1);return null===Un?oi(s,void 0,o):Un.get(s,o&Ke.Optional?null:void 0,o)}function qt(s,o=Ke.Default){return(function vs(){return Mr}()||Jl)(K(s),o)}function D(s,o=Ke.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),qt(s,o)}function C(s){const o=[];for(let a=0;a<s.length;a++){const l=K(s[a]);if(Array.isArray(l)){if(0===l.length)throw new be(900,!1);let h,g=Ke.Default;for(let v=0;v<l.length;v++){const E=l[v],I=F(E);"number"==typeof I?-1===I?h=E.token:g|=I:h=E}o.push(qt(h,g))}else o.push(qt(l))}return o}function x(s,o){return s[Gu]=o,s.prototype[Gu]=o,s}function F(s){return s[Gu]}const Ue=x(Lo("Optional"),8),ft=x(Lo("SkipSelf"),4);let vd,zu,co;function Gy(s){vd=s}function Fa(s){return function wd(){if(void 0===zu&&(zu=null,an.trustedTypes))try{zu=an.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return zu}()?.createHTML(s)||s}function Go(s){return function lf(){if(void 0===co&&(co=null,an.trustedTypes))try{co=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return co}()?.createHTML(s)||s}class as{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class qy extends as{getTypeName(){return"HTML"}}class Wu extends as{getTypeName(){return"Style"}}class Xl extends as{getTypeName(){return"Script"}}class df extends as{getTypeName(){return"URL"}}class bd extends as{getTypeName(){return"ResourceURL"}}function us(s){return s instanceof as?s.changingThisBreaksApplicationSecurity:s}function qo(s,o){const a=function ec(s){return s instanceof as&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function hf(s){return new qy(s)}function pg(s){return new Wu(s)}function zy(s){return new Xl(s)}function Wy(s){return new df(s)}function Zy(s){return new bd(s)}class gg{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Fa(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class Ky{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Fa(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Fa(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let h=a.length-1;0<h;h--){const v=a.item(h).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Va=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Id(s){return(s=String(s)).match(Va)?s:"unsafe:"+s}function ls(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function Os(...s){const o={};for(const a of s)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const mg=ls("area,br,col,hr,img,wbr"),ks=ls("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dd=ls("rp,rt"),ff=Os(mg,Os(ks,ls("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Os(Dd,ls("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Os(Dd,ks)),ho=ls("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pf=Os(ho,ls("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ls("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),_g=ls("script,style,template");class vg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!ff.hasOwnProperty(a))return this.sanitizedSomething=!0,!_g.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let h=0;h<l.length;h++){const g=l.item(h),v=g.name,E=v.toLowerCase();if(!pf.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=g.value;ho[E]&&(I=Id(I)),this.buf.push(" ",v,'="',wg(I),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();ff.hasOwnProperty(a)&&!mg.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(wg(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Ua=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gf=/([^\#-~ |!])/g;function wg(s){return s.replace(/&/g,"&amp;").replace(Ua,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(gf,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rc;function Td(s,o){let a=null;try{rc=rc||function tc(s){const o=new Ky(s);return function pw(){try{return!!(new window.DOMParser).parseFromString(Fa(""),"text/html")}catch{return!1}}()?new gg(o):o}(s);let l=o?String(o):"";a=rc.getInertBodyElement(l);let h=5,g=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=g,g=a.innerHTML,a=rc.getInertBodyElement(l)}while(l!==g);return Fa((new vg).sanitizeChildren(Ba(a)||a))}finally{if(a){const l=Ba(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Ba(s){return"content"in s&&function ic(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Kn=(()=>((Kn=Kn||{})[Kn.NONE=0]="NONE",Kn[Kn.HTML=1]="HTML",Kn[Kn.STYLE=2]="STYLE",Kn[Kn.SCRIPT=3]="SCRIPT",Kn[Kn.URL=4]="URL",Kn[Kn.RESOURCE_URL=5]="RESOURCE_URL",Kn))();function ja(s){const o=Zu();return o?Go(o.sanitize(Kn.HTML,s)||""):qo(s,"HTML")?Go(us(s)):Td(function uf(){return void 0!==vd?vd:typeof document<"u"?document:void 0}(),me(s))}function Sd(s){const o=Zu();return o?o.sanitize(Kn.URL,s)||"":qo(s,"URL")?us(s):Id(me(s))}function Zu(){const s=Te();return s&&s[12]}const _f=new vn("ENVIRONMENT_INITIALIZER"),bg=new vn("INJECTOR",-1),Ig=new vn("INJECTOR_DEF_TYPES");class Dg{get(o,a=ti){if(a===ti){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}function Cg(...s){return{\u0275providers:xd(0,s)}}function xd(s,...o){const a=[],l=new Set;let h;return On(o,g=>{const v=g;Pd(v,a,[],l)&&(h||(h=[]),h.push(v))}),void 0!==h&&Nd(h,a),a}function Nd(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];On(h,g=>{o.push(g)})}}function Pd(s,o,a,l){if(!(s=K(s)))return!1;let h=null,g=Hs(s);const v=!g&&Q(s);if(g||v){if(v&&!v.standalone)return!1;h=s}else{const I=s.ngModule;if(g=Hs(I),!g)return!1;h=I}const E=l.has(h);if(v){if(E)return!1;if(l.add(h),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of I)Pd(S,o,a,l)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let S;l.add(h);try{On(g.imports,N=>{Pd(N,o,a,l)&&(S||(S=[]),S.push(N))})}finally{}void 0!==S&&Nd(S,o)}if(!E){const S=ki(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:xt},{provide:Ig,useValue:h,multi:!0},{provide:_f,useValue:()=>qt(h),multi:!0})}const I=g.providers;null==I||E||On(I,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const vf=de({provide:String,useValue:de});function Rd(s){return null!==s&&"object"==typeof s&&vf in s}function $r(s){return"function"==typeof s}const Yu=new vn("Set Injector scope."),Ha={},Jy={};let Ui;function sc(){return void 0===Ui&&(Ui=new Dg),Ui}class di{}class Qu extends di{constructor(o,a,l,h){super(),this.parent=a,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,po(o,v=>this.processProvider(v)),this.records.set(bg,Yn(void 0,this)),h.has("environment")&&this.records.set(di,Yn(void 0,this));const g=this.records.get(Yu);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Ig.multi,xt,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Vi(this),l=tr(void 0);try{return o()}finally{Vi(a),tr(l)}}get(o,a=ti,l=Ke.Default){this.assertNotDestroyed();const h=Vi(this),g=tr(void 0);try{if(!(l&Ke.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function Xy(s){return"function"==typeof s||"object"==typeof s&&s instanceof vn}(o)&&fn(o);E=I&&this.injectableDefInScope(I)?Yn(Od(o),Ha):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Ke.Self?sc():this.parent).get(o,a=l&Ke.Optional&&a===ti?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[qu]=v[qu]||[]).unshift(he(o)),h)throw v;return function Y(s,o,a,l){const h=s[qu];throw o[md]&&h.unshift(o[md]),s.message=function oe(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):he(E)))}h=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${s.replace(ao,"\n  ")}`}("\n"+s.message,h,a,l),s.ngTokenPath=h,s[qu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{tr(g),Vi(h)}}resolveInjectorInitializers(){const o=Vi(this),a=tr(void 0);try{const l=this.get(_f.multi,xt,Ke.Self);for(const h of l)h()}finally{Vi(o),tr(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(he(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(o){let a=$r(o=K(o))?o:K(o&&o.provide);const l=function Tg(s){return Rd(s)?Yn(void 0,s.useValue):Yn(oc(s),Ha)}(o);if($r(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Yn(void 0,Ha,!0),h.factory=()=>C(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Ha&&(a.value=Jy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ga(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Od(s){const o=fn(s),a=null!==o?o.factory:ki(s);if(null!==a)return a;if(s instanceof vn)throw new be(204,!1);if(s instanceof Function)return function wf(s){const o=s.length;if(o>0)throw function Ir(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new be(204,!1);const a=function Lr(s){const o=s&&(s[Ii]||s[si]);if(o){const a=function Zr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new be(204,!1)}function oc(s,o,a){let l;if($r(s)){const h=K(s);return ki(h)||Od(h)}if(Rd(s))l=()=>K(s.useValue);else if(function zo(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...C(s.deps||[]));else if(function jr(s){return!(!s||!s.useExisting)}(s))l=()=>qt(K(s.useExisting));else{const h=K(s&&(s.useClass||s.provide));if(!function Ef(s){return!!s.deps}(s))return ki(h)||Od(h);l=()=>new h(...C(s.deps))}return l}function Yn(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function fo(s){return!!s.\u0275providers}function po(s,o){for(const a of s)Array.isArray(a)?po(a,o):fo(a)?po(a.\u0275providers,o):o(a)}class kd{}class uc{resolveComponentFactory(o){throw function Sg(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Wo=(()=>{class s{}return s.NULL=new uc,s})();function If(){return y(Nn(),Te())}function y(s,o){return new f(Br(s,o))}let f=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=If,s})();function m(s){return s instanceof f?s.nativeElement:s}class A{}let P=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function q(){const s=Te(),a=Kt(Nn().index,s);return(dr(a)?a:s)[11]}(),s})(),le=(()=>{class s{}return s.\u0275prov=en({token:s,providedIn:"root",factory:()=>null}),s})();class Fe{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Je=new Fe("14.2.7"),vt={};function i_(s){return s.ngOriginalError}class Cf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&i_(o);for(;a&&i_(a);)a=i_(a);return a||null}}const o_=new Map;let YD=0;const Tf="__ngContext__";function ni(s,o){dr(o)?(s[Tf]=o[20],function JD(s){o_.set(s[20],s)}(o)):s[Tf]=o}function za(s){return s instanceof Function?s():s}var Ko=(()=>((Ko=Ko||{})[Ko.Important=1]="Important",Ko[Ko.DashCase=2]="DashCase",Ko))();function c_(s,o){return undefined(s,o)}function xf(s){const o=s[3];return Ur(o)?o[3]:o}function Rg(s){return d_(s[13])}function Og(s){return d_(s[4])}function d_(s){for(;null!==s&&!Ur(s);)s=s[4];return s}function jd(s,o,a,l,h){if(null!=l){let g,v=!1;Ur(l)?g=l:dr(l)&&(v=!0,l=l[0]);const E=xn(l);0===s&&null!==a?null==h?Nf(o,a,E):fc(o,a,E,h||null,!0):1===s&&null!==a?fc(o,a,E,h||null,!0):2===s?function dC(s,o,a){const l=Fg(s,o);l&&function lC(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,E,v):3===s&&o.destroyNode(E),null!=g&&function Bg(s,o,a,l,h){const g=a[7];g!==xn(a)&&jd(o,s,l,g,h);for(let E=10;E<a.length;E++){const I=a[E];Pf(I[1],I,s,o,l,g)}}(o,s,g,a,h)}}function f_(s,o,a){return s.createElement(o,a)}function Ow(s,o){const a=s[9],l=a.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Sn(h,-1)),a.splice(l,1)}function g_(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const h=l[17];null!==h&&h!==s&&Ow(h,l),o>0&&(s[a-1][4]=l[4]);const g=rs(s,10+o);!function Nw(s,o){Pf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function kw(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&Pf(s,o,a,3,null,null),function Rw(s){let o=s[13];if(!o)return $d(s[1],s);for(;o;){let a=null;if(dr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)dr(o)&&$d(o[1],o),o=o[3];null===o&&(o=s),dr(o)&&$d(o[1],o),a=o&&o[4]}o=a}}(o)}}function $d(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function m_(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof Ms)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=h[g[v]],I=g[v+1];try{I.call(E)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function Fw(s,o){const a=s.cleanup,l=o[7];let h=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],E="function"==typeof v?v(o):xn(o[v]),I=l[h=a[g+2]],S=a[g+3];"boolean"==typeof S?E.removeEventListener(a[g],I,S):S>=0?l[h=S]():l[h=-S].unsubscribe(),g+=2}else{const v=l[h=a[g+1]];a[g].call(v)}if(null!==l){for(let g=h+1;g<l.length;g++)(0,l[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Ur(o[3])){a!==o[3]&&Ow(a,o);const l=o[19];null!==l&&l.detachView(s)}!function XD(s){o_.delete(s[20])}(o)}}function kg(s,o,a){return function Lw(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=s.data[l.directiveStart].encapsulation;if(h===ut.None||h===ut.Emulated)return null}return Br(l,a)}(s,o.parent,a)}function fc(s,o,a,l,h){s.insertBefore(o,a,l,h)}function Nf(s,o,a){s.appendChild(o,a)}function Vw(s,o,a,l,h){null!==l?fc(s,o,a,l,h):Nf(s,o,a)}function Fg(s,o){return s.parentNode(o)}let Uw=function Dr(s,o,a){return 40&s.type?Br(s,a):null};function pc(s,o,a,l){const h=kg(s,l,o),g=o[11],E=function y_(s,o,a){return Uw(s,o,a)}(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let I=0;I<a.length;I++)Vw(g,h,a[I],E,!1);else Vw(g,h,a,E,!1)}function Vg(s,o){if(null!==o){const a=o.type;if(3&a)return Br(o,s);if(4&a)return Ug(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Vg(s,l);{const h=s[o.index];return Ur(h)?Ug(-1,h):xn(h)}}if(32&a)return c_(o,s)()||xn(s[o.index]);{const l=Bw(s,o);return null!==l?Array.isArray(l)?l[0]:Vg(xf(s[16]),l):Vg(s,o.next)}}return null}function Bw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ug(s,o){const a=10+s+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return Vg(l,h)}return o[7]}function jw(s,o,a,l,h,g,v){for(;null!=a;){const E=l[a.index],I=a.type;if(v&&0===o&&(E&&ni(xn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)jw(s,o,a.child,l,h,g,!1),jd(o,s,h,E,g);else if(32&I){const S=c_(a,l);let N;for(;N=S();)jd(o,s,h,N,g);jd(o,s,h,E,g)}else 16&I?v_(s,o,l,a,h,g):jd(o,s,h,E,g);a=v?a.projectionNext:a.next}}function Pf(s,o,a,l,h,g){jw(a,l,s.firstChild,o,h,g,!1)}function v_(s,o,a,l,h,g){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)jd(o,s,h,I[S],g);else jw(s,o,I,v[3],h,g,!0)}function w_(s,o,a){s.setAttribute(o,"style",a)}function el(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function jg(s,o,a){let l=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===l||s.charCodeAt(h+g)<=32)return h}a=h+1}}const E_="ng-template";function $w(s,o,a){let l=0;for(;l<s.length;){let h=s[l++];if(a&&"class"===h){if(h=s[l],-1!==jg(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<s.length&&"string"==typeof(h=s[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function $g(s){return 4===s.type&&s.value!==E_}function hC(s,o,a){return o===(4!==s.type||a?s.value:E_)}function fC(s,o,a){let l=4;const h=s.attrs||[],g=function Hg(s){for(let o=0;o<s.length;o++)if(eo(s[o]))return o;return s.length}(h);let v=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!hC(s,I,a)||""===I&&1===o.length){if(go(l))return!1;v=!0}}else{const S=8&l?I:o[++E];if(8&l&&null!==s.attrs){if(!$w(s.attrs,S,a)){if(go(l))return!1;v=!0}continue}const O=Hw(8&l?"class":I,h,$g(s),a);if(-1===O){if(go(l))return!1;v=!0;continue}if(""!==S){let H;H=O>g?"":h[O+1].toLowerCase();const X=8&l?H:null;if(X&&-1!==jg(X,S,0)||2&l&&S!==H){if(go(l))return!1;v=!0}}}}else{if(!v&&!go(l)&&!go(I))return!1;if(v&&go(I))continue;v=!1,l=I|1&l}}return go(l)||v}function go(s){return 0==(1&s)}function Hw(s,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function FM(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function Gw(s,o,a=!1){for(let l=0;l<o.length;l++)if(fC(s,o[l],a))return!0;return!1}function zw(s,o){return s?":not("+o.trim()+")":o}function pC(s){let o=s[0],a=1,l=2,h="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const E=s[++a];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?h+="."+v:4&l&&(h+=" "+v);else""!==h&&!go(v)&&(o+=zw(g,h),h=""),l=v,g=g||!go(l);a++}return""!==h&&(o+=zw(g,h)),o}const jt={};function Zw(s){Kw(zt(),Te(),sr()+s,!1)}function Kw(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Qs(o,g,a)}else{const g=s.preOrderHooks;null!==g&&Mo(o,g,0,a)}Jr(a)}function I_(s,o=null,a=null,l){const h=Jw(s,o,a,l);return h.resolveInjectorInitializers(),h}function Jw(s,o=null,a=null,l,h=new Set){const g=[a||xt,Cg(s)];return l=l||("object"==typeof s?void 0:he(s)),new Qu(g,o||sc(),l||null,h)}let mc=(()=>{class s{static create(a,l){if(Array.isArray(a))return I_({name:""},l,a,"");{const h=a.name??"";return I_({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=ti,s.NULL=new Dg,s.\u0275prov=en({token:s,providedIn:"any",factory:()=>qt(bg)}),s.__NG_ELEMENT_ID__=-1,s})();function nl(s,o=Ke.Default){const a=Te();return null===a?qt(s,o):no(Nn(),a,K(s),o)}function kf(){throw new Error("invalid")}function Ff(s,o){return s<<17|o<<2}function Ls(s){return s>>17&32767}function Zg(s){return 2|s}function il(s){return(131068&s)>>2}function cE(s,o){return-131069&s|o<<2}function Lf(s){return 1|s}function vE(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Ia(h),v.contentQueries(2,o[g],g)}}}function Uf(s,o,a,l,h,g,v,E,I,S,N){const O=o.blueprint.slice();return O[0]=h,O[2]=76|l,(null!==N||s&&1024&s[2])&&(O[2]|=1024),pu(O),O[3]=O[15]=s,O[8]=a,O[10]=v||s&&s[10],O[11]=E||s&&s[11],O[12]=I||s&&s[12]||null,O[9]=S||s&&s[9]||null,O[6]=g,O[20]=function QD(){return YD++}(),O[21]=N,O[16]=2==o.type?s[16]:O,O}function Zd(s,o,a,l,h){let g=s.data[o];if(null===g)g=function EE(s,o,a,l,h){const g=wu(),v=_a(),I=s.data[o]=function CE(s,o,a,l,h,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,h);return null===s.firstChild&&(s.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,a,l,h),function rg(){return Mt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=h;const v=function Ao(){const s=Mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return li(g,!0),g}function Kd(s,o,a,l){if(0===a)return-1;const h=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return h}function im(s,o,a){Iu(o);try{const l=s.viewQuery;null!==l&&H_(1,l,a);const h=s.template;null!==h&&sm(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&vE(s,o),s.staticViewQueries&&H_(2,s.viewQuery,a);const g=s.components;null!==g&&function PC(s,o){for(let a=0;a<o.length;a++)$_(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Ks()}}function P_(s,o,a,l){const h=o[2];if(128!=(128&h)){Iu(o);try{pu(o),function Ul(s){return Mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&sm(s,o,a,2,l);const v=3==(3&h);if(v){const S=s.preOrderCheckHooks;null!==S&&Qs(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Mo(o,S,0,null),od(o,0)}if(function $C(s){for(let o=Rg(s);null!==o;o=Og(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],g=h[3];0==(512&h[2])&&Sn(g,1),h[2]|=512}}}(o),function jf(s){for(let o=Rg(s);null!==o;o=Og(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];Ws(l)&&P_(h,l,h.template,l[8])}}(o),null!==s.contentQueries&&vE(s,o),v){const S=s.contentCheckHooks;null!==S&&Qs(o,S)}else{const S=s.contentHooks;null!==S&&Mo(o,S,1),od(o,1)}!function NC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)Jr(~h);else{const g=h,v=a[++l],E=a[++l];ig(v,g),E(2,o[g])}}}finally{Jr(-1)}}(s,o);const E=s.components;null!==E&&function wE(s,o){for(let a=0;a<o.length;a++)B_(s,o[a])}(o,E);const I=s.viewQuery;if(null!==I&&H_(2,I,l),v){const S=s.viewCheckHooks;null!==S&&Qs(o,S)}else{const S=s.viewHooks;null!==S&&Mo(o,S,2),od(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Sn(o[3],-1))}finally{Ks()}}}function sm(s,o,a,l,h){const g=sr(),v=2&l;try{Jr(-1),v&&o.length>22&&Kw(s,o,22,!1),a(l,h)}finally{Jr(g)}}function bE(s,o,a){if(au(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}function om(s,o,a){!Xi()||(function TE(s,o,a,l){const h=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||to(a,o),ni(l,o);const v=a.initialInputs;for(let E=h;E<g;E++){const I=s.data[E],S=xr(I);S&&ME(o,a,I);const N=ts(o,s,E,a);ni(N,o),null!==v&&U_(0,E-h,N,I,0,v),S&&(Kt(a.index,o)[8]=N)}}(s,o,a,Br(a,o)),128==(128&a.flags)&&function SE(s,o,a){const l=a.directiveStart,h=a.directiveEnd,g=a.index,v=function Bl(){return Mt.lFrame.currentDirectiveIndex}();try{Jr(g);for(let E=l;E<h;E++){const I=s.data[E],S=o[E];Eu(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&um(I,S)}}finally{Jr(-1),Eu(v)}}(s,o,a))}function Bf(s,o,a=Br){const l=o.localNames;if(null!==l){let h=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],E=-1===v?a(o,s):s[v];s[h++]=E}}}function IE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=DE(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function DE(s,o,a,l,h,g,v,E,I,S){const N=22+l,O=N+h,H=function RC(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:jt);return a}(N,O),X="function"==typeof S?S():S;return H[1]={type:s,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:o,data:H.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:X,incompleteFirstPass:!1}}function O_(s,o,a,l){const h=q_(o);null===a?h.push(l):(h.push(a),s.firstCreatePass&&PE(s).push(l,h.length-1))}function Yd(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const h=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function OC(s,o){const l=o.directiveEnd,h=s.data,g=o.attrs,v=[];let E=null,I=null;for(let S=o.directiveStart;S<l;S++){const N=h[S],O=N.inputs,H=null===g||$g(o)?null:BC(O,g);v.push(H),E=Yd(O,S,E),I=Yd(N.outputs,S,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=I}function Bi(s,o,a,l,h,g,v,E){const I=Br(o,a);let N,S=o.inputs;!E&&null!=S&&(N=S[l])?(OE(s,a,N,l,h),ga(o)&&FC(a,o.index)):3&o.type&&(l=function kC(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),h=null!=v?v(h,o.value||"",l):h,g.setProperty(I,l,h))}function FC(s,o){const a=Kt(o,s);16&a[2]||(a[2]|=32)}function k_(s,o,a,l){let h=!1;if(Xi()){const g=function VC(s,o,a){const l=s.directiveRegistry;let h=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];Gw(a,v.selectors,!1)&&(h||(h=[]),xs(to(a,o),s,v.type),xr(v)?(L_(s,a),h.unshift(v)):h.push(v))}return h}(s,o,a),v=null===l?null:{"":-1};if(null!==g){h=!0,V_(a,s.data.length,g.length);for(let N=0;N<g.length;N++){const O=g[N];O.providersResolver&&O.providersResolver(O)}let E=!1,I=!1,S=Kd(s,o,g.length,null);for(let N=0;N<g.length;N++){const O=g[N];a.mergedAttrs=Da(a.mergedAttrs,O.hostAttrs),AE(s,a,o,S,O),zM(S,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const H=O.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!I&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),I=!0),S++}OC(s,a)}v&&function UC(s,o,a){if(o){const l=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=a[o[h+1]];if(null==g)throw new be(-301,!1);l.push(o[h],g)}}}(a,l,v)}return a.mergedAttrs=Da(a.mergedAttrs,a.attrs),h}function F_(s,o,a,l,h,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function LC(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,h,v)}}function um(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function L_(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function zM(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;xr(o)&&(a[""]=s)}}function V_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function AE(s,o,a,l,h){s.data[l]=h;const g=h.factory||(h.factory=ki(h.type)),v=new Ms(g,xr(h),nl);s.blueprint[l]=v,a[l]=v,F_(s,o,0,l,Kd(s,a,h.hostVars,jt),h)}function ME(s,o,a){const l=Br(o,s),h=IE(a),g=s[10],v=cm(s,Uf(s,h,null,a.onPush?32:16,l,o,g,g.createRenderer(l,a),null,null,null));s[o.index]=v}function Qo(s,o,a,l,h,g){const v=Br(s,o);!function lm(s,o,a,l,h,g,v){if(null==g)s.removeAttribute(o,h,a);else{const E=null==v?me(g):v(g,l||"",h);s.setAttribute(o,h,E,a)}}(o[11],v,g,s.value,a,l,h)}function U_(s,o,a,l,h,g){const v=g[o];if(null!==v){const E=l.setInput;for(let I=0;I<v.length;){const S=v[I++],N=v[I++],O=v[I++];null!==E?l.setInput(a,O,S,N):a[N]=O}}}function BC(s,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,s[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function xE(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function B_(s,o){const a=Kt(o,s);if(Ws(a)){const l=a[1];48&a[2]?P_(l,a,l.template,a[8]):a[5]>0&&j_(a)}}function j_(s){for(let l=Rg(s);null!==l;l=Og(l))for(let h=10;h<l.length;h++){const g=l[h];if(Ws(g))if(512&g[2]){const v=g[1];P_(v,g,v.template,g[8])}else g[5]>0&&j_(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=Kt(a[l],s);Ws(h)&&h[5]>0&&j_(h)}}function $_(s,o){const a=Kt(o,s),l=a[1];(function NE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),im(l,a,a[8])}function cm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Qd(s){for(;s;){s[2]|=32;const o=xf(s);if(qh(s)&&!o)return s;s=o}return null}function dm(s,o,a,l=!0){const h=o[10];h.begin&&h.begin();try{P_(s,o,s.template,a)}catch(v){throw l&&RE(o,v),v}finally{h.end&&h.end()}}function H_(s,o,a){Ia(0),o(s,a)}function q_(s){return s[7]||(s[7]=[])}function PE(s){return s.cleanup||(s.cleanup=[])}function RE(s,o){const a=s[9],l=a?a.get(Cf,null):null;l&&l.handleError(o)}function OE(s,o,a,l,h){for(let g=0;g<a.length;){const v=a[g++],E=a[g++],I=o[v],S=s.data[v];null!==S.setInput?S.setInput(I,h,l,E):I[E]=h}}function $f(s,o,a){let l=a?s.styles:null,h=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?g=E:1==g?h=fe(h,E):2==g&&(l=fe(l,E+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=h:s.classesWithoutHost=h}function Hf(s,o,a,l,h=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(xn(g)),Ur(g))for(let E=10;E<g.length;E++){const I=g[E],S=I[1].firstChild;null!==S&&Hf(I[1],I,S,l)}const v=a.type;if(8&v)Hf(s,o,a.child,l);else if(32&v){const E=c_(a,o);let I;for(;I=E();)l.push(I)}else if(16&v){const E=Bw(o,a);if(Array.isArray(E))l.push(...E);else{const I=xf(o[16]);Hf(I[1],I,E,l,!0)}}a=h?a.projectionNext:a.next}return l}class Jd{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Hf(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ur(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(g_(o,l),rs(a,l))}this._attachedToViewContainer=!1}kw(this._lView[1],this._lView)}onDestroy(o){O_(this._lView[1],this._lView,null,o)}markForCheck(){Qd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){dm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Pw(s,o){Pf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=o}}class Ec extends Jd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;dm(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class W_ extends Wo{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Q(o);return new Gf(a,this.ngModule)}}function Z_(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class kE{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const h=this.injector.get(o,vt,l);return h!==vt||a===vt?h:this.parentInjector.get(o,a,l)}}class Gf extends kd{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Ww(s){return s.map(pC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Z_(this.componentDef.inputs)}get outputs(){return Z_(this.componentDef.outputs)}create(o,a,l,h){let g=(h=h||this.ngModule)instanceof di?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new kE(o,g):o,E=v.get(A,null);if(null===E)throw new be(407,!1);const I=v.get(le,null),S=E.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",O=l?function R_(s,o,a){return s.selectRootElement(o,a===ut.ShadowDom)}(S,l,this.componentDef.encapsulation):f_(E.createRenderer(null,this.componentDef),N,function GC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),H=this.componentDef.onPush?288:272,X=DE(0,null,null,1,0,null,null,null,null,null),ve=Uf(null,X,null,H,null,null,E,S,I,v,null);let ke,Ge;Iu(ve);try{const We=function VE(s,o,a,l,h,g){const v=a[1];a[22]=s;const I=Zd(v,22,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&($f(I,S,!0),null!==s&&(No(h,s,S),null!==I.classes&&el(h,s,I.classes),null!==I.styles&&w_(h,s,I.styles)));const N=l.createRenderer(s,o),O=Uf(a,IE(o),null,o.onPush?32:16,a[22],I,l,N,g||null,null,null);return v.firstCreatePass&&(xs(to(I,a),v,o.type),L_(v,I),V_(I,a.length,1)),cm(a,O),a[22]=O}(O,this.componentDef,ve,E,S);if(O)if(l)No(S,O,["ng-version",Je.full]);else{const{attrs:Et,classes:Se}=function gC(s){const o=[],a=[];let l=1,h=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++l]):8===h&&a.push(g);else{if(!go(h))break;h=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Et&&No(S,O,Et),Se&&Se.length>0&&el(S,O,Se.join(" "))}if(Ge=So(X,22),void 0!==a){const Et=Ge.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const Dt=a[Se];Et.push(null!=Dt?Array.from(Dt):null)}}ke=function zC(s,o,a,l){const h=a[1],g=function qM(s,o,a){const l=Nn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),AE(s,l,o,Kd(s,o,1,null),a),OC(s,l));const h=ts(o,s,l.directiveStart,l);ni(h,o);const g=Br(l,o);return g&&ni(g,o),h}(h,a,o);if(s[8]=a[8]=g,null!==l)for(const E of l)E(g,o);if(o.contentQueries){const E=Nn();o.contentQueries(1,g,E.directiveStart)}const v=Nn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Jr(v.index),F_(a[1],v,0,v.directiveStart,v.directiveEnd,o),um(o,g)),g}(We,this.componentDef,ve,[UE]),im(X,ve,null)}finally{Ks()}return new LE(this.componentType,ke,y(Ge,ve),ve,Ge)}}class LE extends class bf{}{constructor(o,a,l,h,g){super(),this.location=l,this._rootLView=h,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Ec(h),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[o])){const g=this._rootLView;OE(g[1],g,h,o,a),FC(g,this._tNode.index)}}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function UE(){const s=Nn();Tu(Te()[1],s)}function hm(s){let o=function BE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let h;if(xr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new be(903,!1);h=o.\u0275dir}if(h){if(a){l.push(h);const v=s;v.inputs=fm(s.inputs),v.declaredInputs=fm(s.declaredInputs),v.outputs=fm(s.outputs);const E=h.hostBindings;E&&YM(s,E);const I=h.viewQuery,S=h.contentQueries;if(I&&ZM(s,I),S&&KM(s,S),ae(s.inputs,h.inputs),ae(s.declaredInputs,h.declaredInputs),ae(s.outputs,h.outputs),xr(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===hm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function WC(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const h=s[l];h.hostVars=o+=h.hostVars,h.hostAttrs=Da(h.hostAttrs,a=Da(a,h.hostAttrs))}}(l)}function fm(s){return s===Kr?{}:s===xt?[]:s}function ZM(s,o){const a=s.viewQuery;s.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function KM(s,o){const a=s.contentQueries;s.contentQueries=a?(l,h,g)=>{o(l,h,g),a(l,h,g)}:o}function YM(s,o){const a=s.hostBindings;s.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let qf=null;function Xd(){if(!qf){const s=an.Symbol;if(s&&s.iterator)qf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(qf=l)}}}return qf}function eh(s){return!!HE(s)&&(Array.isArray(s)||!(s instanceof Map)&&Xd()in s)}function HE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Jo(s,o,a){return s[o]=a}function Hr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function bc(s,o,a,l){const h=Hr(s,o,a);return Hr(s,o+1,l)||h}function K_(s,o,a,l){const h=Te();return Hr(h,Zs(),o)&&(zt(),Qo(bn(),h,s,o,a,l)),K_}function Gr(s,o,a,l,h,g,v,E){const I=Te(),S=zt(),N=s+22,O=S.firstCreatePass?function mm(s,o,a,l,h,g,v,E,I){const S=o.consts,N=Zd(o,s,4,v||null,Ci(S,E));k_(o,a,N,Ci(S,I)),Tu(o,N);const O=N.tViews=DE(2,N,l,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,N),O.queries=o.queries.embeddedTView(N)),N}(N,S,I,o,a,l,h,g,v):S.data[N];li(O,!1);const H=I[11].createComment("");pc(S,I,H,O),ni(H,I),cm(I,I[N]=xE(H,I,H,O)),xl(O)&&om(S,I,O),null!=v&&Bf(I,O,E)}function Y_(s,o,a){const l=Te();return Hr(l,Zs(),o)&&Bi(zt(),bn(),l,s,o,l[11],a,!1),Y_}function ym(s,o,a,l,h){const v=h?"class":"style";OE(s,a,o.inputs[v],v,l)}function Zf(s,o,a,l){const h=Te(),g=zt(),v=22+s,E=h[11],I=h[v]=f_(E,o,function Cu(){return Mt.lFrame.currentNamespace}()),S=g.firstCreatePass?function Q_(s,o,a,l,h,g,v){const E=o.consts,S=Zd(o,s,2,h,Ci(E,g));return k_(o,a,S,Ci(E,v)),null!==S.attrs&&$f(S,S.attrs,!1),null!==S.mergedAttrs&&$f(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,h,0,o,a,l):g.data[v];li(S,!0);const N=S.mergedAttrs;null!==N&&No(E,I,N);const O=S.classes;null!==O&&el(E,I,O);const H=S.styles;return null!==H&&w_(E,I,H),64!=(64&S.flags)&&pc(g,h,I,S),0===function mu(){return Mt.lFrame.elementDepthCount}()&&ni(I,h),function yu(){Mt.lFrame.elementDepthCount++}(),xl(S)&&(om(g,h,S),bE(g,S,h)),null!==l&&Bf(h,S),Zf}function Pr(){let s=Nn();_a()?va():(s=s.parent,li(s,!1));const o=s;!function kl(){Mt.lFrame.elementDepthCount--}();const a=zt();return a.firstCreatePass&&(Tu(a,s),au(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Mu(s){return 0!=(16&s.flags)}(o)&&ym(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ud(s){return 0!=(32&s.flags)}(o)&&ym(a,o,Te(),o.stylesWithoutHost,!1),Pr}function J_(s,o,a,l){return Zf(s,o,a,l),Pr(),J_}function Kf(s,o,a){const l=Te(),h=zt(),g=s+22,v=h.firstCreatePass?function _m(s,o,a,l,h){const g=o.consts,v=Ci(g,l),E=Zd(o,s,8,"ng-container",v);return null!==v&&$f(E,v,!0),k_(o,a,E,Ci(g,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(g,h,l,o,a):h.data[g];li(v,!0);const E=l[g]=l[11].createComment("");return pc(h,l,E,v),ni(E,l),xl(v)&&(om(h,l,v),bE(h,v,l)),null!=a&&Bf(l,v),Kf}function rh(){let s=Nn();const o=zt();return _a()?va():(s=s.parent,li(s,!1)),o.firstCreatePass&&(Tu(o,s),au(s)&&o.queries.elementEnd(s)),rh}function _o(){return Te()}function Qf(s){return!!s&&"function"==typeof s.then}function ZE(s){return!!s&&"function"==typeof s.subscribe}const KE=ZE;function ll(s,o,a,l){const h=Te(),g=zt(),v=Nn();return function tv(s,o,a,l,h,g,v,E){const I=xl(l),N=s.firstCreatePass&&PE(s),O=o[8],H=q_(o);let X=!0;if(3&l.type||E){const Ge=Br(l,o),We=E?E(Ge):Ge,Et=H.length,Se=E?hn=>E(xn(hn[l.index])):l.index;let Dt=null;if(!E&&I&&(Dt=function ev(s,o,a,l){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===a&&h[g+1]===l){const E=o[7],I=h[g+2];return E.length>I?E[I]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,l.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=g,Dt.__ngLastListenerFn__=g,X=!1;else{g=nv(l,o,O,g,!1);const hn=a.listen(We,h,g);H.push(g,hn),N&&N.push(h,Se,Et,Et+1)}}else g=nv(l,o,O,g,!1);const ve=l.outputs;let ke;if(X&&null!==ve&&(ke=ve[h])){const Ge=ke.length;if(Ge)for(let We=0;We<Ge;We+=2){const gn=o[ke[We]][ke[We+1]].subscribe(g),$s=H.length;H.push(g,gn),N&&N.push(h,l.index,$s,-($s+1))}}}(g,h,h[11],v,s,o,0,l),ll}function YE(s,o,a,l){try{return!1!==a(l)}catch(h){return RE(s,h),!1}}function nv(s,o,a,l,h){return function g(v){if(v===Function)return l;Qd(2&s.flags?Kt(s.index,o):o);let I=YE(o,0,l,v),S=g.__ngNextListenerFn__;for(;S;)I=YE(o,0,S,v)&&I,S=S.__ngNextListenerFn__;return h&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Jf(s=1){return function Ys(s){return(Mt.lFrame.contextLView=function Du(s,o){for(;s>0;)o=o[15],s--;return o}(s,Mt.lFrame.contextLView))[8]}(s)}function cv(s,o,a,l,h){const g=s[a+1],v=null===o;let E=l?Ls(g):il(g),I=!1;for(;0!==E&&(!1===I||v);){const N=s[E+1];rb(s[E],o)&&(I=!0,s[E+1]=l?Lf(N):Zg(N)),E=l?Ls(N):il(N)}I&&(s[a+1]=l?Zg(g):Lf(g))}function rb(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Rs(s,o)>=0}const ar={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wm(s){return s.substring(ar.key,ar.keyEnd)}function Em(s,o){const a=ar.textEnd;return a===o?-1:(o=ar.keyEnd=function ob(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,ar.key=o,a),Ic(s,o,a))}function Ic(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function Xf(s,o,a){return vo(s,o,a,!1),Xf}function Tr(s,o){return vo(s,o,null,!0),Tr}function Dm(s){!function Us(s,o,a,l){const h=zt(),g=es(2);h.firstUpdatePass&&lb(h,null,g,l);const v=Te();if(a!==jt&&Hr(v,g,a)){const E=h.data[sr()];if(wv(E,l)&&!ub(h,g)){let I=l?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(a=fe(I,a||"")),ym(h,E,v,a,l)}else!function _v(s,o,a,l,h,g,v,E){h===jt&&(h=xt);let I=0,S=0,N=0<h.length?h[0]:null,O=0<g.length?g[0]:null;for(;null!==N||null!==O;){const H=I<h.length?h[I+1]:void 0,X=S<g.length?g[S+1]:void 0;let ke,ve=null;N===O?(I+=2,S+=2,H!==X&&(ve=O,ke=X)):null===O||null!==N&&N<O?(I+=2,ve=N):(S+=2,ve=O,ke=X),null!==ve&&vv(s,o,a,l,ve,ke,v,E),N=I<h.length?h[I]:null,O=S<g.length?g[S]:null}}(h,E,v,v[11],v[g+1],v[g+1]=function Tm(s,o,a){if(null==a||""===a)return xt;const l=[],h=us(a);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(l,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(l,g,h[g]);else"string"==typeof h&&o(l,h);return l}(s,o,a),l,g)}}(pr,Xo,s,!0)}function Xo(s,o){for(let a=function hv(s){return function sb(s){ar.key=0,ar.keyEnd=0,ar.value=0,ar.valueEnd=0,ar.textEnd=s.length}(s),Em(s,Ic(s,0,ar.textEnd))}(o);a>=0;a=Em(o,a))pr(s,wm(o),!0)}function vo(s,o,a,l){const h=Te(),g=zt(),v=es(2);g.firstUpdatePass&&lb(g,s,v,l),o!==jt&&Hr(h,v,o)&&vv(g,g.data[sr()],h,h[11],s,h[v+1]=function hb(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(us(s)))),s}(o,a),l,v)}function ub(s,o){return o>=s.expandoStartIndex}function lb(s,o,a,l){const h=s.data;if(null===h[a+1]){const g=h[sr()],v=ub(s,a);wv(g,l)&&null===o&&!v&&(o=!1),o=function cb(s,o,a,l){const h=ba(s);let g=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=ep(a=Cm(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(a=Cm(h,s,o,a,l),null===g){let I=function mv(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==il(l))return s[Ls(l)]}(s,o,l);void 0!==I&&Array.isArray(I)&&(I=Cm(null,s,o,I[1],l),I=ep(I,o.attrs,l),function QC(s,o,a,l){s[Ls(a?o.classBindings:o.styleBindings)]=l}(s,o,l,I))}else g=function yv(s,o,a){let l;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)l=ep(l,s[g].hostAttrs,a);return ep(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(h,g,o,l),function lv(s,o,a,l,h,g){let v=g?o.classBindings:o.styleBindings,E=Ls(v),I=il(v);s[l]=a;let N,S=!1;if(Array.isArray(a)){const O=a;N=O[1],(null===N||Rs(O,N)>0)&&(S=!0)}else N=a;if(h)if(0!==I){const H=Ls(s[E+1]);s[l+1]=Ff(H,E),0!==H&&(s[H+1]=cE(s[H+1],l)),s[E+1]=function rl(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=Ff(E,0),0!==E&&(s[E+1]=cE(s[E+1],l)),E=l;else s[l+1]=Ff(I,0),0===E?E=l:s[I+1]=cE(s[I+1],l),I=l;S&&(s[l+1]=Zg(s[l+1])),cv(s,N,l,!0),cv(s,N,l,!1),function nb(s,o,a,l,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Rs(g,o)>=0&&(a[l+1]=Lf(a[l+1]))}(o,N,s,l,g),v=Ff(E,I),g?o.classBindings=v:o.styleBindings=v}(h,g,o,a,v,l)}}function Cm(s,o,a,l,h){let g=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(g=o[E],l=ep(l,g.hostAttrs,h),g!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function ep(s,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),pr(s,v,!!a||o[++g]))}return void 0===s?null:s}function vv(s,o,a,l,h,g,v,E){if(!(3&o.type))return;const I=s.data,S=I[E+1];cl(function Kg(s){return 1==(1&s)}(S)?db(I,o,a,h,il(S),v):void 0)||(cl(g)||function hi(s){return 2==(2&s)}(S)&&(g=db(I,null,a,h,E,v)),function OM(s,o,a,l,h){if(o)h?s.addClass(a,l):s.removeClass(a,l);else{let g=-1===l.indexOf("-")?void 0:Ko.DashCase;null==h?s.removeStyle(a,l,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Ko.Important),s.setStyle(a,l,h,g))}}(l,v,ui(sr(),a),h,g))}function db(s,o,a,l,h,g){const v=null===o;let E;for(;h>0;){const I=s[h],S=Array.isArray(I),N=S?I[1]:I,O=null===N;let H=a[h+1];H===jt&&(H=O?xt:void 0);let X=O?bt(H,l):N===l?H:void 0;if(S&&!cl(X)&&(X=bt(I,l)),cl(X)&&(E=X,v))return E;const ve=s[h+1];h=v?Ls(ve):il(ve)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(E=bt(I,l))}return E}function cl(s){return void 0!==s}function wv(s,o){return 0!=(s.flags&(o?16:32))}function Ev(s,o=""){const a=Te(),l=zt(),h=s+22,g=l.firstCreatePass?Zd(l,h,1,o,null):l.data[h],v=a[h]=function h_(s,o){return s.createText(o)}(a[11],o);pc(l,a,v,g),li(g,!1)}function oh(s){return Am("",s,""),oh}function Am(s,o,a){const l=Te(),h=function Vs(s,o,a,l){return Hr(s,Zs(),a)?o+me(a)+l:jt}(l,s,o,a);return h!==jt&&function mo(s,o,a){const l=ui(o,s);!function xw(s,o,a){s.setValue(o,a)}(s[11],l,a)}(l,sr(),h),Am}function Cc(s,o,a){const l=Te();if(Hr(l,Zs(),o)){const g=zt(),v=bn();Bi(g,v,l,s,o,function z_(s,o,a){return(null===s||xr(s))&&(a=function cu(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(a[o.index])),a[11]}(ba(g.data),v,l),a,!0)}return Cc}const ds=void 0;var XC=["en",[["a","p"],["AM","PM"],ds],[["AM","PM"],ds,ds],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ds,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ds,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ds,"{1} 'at' {0}",ds],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pv(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let uh={};function Rm(s){const o=function Ib(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=ea(o);if(a)return a;const l=o.split("-")[0];if(a=ea(l),a)return a;if("en"===l)return XC;throw new be(701,!1)}function hl(s){return Rm(s)[wt.PluralCase]}function ea(s){return s in uh||(uh[s]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[s]),uh[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const ta="en-US";let Db=ta;function na(s,o,a,l,h){if(s=K(s),Array.isArray(s))for(let g=0;g<s.length;g++)na(s[g],o,a,l,h);else{const g=zt(),v=Te();let E=$r(s)?s:K(s.provide),I=oc(s);const S=Nn(),N=1048575&S.providerIndexes,O=S.directiveStart,H=S.providerIndexes>>20;if($r(s)||!s.multi){const X=new Ms(I,h,nl),ve=Pe(E,o,h?N:N+H,O);-1===ve?(xs(to(S,v),g,E),wp(g,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(X),v.push(X)):(a[ve]=X,v[ve]=X)}else{const X=Pe(E,o,N+H,O),ve=Pe(E,o,N,N+H),ke=X>=0&&a[X],Ge=ve>=0&&a[ve];if(h&&!Ge||!h&&!ke){xs(to(S,v),g,E);const We=function st(s,o,a,l,h){const g=new Ms(s,a,nl);return g.multi=[],g.index=o,g.componentProviders=0,$b(g,h,l&&!a),g}(h?Sc:mr,a.length,h,l,I);!h&&Ge&&(a[ve].providerFactory=We),wp(g,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(We),v.push(We)}else wp(g,s,X>-1?X:ve,$b(a[h?ve:X],I,!h&&l));!h&&l&&Ge&&a[ve].componentProviders++}}}function wp(s,o,a,l){const h=$r(o),g=function Ku(s){return!!s.useClass}(o);if(h||g){const I=(g?K(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const N=S.indexOf(a);-1===N?S.push(a,[l,I]):S[N+1].push(l,I)}else S.push(a,I)}}}function $b(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Pe(s,o,a,l){for(let h=a;h<l;h++)if(o[h]===s)return h;return-1}function mr(s,o,a,l){return Ep(this.multi,[])}function Sc(s,o,a,l){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=ts(a,a[1],this.providerFactory.index,l);g=E.slice(0,v),Ep(h,g);for(let I=v;I<E.length;I++)g.push(E[I])}else g=[],Ep(h,g);return g}function Ep(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Tt(s,o=[]){return a=>{a.providersResolver=(l,h)=>function ph(s,o,a){const l=zt();if(l.firstCreatePass){const h=xr(s);na(a,l.data,l.blueprint,h,!0),na(o,l.data,l.blueprint,h,!1)}}(l,h?h(s):s,o)}}class gh{}class qe{}function ce(s,o){return new Sr(s,o??null)}class Sr extends gh{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new W_(this);const l=yn(o);this._bootstrapComponents=za(l.bootstrap),this._r3Injector=Jw(o,a,[{provide:gh,useValue:this},{provide:Wo,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Wm extends qe{constructor(o){super(),this.moduleType=o}create(o){return new Sr(this.moduleType,o)}}class hT extends gh{constructor(o,a,l){super(),this.componentFactoryResolver=new W_(this),this.instance=null;const h=new Qu([...o,{provide:gh,useValue:this},{provide:Wo,useValue:this.componentFactoryResolver}],a||sc(),l,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Qv(s,o,a=null){return new hT(s,o,a).injector}let fT=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=xd(0,a.type),h=l.length>0?Qv([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=en({token:s,providedIn:"environment",factory:()=>new s(qt(di))}),s})();function Hb(s){s.getStandaloneInjector=o=>o.get(fT).getOrCreateStandaloneInjector(s)}function pl(s,o,a){const l=Pn()+s,h=Te();return h[l]===jt?Jo(h,l,a?o.call(a):o()):function Cr(s,o){return s[o]}(h,l)}function Zb(s,o,a,l){return function Ka(s,o,a,l,h,g){const v=o+a;return Hr(s,v,h)?Jo(s,v+1,g?l.call(g,h):l(h)):_h(s,v+1)}(Te(),Pn(),s,o,a,l)}function _h(s,o){const a=s[o];return a===jt?void 0:a}function Ip(s,o,a,l,h,g,v,E,I){const S=o+a;return function yo(s,o,a,l,h,g){const v=bc(s,o,a,l);return bc(s,o+2,h,g)||v}(s,S,h,g,v,E)?Jo(s,S+4,I?l.call(I,h,g,v,E):l(h,g,v,E)):_h(s,S+4)}function Jb(s,o){const a=zt();let l;const h=s+22;a.firstCreatePass?(l=function Dp(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const g=l.factory||(l.factory=ki(l.type)),v=tr(nl);try{const E=Sa(!1),I=g();return Sa(E),function ul(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Te(),h,I),I}finally{tr(v)}}function Qm(s,o,a,l,h,g){const v=s+22,E=Te(),I=function Ji(s,o){return s[o]}(E,v);return function Cp(s,o){return s[1].data[o].pure}(E,v)?Ip(E,Pn(),o,I.transform,a,l,h,g,I):I.transform(a,l,h,g)}function Jm(s){return o=>{setTimeout(s,void 0,o)}}const pi=class $i extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let h=o,g=a||(()=>null),v=l;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),g=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(g=Jm(g),h&&(h=Jm(h)),v&&(v=Jm(v)));const E=super.subscribe({next:h,error:g,complete:v});return o instanceof ee.w0&&o.add(E),E}};function eI(){return this._results[Xd()]()}class jn{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Xd(),l=jn.prototype;l[a]||(l[a]=eI)}get changes(){return this._changes||(this._changes=new pi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=dn(o);(this._changesDetected=!function rt(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let h=s[l],g=o[l];if(a&&(h=a(h),g=a(g)),g!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gl=(()=>{class s{}return s.__NG_ELEMENT_ID__=tI,s})();const ri=gl,Dn=class extends ri{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,h=Uf(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(l)),im(l,h,o),new Jd(h)}};function tI(){return Ya(Nn(),Te())}function Ya(s,o){return 4&s.type?new Dn(o,s,y(s,o)):null}let gi=(()=>{class s{}return s.__NG_ELEMENT_ID__=vT,s})();function vT(){return ml(Nn(),Te())}const Rr=gi,nI=class extends Rr{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ru(this._hostTNode,this._hostLView);if(cd(o)){const a=Ta(o,this._hostLView),l=hr(o);return new ro(a[1].data[l+8],a)}return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Qa(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let h,g;"number"==typeof l?h=l:null!=l&&(h=l.index,g=l.injector);const v=o.createEmbeddedView(a||{},g);return this.insert(v,h),v}createComponent(o,a,l,h,g){const v=o&&!function rn(s){return"function"==typeof s}(o);let E;if(v)E=a;else{const O=a||{};E=O.index,l=O.injector,h=O.projectableNodes,g=O.environmentInjector||O.ngModuleRef}const I=v?o:new Gf(Q(o)),S=l||this.parentInjector;if(!g&&null==I.ngModule){const H=(v?S:this.parentInjector).get(di,null);H&&(g=H)}const N=I.create(S,h,void 0,g);return this.insert(N.hostView,E),N}insert(o,a){const l=o._lView,h=l[1];if(function fu(s){return Ur(s[3])}(l)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const O=l[3],H=new nI(O,O[6],O[3]);H.detach(H.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function PM(s,o,a,l){const h=10+l,g=a.length;l>0&&(a[h-1][4]=o),l<g-10?(o[4]=a[h],pd(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function uC(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(h,l,v,g);const E=Ug(g,v),I=l[11],S=Fg(I,v[7]);return null!==S&&function p_(s,o,a,l,h,g){l[0]=h,l[6]=o,Pf(s,l,a,1,h,g)}(h,v[6],I,l,S,E),o.attachToViewContainerRef(),pd($n(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Qa(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=g_(this._lContainer,a);l&&(rs($n(this._lContainer),a),kw(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=g_(this._lContainer,a);return l&&null!=rs($n(this._lContainer),a)?new Jd(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function Qa(s){return s[8]}function $n(s){return s[8]||(s[8]=[])}function ml(s,o){let a;const l=o[s.index];if(Ur(l))a=l;else{let h;if(8&s.type)h=xn(l);else{const g=o[11];h=g.createComment("");const v=Br(s,o);fc(g,Fg(g,v),h,function cC(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=a=xE(l,o,h,s),cm(o,a)}return new nI(a,s,o)}class r0{constructor(o){this.queryList=o,this.matches=null}clone(){return new r0(this.queryList)}setDirty(){this.queryList.setDirty()}}class ra{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new ra(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Tp(o,a).matches&&this.queries[a].setDirty()}}class vh{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class xc{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,h);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new xc(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ey{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new ey(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const g=l[h];this.matchTNodeWithReadOption(o,a,yl(a,g)),this.matchTNodeWithReadOption(o,a,Po(a,o,g,!1,!1))}else l===gl?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Po(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===f||h===gi||h===gl&&4&a.type)this.addMatch(a.index,-2);else{const g=Po(a,o,h,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function yl(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Nc(s,o,a,l){return-1===a?function ty(s,o){return 11&s.type?y(s,o):4&s.type?Ya(s,o):null}(o,s):-2===a?function ia(s,o,a){return a===f?y(o,s):a===gl?Ya(o,s):a===gi?ml(o,s):void 0}(s,o,l):ts(s,s[1],a,o)}function wh(s,o,a,l){const h=o[19].queries[l];if(null===h.matches){const g=s.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const S=v[I];E.push(S<0?null:Nc(o,g[S],v[I+1],a.metadata.read))}h.matches=E}return h.matches}function sa(s,o,a,l){const h=s.queries.getByIndex(a),g=h.matches;if(null!==g){const v=wh(s,o,h,a);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)l.push(v[E/2]);else{const S=g[E+1],N=o[-I];for(let O=10;O<N.length;O++){const H=N[O];H[17]===H[3]&&sa(H[1],H,S,l)}if(null!==N[9]){const O=N[9];for(let H=0;H<O.length;H++){const X=O[H];sa(X[1],X,S,l)}}}}}return l}function s0(s){const o=Te(),a=zt(),l=jl();Ia(l+1);const h=Tp(a,l);if(s.dirty&&function hu(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?sa(a,o,l,[]):wh(a,o,h,l);s.reset(g,m),s.notifyOnChanges()}return!0}return!1}function ny(s,o,a,l){const h=zt();if(h.firstCreatePass){const g=Nn();(function a0(s,o,a){null===s.queries&&(s.queries=new xc),s.queries.track(new ey(o,a))})(h,new vh(o,a,l),g.index),function iI(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function bh(s,o,a){const l=new jn(4==(4&a));O_(s,o,l,l.destroy),null===o[19]&&(o[19]=new ra),o[19].queries.push(new r0(l))}(h,Te(),a)}function _l(){return function o0(s,o){return s[19].queries[o].queryList}(Te(),jl())}function Tp(s,o){return s.queries.getByIndex(o)}function Xa(...s){}const m0=new vn("Application Initializer");let El=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Xa,this.reject=Xa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Qf(g))a.push(g);else if(KE(g)){const v=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(qt(m0,8))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const yI=new vn("AppId",{providedIn:"root",factory:function _I(){return`${Mh()}${Mh()}${Mh()}`}});function Mh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pp=new vn("Platform Initializer"),vI=new vn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wI=new vn("appBootstrapListener"),NT=new vn("AnimationModuleType");let EI=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const js=new vn("LocaleId",{providedIn:"root",factory:()=>D(js,Ke.Optional|Ke.SkipSelf)||function xh(){return typeof $localize<"u"&&$localize.locale||ta}()}),bI=new vn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class y0{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let OT=(()=>{class s{compileModuleSync(a){return new Wm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=za(yn(a).declarations).reduce((v,E)=>{const I=Q(E);return I&&v.push(new Gf(I)),v},[]);return new y0(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const DI=(()=>Promise.resolve(0))();function Oc(s){typeof Zone>"u"?DI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class _r{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pi(!1),this.onMicrotaskEmpty=new pi(!1),this.onStable=new pi(!1),this.onError=new pi(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function CI(){let s=an.requestAnimationFrame,o=an.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function FT(s){const o=()=>{!function kT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(an,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,$t(s),s.isCheckStableRunning=!0,kc(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),$t(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,g,v,E)=>{try{return SI(s),a.invokeTask(h,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Op(s)}},onInvoke:(a,l,h,g,v,E,I)=>{try{return SI(s),a.invoke(h,g,v,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Op(s)}},onHasTask:(a,l,h,g)=>{a.hasTask(h,g),l===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,$t(s),kc(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,h,g)=>(a.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_r.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(_r.isInAngularZone())throw new be(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,TI,Xa,Xa);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const TI={};function kc(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function $t(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function SI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Op(s){s._nesting--,kc(s)}class kp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pi,this.onMicrotaskEmpty=new pi,this.onStable=new pi,this.onError=new pi}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}const Nh=new vn(""),Fp=new vn("");let w0,AI=(()=>{class s{constructor(a,l,h){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,w0||(function MI(s){w0=s}(h),h.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_r.assertNotInAngularZone(),Oc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Oc(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(qt(_r),qt(v0),qt(Fp))},s.\u0275prov=en({token:s,factory:s.\u0275fac}),s})(),v0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return w0?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),tu=null;const E0=new vn("AllowMultipleToken"),b0=new vn("PlatformDestroyListeners");class VT{constructor(o,a){this.name=o,this.token=a}}function wo(s,o,a=[]){const l=`Platform: ${o}`,h=new vn(l);return(g=[])=>{let v=gy();if(!v||v.injector.get(E0,!1)){const E=[...a,...g,{provide:h,useValue:!0}];s?s(E):function Wr(s){if(tu&&!tu.get(E0,!1))throw new be(400,!1);tu=s;const o=s.get(S0);(function D0(s){const o=s.get(Pp,null);o&&o.forEach(a=>a())})(s)}(function T0(s=[],o){return mc.create({name:o,providers:[{provide:Yu,useValue:"platform"},{provide:b0,useValue:new Set([()=>tu=null])},...s]})}(E,l))}return function C0(s){const o=gy();if(!o)throw new be(401,!1);return o}()}}function gy(){return tu?.get(S0)??null}let S0=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const h=function NI(s,o){let a;return a="noop"===s?new kp:("zone.js"===s?void 0:s)||new _r(o),a}(l?.ngZone,function A0(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),g=[{provide:_r,useValue:h}];return h.run(()=>{const v=mc.create({providers:g,parent:this.injector,name:a.moduleType.name}),E=a.create(v),I=E.injector.get(Cf,null);if(!I)throw new be(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:N=>{I.handleError(N)}});E.onDestroy(()=>{my(this._modules,E),S.unsubscribe()})}),function PI(s,o,a){try{const l=a();return Qf(l)?l.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(I,h,()=>{const S=E.injector.get(El);return S.runInitializers(),S.donePromise.then(()=>(function Cb(s){Gt(s,"Expected localeId to be defined"),"string"==typeof s&&(Db=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(js,ta)||ta),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const h=Ph({},l);return function LT(s,o,a){const l=new Wm(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(a){const l=a.injector.get(Rh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new be(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(b0,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(qt(mc))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Ph(s,o){return Array.isArray(o)?o.reduce(Ph,s):{...s,...o}}let Rh=(()=>{class s{constructor(a,l,h){this._zone=a,this._injector=l,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new R.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new R.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{_r.assertNotInAngularZone(),Oc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{_r.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),S.unsubscribe()}});this.isStable=(0,se.T)(g,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const h=a instanceof kd;if(!this._injector.get(El).done)throw!h&&Jt(a),new be(405,false);let v;v=h?a:this._injector.get(Wo).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function xI(s){return s.isBoundToModule}(v)?void 0:this._injector.get(gh),S=v.create(mc.NULL,[],l||v.selector,E),N=S.location.nativeElement,O=S.injector.get(Nh,null);return O?.registerApplication(N),S.onDestroy(()=>{this.detachView(S.hostView),my(this.components,S),O?.unregisterApplication(N)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;my(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(wI,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>my(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new be(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(qt(_r),qt(di),qt(Cf))},s.\u0275prov=en({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function my(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let N0=!0,RI=!1;function OI(){return RI=!0,N0}function UT(){if(RI)throw new Error("Cannot enable prod mode after platform setup.");N0=!1}let BT=(()=>{class s{}return s.__NG_ELEMENT_ID__=jT,s})();function jT(s){return function $T(s,o,a){if(ga(s)&&!a){const l=Kt(s.index,o);return new Jd(l,l)}return 47&s.type?new Jd(o[16],o):null}(Nn(),Te(),16==(16&s))}class UI{constructor(){}supports(o){return eh(o)}create(o){return new WT(o)}}const BI=(s,o)=>o;class WT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||BI}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<_y(l,h,g)?a:l,E=_y(v,h,g),I=v.currentIndex;if(v===l)h--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)h++;else{g||(g=[]);const S=E-h,N=I-h;if(S!=N){for(let H=0;H<S;H++){const X=H<g.length?g[H]:g[H]=0,ve=X+H;N<=ve&&ve<S&&(g[H]=X+1)}g[v.previousIndex]=N-S}}E!==I&&o(v,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!eh(o))throw new be(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],v=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,E),l=!0),a=a._next}else h=0,function JM(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Xd()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,h)):o=this._addAfter(new jI(a,l),g,h),o}_verifyReinsertion(o,a,l,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new HI),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new HI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class jI{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $I{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class HI{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new $I,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _y(s,o,a){const l=s.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class Or{constructor(){}supports(o){return o instanceof Map||HE(o)}create(){return new F0}}class F0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||HE(o)))throw new be(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const l=new L0(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class L0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vy(){return new oa([new UI])}let oa=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||vy()),deps:[[s,new ft,new Ue]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new be(901,!1)}}return s.\u0275prov=en({token:s,providedIn:"root",factory:vy}),s})();function GI(){return new wy([new Or])}let wy=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||GI()),deps:[[s,new ft,new Ue]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new be(901,!1)}}return s.\u0275prov=en({token:s,providedIn:"root",factory:GI}),s})();const Vp=wo(null,"core",[]);let qI=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(qt(Rh))},s.\u0275mod=Ut({type:s}),s.\u0275inj=Ft({}),s})();function V0(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(dt,Ae,k)=>{k.d(Ae,{Z:()=>be});var d=k(2090),ee=k(4859),R=k(9681),se=k(1877);class re{constructor(me,pe){this._delegate=me,this.firebase=pe,(0,R._addComponent)(me,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(me,pe=R._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const ot=this._delegate.container.getProvider(me);return!ot.isInitialized()&&"EXPLICIT"===(null===(Xe=ot.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&ot.initialize(),ot.getImmediate({identifier:pe})}_removeServiceInstance(me,pe=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(pe)}_addComponent(me){(0,R._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,R._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function fe(){const nt=function he(nt){const me={},pe={__esModule:!0,initializeApp:function Me(je,U={}){const ge=R.initializeApp(je,U);if((0,d.r3)(me,ge.name))return me[ge.name];const z=new nt(ge,pe);return me[ge.name]=z,z},app:ot,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function De(je){const U=je.name,ge=U.replace("-compat","");if(R._registerComponent(je)&&"PUBLIC"===je.type){const z=(J=ot())=>{if("function"!=typeof J[ge])throw ae.create("invalid-app-argument",{appName:U});return J[ge]()};void 0!==je.serviceProps&&(0,d.ZB)(z,je.serviceProps),pe[ge]=z,nt.prototype[ge]=function(...J){return this._getService.bind(this,U).apply(this,je.multipleInstances?J:[])}}return"PUBLIC"===je.type?pe[ge]:null},removeApp:function Xe(je){delete me[je]},useAsService:function Be(je,U){return"serverAuth"===U?null:U},modularAPIs:R}};function ot(je){if(!(0,d.r3)(me,je=je||R._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:je});return me[je]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function we(){return Object.keys(me).map(je=>me[je])}}),ot.App=nt,pe}(re);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function me(pe){(0,d.ZB)(nt,pe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),nt}(),j=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=B;!function xe(nt){(0,R.registerVersion)("@firebase/app-compat","0.1.37",nt)}()},9681:(dt,Ae,k)=>{k.r(Ae),k.d(Ae,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Hs,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>en,_apps:()=>cn,_clearComponents:()=>zi,_components:()=>wn,_getProvider:()=>Ft,_registerComponent:()=>Fr,_removeServiceInstance:()=>fn,deleteApp:()=>fa,getApp:()=>ii,getApps:()=>si,initializeApp:()=>Ii,onLog:()=>vs,registerVersion:()=>Mr,setLogLevel:()=>tr});var d=k(5861),ee=k(4859),R=k(1877),se=k(2090),re=k(8766);class de{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function ae(tt){return"VERSION"===tt.getComponent()?.type}(et)){const Ct=et.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(et=>et).join(" ")}}const he="@firebase/app",B=new R.Yd("@firebase/app"),Gt="[DEFAULT]",Ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,wn=new Map;function Qt(tt,Ce){try{tt.container.addComponent(Ce)}catch(et){B.debug(`Component ${Ce.name} failed to register with FirebaseApp ${tt.name}`,et)}}function en(tt,Ce){tt.container.addOrOverwriteComponent(Ce)}function Fr(tt){const Ce=tt.name;if(wn.has(Ce))return B.debug(`There were multiple attempts to register component ${Ce}.`),!1;wn.set(Ce,tt);for(const et of cn.values())Qt(et,tt);return!0}function Ft(tt,Ce){const et=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),tt.container.getProvider(Ce)}function fn(tt,Ce,et=Gt){Ft(tt,Ce).clearInstance(et)}function zi(){wn.clear()}const Lr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zr{constructor(Ce,et,Ct){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}const Hs="9.12.1";function Ii(tt,Ce={}){let et=tt;"object"!=typeof Ce&&(Ce={name:Ce});const Ct=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},Ce),It=Ct.name;if("string"!=typeof It||!It)throw Lr.create("bad-app-name",{appName:String(It)});if(et||(et=(0,se.aH)()),!et)throw Lr.create("no-options");const Ut=cn.get(It);if(Ut){if((0,se.vZ)(et,Ut.options)&&(0,se.vZ)(Ct,Ut.config))return Ut;throw Lr.create("duplicate-app",{appName:It})}const $=new ee.H0(It);for(const W of wn.values())$.addComponent(W);const V=new Zr(et,Ct,$);return cn.set(It,V),V}function ii(tt=Gt){const Ce=cn.get(tt);if(!Ce&&tt===Gt)return Ii();if(!Ce)throw Lr.create("no-app",{appName:tt});return Ce}function si(){return Array.from(cn.values())}function fa(tt){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(function*(tt){const Ce=tt.name;cn.has(Ce)&&(cn.delete(Ce),yield Promise.all(tt.container.getProviders().map(et=>et.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function Mr(tt,Ce,et){var Ct;let It=null!==(Ct=Ze[tt])&&void 0!==Ct?Ct:tt;et&&(It+=`-${et}`);const Ut=It.match(/\s|\//),$=Ce.match(/\s|\//);if(Ut||$){const V=[`Unable to register library "${It}" with version "${Ce}":`];return Ut&&V.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Ut&&$&&V.push("and"),$&&V.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void B.warn(V.join(" "))}Fr(new ee.wA(`${It}-version`,()=>({library:It,version:Ce}),"VERSION"))}function vs(tt,Ce){if(null!==tt&&"function"!=typeof tt)throw Lr.create("invalid-log-argument");(0,R.Am)(tt,Ce)}function tr(tt){(0,R.Ub)(tt)}const Fn="firebase-heartbeat-store";let Gn=null;function _n(){return Gn||(Gn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(tt,Ce)=>{0===Ce&&tt.createObjectStore(Fn)}}).catch(tt=>{throw Lr.create("idb-open",{originalErrorMessage:tt.message})})),Gn}function ut(){return(ut=(0,d.Z)(function*(tt){var Ce;try{return(yield _n()).transaction(Fn).objectStore(Fn).get(qn(tt))}catch(et){if(et instanceof se.ZR)B.warn(et.message);else{const Ct=Lr.create("idb-get",{originalErrorMessage:null===(Ce=et)||void 0===Ce?void 0:Ce.message});B.warn(Ct.message)}}})).apply(this,arguments)}function an(tt,Ce){return wr.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(tt,Ce){var et;try{const It=(yield _n()).transaction(Fn,"readwrite");return yield It.objectStore(Fn).put(Ce,qn(tt)),It.done}catch(Ct){if(Ct instanceof se.ZR)B.warn(Ct.message);else{const It=Lr.create("idb-set",{originalErrorMessage:null===(et=Ct)||void 0===et?void 0:et.message});B.warn(It.message)}}})).apply(this,arguments)}function qn(tt){return`${tt.name}!${tt.options.appId}`}class ws{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new nn(et),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Ce=this;return(0,d.Z)(function*(){const Ct=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=tn();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==It&&!Ce._heartbeatsCache.heartbeats.some(Ut=>Ut.date===It))return Ce._heartbeatsCache.heartbeats.push({date:It,agent:Ct}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Ut=>{const $=new Date(Ut.date).valueOf();return Date.now()-$<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,d.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const et=tn(),{heartbeatsToSend:Ct,unsentEntries:It}=function Ri(tt,Ce=1024){const et=[];let Ct=tt.slice();for(const It of tt){const Ut=et.find($=>$.agent===It.agent);if(Ut){if(Ut.dates.push(It.date),nr(et)>Ce){Ut.dates.pop();break}}else if(et.push({agent:It.agent,dates:[It.date]}),nr(et)>Ce){et.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:et,unsentEntries:Ct}}(Ce._heartbeatsCache.heartbeats),Ut=(0,se.L)(JSON.stringify({version:2,heartbeats:Ct}));return Ce._heartbeatsCache.lastSentHeartbeatDate=et,It.length>0?(Ce._heartbeatsCache.heartbeats=It,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Ut})()}}function tn(){return(new Date).toISOString().substring(0,10)}class nn{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,d.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function yt(tt){return ut.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var et=this;return(0,d.Z)(function*(){var Ct;if(yield et._canUseIndexedDBPromise){const Ut=yield et.read();return an(et.app,{lastSentHeartbeatDate:null!==(Ct=Ce.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Ut.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var et=this;return(0,d.Z)(function*(){var Ct;if(yield et._canUseIndexedDBPromise){const Ut=yield et.read();return an(et.app,{lastSentHeartbeatDate:null!==(Ct=Ce.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...Ce.heartbeats]})}})()}}function nr(tt){return(0,se.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function Vr(tt){Fr(new ee.wA("platform-logger",Ce=>new de(Ce),"PRIVATE")),Fr(new ee.wA("heartbeat",Ce=>new ws(Ce),"PRIVATE")),Mr(he,"0.8.2",tt),Mr(he,"0.8.2","esm2017"),Mr("fire-js","")}("")},4859:(dt,Ae,k)=>{k.d(Ae,{H0:()=>he,wA:()=>R});var d=k(5861),ee=k(2090);class R{constructor(B,j,K){this.name=B,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const se="[DEFAULT]";class re{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const K=new ee.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:j});Le&&K.resolve(Le)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const K=this.normalizeInstanceIdentifier(B?.identifier),Le=null!==(j=B?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(xe){if(Le)return null;throw xe}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ae(fe){return"EAGER"===fe.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(j);try{const xe=this.getOrInitializeService({instanceIdentifier:Le});K.resolve(xe)}catch{}}}}clearInstance(B=se){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,d.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=se){return this.instances.has(B)}getOptions(B=se){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,K=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[xe,be]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(xe)&&be.resolve(Le);return Le}onInit(B,j){var K;const Le=this.normalizeInstanceIdentifier(j),xe=null!==(K=this.onInitCallbacks.get(Le))&&void 0!==K?K:new Set;xe.add(B),this.onInitCallbacks.set(Le,xe);const be=this.instances.get(Le);return be&&B(be,Le),()=>{xe.delete(B)}}invokeOnInitCallbacks(B,j){const K=this.onInitCallbacks.get(j);if(K)for(const Le of K)try{Le(B,j)}catch{}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let K=this.instances.get(B);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=B,fe===se?void 0:fe),options:j}),this.instances.set(B,K),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(K,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,K)}catch{}var fe;return K||null}normalizeInstanceIdentifier(B=se){return this.component?this.component.multipleInstances?B:se:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new re(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Ae,k)=>{k.d(Ae,{Am:()=>fe,Ub:()=>he,Yd:()=>ae,in:()=>ee});const d=[];var ee=(()=>{return(B=ee||(ee={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",ee;var B})();const R={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},se=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=(B,j,...K)=>{if(j<B.logLevel)return;const Le=(new Date).toISOString(),xe=re[j];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[xe](`[${Le}]  ${B.name}:`,...K)};class ae{constructor(j){this.name=j,this._logLevel=se,this._logHandler=de,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in ee))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?R[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...j),this._logHandler(this,ee.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...j),this._logHandler(this,ee.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...j),this._logHandler(this,ee.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...j),this._logHandler(this,ee.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...j),this._logHandler(this,ee.ERROR,...j)}}function he(B){d.forEach(j=>{j.setLogLevel(B)})}function fe(B,j){for(const K of d){let Le=null;j&&j.level&&(Le=R[j.level]),K.userLogHandler=null===B?null:(xe,be,...nt)=>{const me=nt.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");be>=(Le??xe.logLevel)&&B({level:ee[be].toLowerCase(),message:me,args:nt,type:xe.name})}}}},8766:(dt,Ae,k)=>{k.d(Ae,{Lj:()=>Me,X3:()=>ot});var d=k(5861);let R,se;const ae=new WeakMap,he=new WeakMap,fe=new WeakMap,B=new WeakMap,j=new WeakMap;let xe={get(U,ge,z){if(U instanceof IDBTransaction){if("done"===ge)return he.get(U);if("objectStoreNames"===ge)return U.objectStoreNames||fe.get(U);if("store"===ge)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return pe(U[ge])},set:(U,ge,z)=>(U[ge]=z,!0),has:(U,ge)=>U instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in U};function me(U){return"function"==typeof U?function nt(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ge){return U.apply(Xe(this),ge),pe(ae.get(this))}:function(...ge){return pe(U.apply(Xe(this),ge))}:function(ge,...z){const J=U.call(Xe(this),ge,...z);return fe.set(J,ge.sort?ge.sort():[ge]),pe(J)}}(U):(U instanceof IDBTransaction&&function Le(U){if(he.has(U))return;const ge=new Promise((z,J)=>{const ne=()=>{U.removeEventListener("complete",te),U.removeEventListener("error",Oe),U.removeEventListener("abort",Oe)},te=()=>{z(),ne()},Oe=()=>{J(U.error||new DOMException("AbortError","AbortError")),ne()};U.addEventListener("complete",te),U.addEventListener("error",Oe),U.addEventListener("abort",Oe)});he.set(U,ge)}(U),((U,ge)=>ge.some(z=>U instanceof z))(U,function re(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,xe):U)}function pe(U){if(U instanceof IDBRequest)return function K(U){const ge=new Promise((z,J)=>{const ne=()=>{U.removeEventListener("success",te),U.removeEventListener("error",Oe)},te=()=>{z(pe(U.result)),ne()},Oe=()=>{J(U.error),ne()};U.addEventListener("success",te),U.addEventListener("error",Oe)});return ge.then(z=>{z instanceof IDBCursor&&ae.set(z,U)}).catch(()=>{}),j.set(ge,U),ge}(U);if(B.has(U))return B.get(U);const ge=me(U);return ge!==U&&(B.set(U,ge),j.set(ge,U)),ge}const Xe=U=>j.get(U);function ot(U,ge,{blocked:z,upgrade:J,blocking:ne,terminated:te}={}){const Oe=indexedDB.open(U,ge),Re=pe(Oe);return J&&Oe.addEventListener("upgradeneeded",mt=>{J(pe(Oe.result),mt.oldVersion,mt.newVersion,pe(Oe.transaction))}),z&&Oe.addEventListener("blocked",()=>z()),Re.then(mt=>{te&&mt.addEventListener("close",()=>te()),ne&&mt.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Re}function Me(U,{blocked:ge}={}){const z=indexedDB.deleteDatabase(U);return ge&&z.addEventListener("blocked",()=>ge()),pe(z).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Be=new Map;function je(U,ge){if(!(U instanceof IDBDatabase)||ge in U||"string"!=typeof ge)return;if(Be.get(ge))return Be.get(ge);const z=ge.replace(/FromIndex$/,""),J=ge!==z,ne=De.includes(z);if(!(z in(J?IDBIndex:IDBObjectStore).prototype)||!ne&&!we.includes(z))return;const te=function(){var Oe=(0,d.Z)(function*(Re,...mt){const Xt=this.transaction(Re,ne?"readwrite":"readonly");let Gt=Xt.store;return J&&(Gt=Gt.index(mt.shift())),(yield Promise.all([Gt[z](...mt),ne&&Xt.done]))[0]});return function(mt){return Oe.apply(this,arguments)}}();return Be.set(ge,te),te}!function be(U){xe=U(xe)}(U=>({...U,get:(ge,z,J)=>je(ge,z)||U.get(ge,z,J),has:(ge,z)=>!!je(ge,z)||U.has(ge,z)}))},5861:(dt,Ae,k)=>{function d(R,se,re,de,ae,he,fe){try{var B=R[he](fe),j=B.value}catch(K){return void re(K)}B.done?se(j):Promise.resolve(j).then(de,ae)}function ee(R){return function(){var se=this,re=arguments;return new Promise(function(de,ae){var he=R.apply(se,re);function fe(j){d(he,de,ae,fe,B,"next",j)}function B(j){d(he,de,ae,fe,B,"throw",j)}fe(void 0)})}}k.d(Ae,{Z:()=>ee})}},dt=>{dt(dt.s=2049)}]);